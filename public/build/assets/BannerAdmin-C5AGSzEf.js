import{W as I,r as x,j as e,d as b}from"./app-DD8HbnFo.js";import{A as U}from"./AuthenticatedLayout-CmEmgoL_.js";import{r as a}from"./index-CfZs1QCH.js";import{u as O}from"./index-BCbvLeWu.js";import{I as R}from"./InputError-BcR6I5Lw.js";import{I as T}from"./IconX-B8oVR9co.js";import"./Dropdown-Dy66et14.js";import"./transition-B3A_t1Nb.js";import"./index-Btdsl_NX.js";const W=({auth:l,banners:h,titles:o,ids:f})=>{var p;const{data:t,setData:n,post:g,processing:i,errors:c,reset:u,delete:j}=I({title:"",banners:[]});console.log(c);const[d,m]=x.useState(!1);x.useState("");const N=()=>{m(!d)},y=async r=>{r.preventDefault();try{const s=new FormData;if(t.banners.length>0){s.append("banner",t.banners),s.append("title",t.title);const D=await fetch(g(route("admin.banner.store",s),{onSuccess:()=>{m(!1),u()}}))}}catch(s){console.error("Error uploading images:",s)}},v=(r,s)=>{const C=[...t==null?void 0:t.banners].filter((S,A)=>A!==s);n("banners",C)};(p=t==null?void 0:t.banners)==null||p.map((r,s)=>e.jsxs("div",{className:"border border-gray-300 rounded relative w-36 h-36 p-1",children:[e.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 rounded-full text-white p-1 cursor-pointer",children:e.jsx(T,{size:16,onClick:()=>{v(r,s)}})}),e.jsx("img",{src:r.preview,className:"w-full h-full object-cover rounded",alt:`Thumbnail ${s}`})]},s)),O({accept:"image/*",onDrop:r=>{n("banners",[...t.banners||[],...r.map(s=>Object.assign(s,{preview:URL.createObjectURL(s)}))])}});const w=r=>{j(route("admin.banner.delete",r))};return e.jsx(U,{user:l==null?void 0:l.user,children:e.jsxs("div",{className:"content py-4 font-poppins",children:[e.jsxs("div",{className:"content-header px-6 flex justify-between items-center",children:[e.jsxs("div",{className:"left",children:[e.jsx("h1",{className:"font-semibold text-gray-800 text-3xl",children:"Banners"}),e.jsx("div",{className:"pt-2",children:e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(b,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(b,{href:route("admin.album.index"),children:"Banner"})})]})})]}),e.jsx("div",{className:"right",children:e.jsx("button",{className:"bg-[#f5cd06] shadow-lg text-[#0f0f0f] px-5 py-3 rounded-md font-semibold text-lg font-poppins",onClick:N,children:"Add New"})})]}),e.jsx("div",{children:e.jsx(a.Collapse,{open:d,children:e.jsx(a.Card,{className:"px-6",children:e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"my-3",children:"Title"}),e.jsx(a.Input,{size:"lg",placeholder:"enter banner title",value:t.title,onChange:r=>n("title",r.target.value),className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}}),e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"my-3",children:"Update Banner"}),e.jsx(a.Input,{type:"file",size:"lg",onChange:r=>{n("banners",[...t.banners||[],...[...r.target.files].map(s=>Object.assign(s,{preview:URL.createObjectURL(s)}))])},className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}}),e.jsx(R,{message:c.title,className:"mt-2"})]}),e.jsx("div",{className:"font-item mb-4 text-right",children:e.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-poppins rounded-sm font-bold",disabled:i,children:"Upload"})})]})})})}),e.jsx("div",{className:"mt-6 flex flex-wrap gap-3",children:h.map((r,s)=>e.jsx(a.Card,{className:"mt-6 mx-8 w-[450px]",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"mr-8",children:e.jsx("img",{src:`${r}`,alt:`${o[s]}`,className:"h-[100px] w-[100px]"})}),e.jsxs("div",{className:"flex w-[60%] justify-between items-center",children:[e.jsx(a.Typography,{variant:"h5",color:"blue-gray",className:"",children:o[s]}),e.jsx("button",{className:"bg-red-500  text-white py-1 px-3 text-xs font-poppins rounded-sm font-bold",disabled:i,onClick:()=>w(f[s]),children:"Delete"})]})]})}))})]})})};export{W as default};
