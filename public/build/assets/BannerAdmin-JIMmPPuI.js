import{W as S,r as d,j as e,d as g}from"./app-DbCcqJ_d.js";import{A as z}from"./AuthenticatedLayout-CV3mGgDu.js";import{r as t}from"./index-PELjPzil.js";import{u as R}from"./index-CL1N5PmR.js";import{I as j}from"./InputError-Dw_uRaC3.js";import{I as T}from"./IconX-DnJwyGEz.js";import"./Dropdown-DnWWWnkI.js";import"./transition-CaZSrNaO.js";import"./index-WFFbRFwy.js";const X=({auth:o,banners:N,titles:m,ids:y})=>{var u;const{data:a,setData:l,post:v,processing:p,errors:x,reset:w,delete:D}=S({title:"",banners:[]}),[b,i]=d.useState(!1),[h,f]=d.useState(!1);d.useState("");const C=()=>{f(!h)},I=async r=>{var s;r.preventDefault();try{const n=new FormData;((s=a.banners[0])==null?void 0:s.size)/(1024*1024)>2?(l("banners",[]),i("Image Size should equal or less than 2 mb")):(i(""),n.append("banners",a.banners[0]),n.append("title",a.title),v(route("admin.banner.store",n),{onSuccess:()=>{f(!1),w()},onError:c=>{console.log(c)}}))}catch(n){console.error("Error uploading images:",n)}},U=(r,s)=>{const c=[...a==null?void 0:a.banners].filter((O,E)=>E!==s);l("banners",c)};(u=a==null?void 0:a.banners)==null||u.map((r,s)=>e.jsxs("div",{className:"border border-gray-300 rounded relative w-36 h-36 p-1",children:[e.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 rounded-full text-white p-1 cursor-pointer",children:e.jsx(T,{size:16,onClick:()=>{U(r,s)}})}),e.jsx("img",{src:r.preview,className:"w-full h-full object-cover rounded",alt:`Thumbnail ${s}`})]},s)),R({accept:"image/*",onDrop:r=>{l("banners",URL.createObjectURL(file))}});const A=r=>{D(route("admin.banner.delete",r))};return e.jsx(z,{user:o==null?void 0:o.user,children:e.jsxs("div",{className:"content py-4 font-poppins",children:[e.jsxs("div",{className:"content-header px-6 flex justify-between items-center",children:[e.jsxs("div",{className:"left",children:[e.jsx("h1",{className:"font-semibold text-gray-800 text-3xl",children:"Banners"}),e.jsx("div",{className:"pt-2",children:e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(g,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(g,{href:route("admin.album.index"),children:"Banner"})})]})})]}),e.jsx("div",{className:"right",children:e.jsx("button",{className:"bg-[#f5cd06] shadow-lg text-[#0f0f0f] px-5 py-3 rounded-md font-semibold text-lg font-poppins",onClick:C,children:"Add New"})})]}),e.jsx("div",{children:e.jsx(t.Collapse,{open:h,children:e.jsx(t.Card,{className:"px-6",children:e.jsxs("form",{onSubmit:I,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(t.Typography,{variant:"h6",color:"blue-gray",className:"my-3",children:"Title"}),e.jsx(t.Input,{size:"lg",placeholder:"enter banner title",value:a.title,onChange:r=>l("title",r.target.value),className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}}),e.jsx(j,{message:x.title,className:"mt-2"}),e.jsx(t.Typography,{variant:"h6",color:"blue-gray",className:"my-3",children:"Update Banner"}),e.jsx(t.Input,{type:"file",size:"lg",onChange:r=>{i(""),l("banners",[...a.banners||[],...[...r.target.files].map(s=>Object.assign(s,{preview:URL.createObjectURL(s)}))])},className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}}),e.jsx(j,{message:b||x.banners,className:"mt-2"})]}),e.jsx("div",{className:"font-item mb-4 text-right",children:e.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-poppins rounded-sm font-bold",disabled:p,children:"Upload"})})]})})})}),e.jsx("div",{className:"mt-6 flex flex-wrap gap-3",children:N.map((r,s)=>e.jsx(t.Card,{className:"mt-6 mx-8 w-[450px]",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"mr-8",children:e.jsx("img",{src:`${r}`,alt:`${m[s]}`,className:"h-[100px] w-[100px]"})}),e.jsxs("div",{className:"flex w-[60%] justify-between items-center",children:[e.jsx(t.Typography,{variant:"h5",color:"blue-gray",className:"",children:m[s]}),e.jsx("button",{className:"bg-red-500  text-white py-1 px-3 text-xs font-poppins rounded-sm font-bold",disabled:p,onClick:()=>A(y[s]),children:"Delete"})]})]})}))})]})})};export{X as default};
