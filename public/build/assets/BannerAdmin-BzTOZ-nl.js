import{q as P,W as R,r as x,j as e,d as y,b as N}from"./app-DvtcX0Va.js";import{A as k,i as q}from"./AuthenticatedLayout-Bj794KeD.js";import{r as a}from"./index-9-dnu-Xy.js";import{I as v}from"./InputError-D41KhEdt.js";import"./Dropdown-DcD4_0Y7.js";import"./transition-CVDeYFH-.js";import"./index-1FlmTHLb.js";const J=({auth:d,banners:h})=>{const{role:D,permissions:w}=P().props.auth,{data:t,setData:c,post:E,processing:b,errors:u,reset:S,delete:C}=R({title:"",banners:[]}),[m,i]=x.useState(!1),[f,g]=x.useState(!1),[o,j]=x.useState(null),O=()=>{g(!f)},U=async s=>{var n;s.preventDefault();try{const r=new FormData;((n=t.banners[0])==null?void 0:n.size)/(1024*1024)>2?(c("banners",[]),i("Image Size should equal or less than 2 mb")):(i(""),r.append("banners",t.banners[0]),r.append("title",t.title),E(route("admin.banner.store",r),{onSuccess:()=>{g(!1),S()},onError:l=>{console.log(l)}}))}catch(r){console.error("Error uploading images:",r)}},A=s=>{C(route("admin.banner.delete",s))},T=(s,n)=>{j(n)},z=()=>{j(null)},B=s=>{s.preventDefault()},I=(s,n)=>{if(!o)return;const r=h,l=r.indexOf(o),p=r.indexOf(n);l!==-1&&p!==-1&&(r.splice(l,1),r.splice(p,0,o),N.post(route("admin.banner.reorder",o==null?void 0:o.id),{position:p+1}),N.post(route("admin.banner.reorder",n==null?void 0:n.id),{position:l+1}))};return e.jsx(k,{user:d==null?void 0:d.user,children:e.jsxs("div",{className:"content py-4 font-poppins",children:[e.jsxs("div",{className:"content-header px-6 flex justify-between items-center",children:[e.jsxs("div",{className:"left",children:[e.jsx("h1",{className:"font-semibold text-gray-800 text-3xl",children:"Banners"}),e.jsx("div",{className:"pt-2",children:e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(y,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(y,{href:route("admin.album.index"),children:"Banner"})})]})})]}),e.jsx("div",{className:"right",children:e.jsx("button",{className:"bg-[#f5cd06] shadow-lg text-[#0f0f0f] px-5 py-3 rounded-md font-semibold text-lg font-poppins",onClick:O,children:"Add New"})})]}),e.jsx("div",{children:e.jsx(a.Collapse,{open:f,children:e.jsx(a.Card,{className:"px-6",children:e.jsxs("form",{onSubmit:U,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"my-3",children:"Title"}),e.jsx(a.Input,{size:"lg",placeholder:"enter banner title",value:t.title,onChange:s=>c("title",s.target.value),className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}}),e.jsx(v,{message:u.title,className:"mt-2"}),e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"my-3",children:"Update Banner"}),e.jsx(a.Input,{type:"file",size:"lg",onChange:s=>{i(""),c("banners",[...t.banners||[],...[...s.target.files].map(n=>Object.assign(n,{preview:URL.createObjectURL(n)}))])},className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}}),e.jsx(v,{message:m||u.banners,className:"mt-2"})]}),e.jsx("div",{className:"font-item mb-4 text-right",children:e.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-poppins rounded-sm font-bold",disabled:b,children:"Upload"})})]})})})}),e.jsx("div",{className:"mt-6 flex flex-wrap gap-6 mx-6",children:h.map((s,n)=>e.jsx(a.Card,{className:"mt-6 w-[450px] cursor-pointer",draggable:"true",onDragStart:r=>T(r,s),onDragEnd:z,onDragOver:B,onDrop:r=>I(r,s),children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("img",{src:`${s==null?void 0:s.bannerpath}`,alt:`${s==null?void 0:s.title}`,className:"h-[100px] w-[100px] object-cover rounded-md"}),e.jsxs("div",{className:"flex justify-between items-center w-full pr-4",children:[e.jsx(a.Typography,{variant:"h5",color:"blue-gray",children:s==null?void 0:s.title}),q(w,["delete_banners"],D)&&e.jsx("button",{className:"bg-red-500  text-white py-1 px-3 text-xs font-poppins rounded-sm font-bold",disabled:b,onClick:()=>A(s==null?void 0:s.id),children:"Delete"})]})]})},s==null?void 0:s.id))})]})})};export{J as default};
