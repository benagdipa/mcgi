import{R as n,j as e,r as y}from"./app-DcU-pHgi.js";import{r as o}from"./index-D3gu5DKJ.js";import{D as N}from"./react-datepicker-Tf4xdVI7.js";import"./index-BarBPuyi.js";import"./index-x9q-pVUo.js";const C=n.forwardRef(({className:a,children:t,...s},i)=>e.jsx(o.Card,{className:`shadow-lg rounded-lg p-6 ${a}`,...s,ref:i,children:t})),w=n.forwardRef(({className:a,children:t,...s},i)=>e.jsx("div",{className:`p-4 ${a}`,...s,ref:i,children:t})),q=n.forwardRef(({className:a,children:t,...s},i)=>e.jsx("div",{className:`p-4 mt-4 border-t ${a}`,...s,ref:i,children:t})),E=n.forwardRef(({className:a,children:t,...s},i)=>e.jsx("button",{className:`px-4 py-2 bg-primary text-white rounded hover:bg-primary-dark ${a}`,...s,ref:i,children:t}));C.displayName="Card";w.displayName="CardBody";q.displayName="CardFooter";E.displayName="Button";const m=n.forwardRef(({className:a,...t},s)=>e.jsx(o.Input,{className:`focus:border-primary ${a}`,...t,ref:s}));m.displayName="Input";const R=n.forwardRef(({className:a,...t},s)=>e.jsx(o.Textarea,{className:`min-h-[100px] ${a}`,...t,ref:s}));R.displayName="Textarea";const j=n.forwardRef(({className:a,children:t,...s},i)=>e.jsx(o.Select,{className:`focus:border-primary ${a}`,...s,ref:i,children:t})),h=n.forwardRef(({className:a,children:t,...s},i)=>e.jsx(o.Option,{className:a,...s,ref:i,children:t}));j.displayName="Select";h.displayName="Option";const D=n.forwardRef(({className:a,...t},s)=>e.jsx(o.Checkbox,{className:`text-primary focus:ring-primary ${a}`,...t,ref:s}));D.displayName="Checkbox";function U({event:a=null,errors:t={},internalCategories:s={},externalCategories:i={},eventTypes:x={},primaryAction:S}){const[d,u]=y.useState({title:(a==null?void 0:a.title)||"",description:(a==null?void 0:a.description)||"",location:(a==null?void 0:a.location)||"",category:(a==null?void 0:a.category)||"",start_date:a!=null&&a.start_date?new Date(a.start_date):new Date,end_date:a!=null&&a.end_date?new Date(a.end_date):new Date(new Date().setHours(new Date().getHours()+2)),event_type:(a==null?void 0:a.event_type)||x.internal,requires_registration:(a==null?void 0:a.requires_registration)??!0,max_attendees:(a==null?void 0:a.max_attendees)||0,featured_image:(a==null?void 0:a.featured_image)||""}),[_,M]=y.useState(!1),[p,g]=y.useState(""),c=r=>{const{name:l,value:f,type:$,checked:I}=r.target;u(O=>({...O,[l]:$==="checkbox"?I:f}))},b=(r,l)=>{u(f=>({...f,[r]:l})),r==="end_date"&&d.start_date>l?g("End date must be after start date"):r==="start_date"&&l>d.end_date?g("Start date must be before end date"):g("")},k=r=>{if(r.preventDefault(),p){alert("Please fix date errors before submitting.");return}M(!0),S(d)},F=d.event_type===x.internal?s:i;return e.jsx("form",{onSubmit:k,className:"space-y-6",children:e.jsxs(C,{className:"overflow-visible",children:[e.jsx(w,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(m,{type:"text",name:"title",label:"Event Title",value:d.title,onChange:c,error:t.title,required:!0}),t.title&&e.jsx("span",{className:"text-red-500 text-sm",children:t.title})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(R,{name:"description",label:"Event Description",value:d.description,onChange:c,error:t.description,rows:4,required:!0}),t.description&&e.jsx("span",{className:"text-red-500 text-sm",children:t.description})]}),e.jsxs("div",{children:[e.jsxs(j,{name:"event_type",label:"Event Type",value:d.event_type,onChange:r=>{u({...d,event_type:r,category:""})},error:t.event_type,required:!0,children:[e.jsx(h,{value:x.internal,children:"Internal (Members Only)"}),e.jsx(h,{value:x.external,children:"External (Open to Guests)"})]}),t.event_type&&e.jsx("span",{className:"text-red-500 text-sm",children:t.event_type})]}),e.jsxs("div",{children:[e.jsx(j,{name:"category",label:"Event Category",value:d.category,onChange:r=>u({...d,category:r}),error:t.category,required:!0,children:Object.entries(F).map(([r,l])=>e.jsx(h,{value:r,children:l},r))}),t.category&&e.jsx("span",{className:"text-red-500 text-sm",children:t.category})]}),e.jsxs("div",{children:[e.jsx(m,{type:"text",name:"location",label:"Event Location",value:d.location,onChange:c,error:t.location,required:!0}),t.location&&e.jsx("span",{className:"text-red-500 text-sm",children:t.location})]}),e.jsxs("div",{children:[e.jsx(m,{type:"text",name:"featured_image",label:"Featured Image URL",value:d.featured_image,onChange:c,error:t.featured_image}),t.featured_image&&e.jsx("span",{className:"text-red-500 text-sm",children:t.featured_image})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Start Date and Time"}),e.jsx(N,{selected:d.start_date,onChange:r=>b("start_date",r),showTimeSelect:!0,dateFormat:"MMMM d, yyyy h:mm aa",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0}),t.start_date&&e.jsx("span",{className:"text-red-500 text-sm",children:t.start_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"End Date and Time"}),e.jsx(N,{selected:d.end_date,onChange:r=>b("end_date",r),showTimeSelect:!0,dateFormat:"MMMM d, yyyy h:mm aa",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0}),t.end_date&&e.jsx("span",{className:"text-red-500 text-sm",children:t.end_date}),p&&e.jsx("span",{className:"text-red-500 text-sm",children:p})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{name:"requires_registration",checked:d.requires_registration,onChange:c,error:t.requires_registration}),e.jsx("label",{htmlFor:"requires_registration",className:"text-gray-700",children:"Requires Registration"})]}),t.requires_registration&&e.jsx("span",{className:"text-red-500 text-sm",children:t.requires_registration})]}),e.jsxs("div",{children:[e.jsx(m,{type:"number",name:"max_attendees",label:"Maximum Attendees (0 = unlimited)",value:d.max_attendees,onChange:c,error:t.max_attendees,disabled:!d.requires_registration,min:"0"}),t.max_attendees&&e.jsx("span",{className:"text-red-500 text-sm",children:t.max_attendees})]})]})}),e.jsx(q,{className:"flex justify-end pt-0",children:e.jsx(E,{type:"submit",disabled:_||p!=="",children:_?"Processing...":a?"Update Event":"Create Event"})})]})})}export{U as default};
