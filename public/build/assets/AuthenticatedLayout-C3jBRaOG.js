import{X as B,r as g,j as e,x as M,R as W}from"./app-CCsYImbS.js";import{r as i}from"./index-BWzXBwXz.js";import{i as G,d as V,j as F,k as Q,l as X,m as q,n as J,o as K,p as Y}from"./index-LT8Lyk0a.js";import{e as S,f as P,g as O,d as Z,A as ee,h as te,i as se,D as v,b as re,j as ae,k as ie}from"./Dropdown-CI9TtJWS.js";import{G as $}from"./iconBase-DsVmA3m-.js";import{c as L,O as ne}from"./index-BkHnx_rv.js";function oe(s){return $({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 4H6c-1.103 0-2 .897-2 2v5h2V8l6.4 4.8a1.001 1.001 0 0 0 1.2 0L20 8v9h-8v2h8c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zm-7 6.75L6.666 6h12.668L13 10.75z"},child:[]},{tag:"path",attr:{d:"M2 12h7v2H2zm2 3h6v2H4zm3 3h4v2H7z"},child:[]}]})(s)}function C(s,m,l=""){return l&&(l==null?void 0:l.name)==="super-admin"?!0:m.some(a=>s.includes(a))}function le({current:s,toggle:m,setToggle:l}){const{role:a,permissions:x}=B().props.auth,[o,h]=g.useState(s),[d,u]=g.useState({}),[n,p]=g.useState(!1),f=t=>{h(o===t?0:t)},r=t=>{u({...d,[t]:!d[t]})},N=()=>{p(!n),l&&l(!m)},y=route().current(),T=[{name:"Dashboard",route:"dashboard",icon:e.jsx(G,{size:22,className:"text-gray-400 group-hover:text-white"})},{name:"Website",route:"home",icon:e.jsx(P,{size:22,className:"text-gray-400 group-hover:text-white"}),target:"_blank"}],R=[{name:"Blog Posts",route:"admin.blogs.index",permission:"create_blog_posts|edit_blog_posts|delete_blogs_posts",icon:e.jsx(V,{size:22,className:"text-gray-400 group-hover:text-white"}),subItems:[{name:"All Posts",route:"admin.blogs.index"},{name:"Add New",route:"admin.blogs.add"},{name:"Categories",route:"admin.blogs.categories.index",permission:"create_categories|edit_categories|delete_categories"},{name:"Tags",route:"admin.blogs.tags.index",permission:"create_tags|edit_tags|delete_tags"}]},{name:"Events",route:"admin.events.index",permission:"create_events|edit_events|delete_events",icon:e.jsx(F,{size:22,className:"text-gray-400 group-hover:text-white"}),subItems:[{name:"All Events",route:"admin.events.index"},{name:"Create Event",route:"admin.events.create"},{name:"Attendances",route:"admin.events.attendances.index"}]},{name:"Media",route:"admin.album.index",permission:"create_albums|edit_albums|delete_albums",icon:e.jsx(Q,{size:22,className:"text-gray-400 group-hover:text-white"}),subItems:[{name:"Albums",route:"admin.album.index"},{name:"Banners",route:"admin.banner.index",permission:"create_banners|edit_banners|delete_banners"}]}],D=[{name:"User Management",route:"admin.users.index",permission:"create_users|edit_users|delete_users",icon:e.jsx(X,{size:22,className:"text-gray-400 group-hover:text-white"})},{name:"Role Management",route:"admin.roles.index",permission:"create_roles|edit_roles|delete_roles",icon:e.jsx(q,{size:22,className:"text-gray-400 group-hover:text-white"})},{name:"Locations",route:"admin.location.index",permission:"create_church_locations|edit_church_locations|delete_church_locations",icon:e.jsx(J,{size:22,className:"text-gray-400 group-hover:text-white"})},{name:"Locale Settings",route:"admin.locale.index",permission:"create_locale|edit_locale|delete_locale",icon:e.jsx(P,{size:22,className:"text-gray-400 group-hover:text-white"})}],E=[{name:"Email Templates",route:"admin.email.index",permission:"create_email_templates|edit_email_templates|delete_email_templates",icon:e.jsx(oe,{size:22,className:"text-gray-400 group-hover:text-white"})}],H=[{name:"Profile",route:"profile.edit",icon:e.jsx(K,{size:22,className:"text-gray-400 group-hover:text-white"})},{name:"Settings",route:"profile.edit",icon:e.jsx(Y,{size:22,className:"text-gray-400 group-hover:text-white"})}],k=t=>y===t||y.startsWith(`${t}.`),U=t=>t?t.some(c=>k(c.route)):!1,I=(t,c)=>{const _=k(t.route),A=t.subItems&&U(t.subItems);return t.permission&&!C(x,t.permission.split("|"),a)?null:e.jsx("div",{children:t.subItems?e.jsxs(i.Accordion,{open:o===c+1,icon:e.jsx("div",{className:"mr-3",children:o===c+1?e.jsx(O,{size:16,className:"text-gray-400"}):e.jsx(S,{size:16,className:"text-gray-400"})}),children:[e.jsxs(i.AccordionHeader,{onClick:()=>f(c+1),className:`py-3 border-0 text-base font-medium ${A?"text-white":"text-gray-300"}`,children:[e.jsx(i.ListItemPrefix,{children:t.icon}),e.jsx(i.Typography,{className:`font-medium text-base ${n?"hidden":"block"}`,children:t.name})]}),e.jsx(i.AccordionBody,{className:"py-0",children:e.jsx(i.List,{className:"p-0",children:t.subItems.map((j,b)=>{if(j.permission&&!C(x,j.permission.split("|"),a))return null;const z=k(j.route);return e.jsx(M,{href:route(j.route),children:e.jsx(i.ListItem,{className:`pl-10 py-2 ${z?"bg-primary/20 text-white font-medium":"text-gray-400 hover:text-white"}`,children:e.jsx(i.Typography,{className:"font-normal text-sm",children:j.name})})},`sub-item-${b}`)})})})]}):e.jsx(M,{href:route(t.route),target:t.target||"_self",children:e.jsx(i.Tooltip,{content:t.name,placement:"right",className:n?"block":"hidden",children:e.jsxs(i.ListItem,{className:`py-3 hover:bg-primary/20 group ${_?"bg-primary/20 text-white font-medium":"text-gray-400 hover:text-white"}`,children:[e.jsx(i.ListItemPrefix,{children:t.icon}),e.jsx(i.Typography,{className:`font-medium text-base ${n?"hidden":"block"}`,children:t.name})]})})})},`nav-item-${c}`)},w=(t,c,_,A)=>c.filter(b=>b.permission?C(x,b.permission.split("|"),a):!0).length===0?null:e.jsxs("div",{className:"mb-4",children:[!n&&e.jsxs("div",{className:"px-4 py-2 flex justify-between items-center cursor-pointer",onClick:()=>r(A),children:[e.jsx(i.Typography,{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:t}),e.jsx("div",{className:"text-gray-500",children:_?e.jsx(S,{size:14}):e.jsx(O,{size:14})})]}),!_&&e.jsx(i.List,{className:"p-0",children:c.map((b,z)=>I(b,z))})]});return e.jsxs("div",{className:`transition-all duration-300 ease-in-out h-full bg-[#212b36] flex flex-col overflow-hidden ${n?"w-20":"w-[20rem]"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[e.jsxs("div",{className:`flex items-center ${n?"justify-center w-full":""}`,children:[!n&&e.jsx("div",{className:"text-white text-xl font-bold",children:"MCGI Admin"}),n&&e.jsx("div",{className:"text-white text-xl font-bold",children:"M"})]}),e.jsx("button",{className:`text-gray-400 hover:text-white ${n?"hidden":"block"}`,onClick:N,children:e.jsx(ce,{size:20})}),e.jsx("button",{className:`text-gray-400 hover:text-white ${n?"block":"hidden"}`,onClick:N,children:e.jsx(S,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden py-4",children:[e.jsx(i.List,{className:"p-0 mb-4",children:T.map((t,c)=>I(t,c))}),w("Content",R,d.content,"content"),w("Administration",D,d.admin,"admin"),w("Communication",E,d.communication,"communication"),w("Account",H,d.account,"account")]}),!n&&e.jsx("div",{className:"p-4 border-t border-gray-700 mt-auto",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center text-white font-medium",children:a&&a.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx(i.Typography,{className:"text-white text-sm font-medium",children:a&&a.charAt(0).toUpperCase()+a.slice(1)}),e.jsx(i.Typography,{className:"text-gray-400 text-xs",children:"v1.0.0"})]})]})})]})}const ce=({size:s,className:m})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:m,children:e.jsx("path",{d:"M15 18l-6-6 6-6"})});function de({user:s,onSetToggleHandler:m}){const[l,a]=g.useState(!1),[x,o]=g.useState(""),[h,d]=g.useState(!1),u=[{id:1,type:"info",message:"New user registered",time:"2 hours ago",read:!1},{id:2,type:"warning",message:"Server maintenance scheduled",time:"1 day ago",read:!1},{id:3,type:"success",message:"Backup completed successfully",time:"2 days ago",read:!0}],n=r=>{r.preventDefault(),console.log("Searching for:",x)},p=()=>{d(!h)},f=r=>{switch(r){case"warning":return e.jsx("span",{className:"bg-amber-100 text-amber-600 p-2 rounded-full",children:"⚠️"});case"success":return e.jsx("span",{className:"bg-green-100 text-green-600 p-2 rounded-full",children:"✓"});case"info":default:return e.jsx("span",{className:"bg-blue-100 text-blue-600 p-2 rounded-full",children:"ℹ️"})}};return e.jsxs("div",{className:"admin-header w-full sticky top-0 flex items-center py-3 lg:px-6 px-3 border-b font-poppins bg-white z-50 shadow-sm",children:[e.jsxs("div",{className:"left lg:w-[20rem] flex items-center gap-4",children:[e.jsx("button",{className:"lg:hidden text-gray-500 hover:text-gray-700",onClick:m,children:e.jsx(Z,{size:24})}),e.jsx(ee,{className:"h-8 w-auto"})]}),e.jsxs("div",{className:"right flex lg:justify-between justify-end gap-4 w-full",children:[e.jsx("div",{className:`search-container relative ${l?"md:w-80":"md:w-40"} transition-all duration-300`,children:e.jsxs("form",{onSubmit:n,className:"hidden md:flex items-center relative",children:[e.jsx("input",{type:"text",placeholder:"Search...",className:`rounded-full border-gray-300 pr-10 focus:ring-primary focus:border-primary ${l?"w-full pl-4":"w-40 pl-4"} transition-all duration-300`,value:x,onChange:r=>o(r.target.value),onFocus:()=>a(!0),onBlur:()=>setTimeout(()=>a(!1),200)}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary",children:e.jsx(te,{size:20})})]})}),e.jsxs("div",{className:"flex gap-2 items-center justify-end",children:[e.jsxs("div",{className:"relative",children:[e.jsx(i.Tooltip,{content:"Notifications",children:e.jsxs("button",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors relative",onClick:p,children:[e.jsx(se,{size:20,className:"text-gray-600"}),u.filter(r=>!r.read).length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full",children:u.filter(r=>!r.read).length})]})}),h&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg py-2 z-50 border border-gray-200",children:[e.jsx("div",{className:"px-4 py-2 border-b border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold text-gray-700",children:"Notifications"}),e.jsx("button",{className:"text-xs text-primary hover:underline",children:"Mark all as read"})]})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:u.length>0?u.map(r=>e.jsx("div",{className:`px-4 py-3 border-b border-gray-100 last:border-0 hover:bg-gray-50 ${r.read?"":"bg-blue-50/50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[f(r.type),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${r.read?"text-gray-700":"font-medium"}`,children:r.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.time})]})]})},r.id)):e.jsx("div",{className:"px-4 py-6 text-center text-gray-500",children:"No notifications"})}),e.jsx("div",{className:"px-4 py-2 border-t border-gray-100",children:e.jsx(M,{href:"#",className:"text-primary text-sm hover:underline block text-center",children:"View all notifications"})})]})]}),s&&e.jsxs(v,{children:[e.jsx(v.Trigger,{children:e.jsxs("button",{className:"flex items-center gap-2 p-1 rounded-full hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-medium",children:[s.first_name.charAt(0),s.last_name?s.last_name.charAt(0):""]}),e.jsx("span",{className:"hidden md:inline-block font-medium text-gray-700",children:s.first_name}),e.jsx(O,{size:16,className:"text-gray-500"})]})}),e.jsxs(v.Content,{width:"48",children:[e.jsxs("div",{className:"p-2 border-b border-gray-100",children:[e.jsxs("div",{className:"font-medium text-gray-800",children:[s.first_name," ",s.last_name]}),e.jsx("div",{className:"text-xs text-gray-500",children:s.email})]}),e.jsxs(v.Link,{href:route("dashboard"),className:"flex items-center gap-2",children:[e.jsx(re,{size:16}),"Dashboard"]}),e.jsxs(v.Link,{href:route("profile.edit"),className:"flex items-center gap-2",children:[e.jsx(ae,{size:16}),"Profile Settings"]}),e.jsxs(v.Link,{href:route("logout"),method:"post",as:"button",className:"flex items-center gap-2 text-red-600",children:[e.jsx(ie,{size:16}),"Log Out"]})]})]})]})]})]})}function me(s){return $({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"18",height:"18",x:"3",y:"3",rx:"2"},child:[]},{tag:"path",attr:{d:"M9 3v18"},child:[]},{tag:"path",attr:{d:"m16 15-3-3 3-3"},child:[]}]})(s)}function xe(s){return $({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"18",height:"18",x:"3",y:"3",rx:"2"},child:[]},{tag:"path",attr:{d:"M9 3v18"},child:[]},{tag:"path",attr:{d:"m14 9 3 3-3 3"},child:[]}]})(s)}function be({user:s,header:m,children:l}){const[a,x]=g.useState(!0),{flash:o}=B().props;g.useEffect(()=>{o.success&&L.success(o.success),o.error&&L.error(o.error),o.message&&L.success(o.message)},[o]);const h=()=>{x(!a)},d=route().current(),u=n=>{const p={blogs:1,events:2},f=["admin.blogs.index","admin.blogs.add","admin.blogs.categories.index","admin.blogs.tags.index","admin.events.index","admin.events.add","admin.events.view","admin.events.attendances.index"];for(let r=0;r<f.length;r++)if(f[r].includes(n)){const N=n.split(".");for(const y in p)if(N.includes(y))return p[y]}return 0};return e.jsxs(W.Fragment,{children:[e.jsx(ne,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{style:{background:"#22c55e"}},error:{style:{background:"#ef4444"}}}}),e.jsxs("div",{className:"desktop-view h-screen w-full",children:[e.jsx(de,{user:s}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex relative",children:[!a&&e.jsx("div",{className:"absolute top-[15px] left-[15px] cursor-pointer z-[20]",onClick:h,children:e.jsx(xe,{size:36})}),e.jsxs("aside",{className:`main-sidebar bg-[#212b36] w-[20rem] fixed  z-[100] h-screen ${a?" lg:block":"hidden "} `,children:[e.jsx("div",{className:"absolute top-[15px] right-[20px] cursor-pointer z-[20]",onClick:h,children:e.jsx(me,{size:32,color:"white"})}),e.jsx("div",{className:"fixed top-0 left-0 right-0 bottom-0 bg-transparent block lg:hidden",onClick:h}),e.jsx(le,{current:u(d)})]}),e.jsx("div",{className:`main-content  w-full ${a?" lg:ml-[20rem]":"ml-[4rem]"} ]`,children:l})]})})]})]})}export{be as A,C as i};
