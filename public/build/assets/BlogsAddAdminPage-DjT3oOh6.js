import{G as B,r as T,j as v,S as U}from"./app-Dtf8gQQv.js";import{A as D}from"./AuthenticatedLayout-BxQm0Q3I.js";import{T as q,v as A,G as V,m as $,s as J,c as G}from"./convertToHtml-B3Y-FAdW.js";import{I as N}from"./InputLabel-D9P81NZo.js";import{I as X}from"./InputError-Kzf20M5r.js";import"./index-DbSCgy01.js";import"./index-BarBPuyi.js";import"./index-B7ZiCRBO.js";import"./Dropdown-Det8Na6t.js";import"./transition-DVSbjTkX.js";(function(){try{if(typeof document<"u"){var j=document.createElement("style");j.appendChild(document.createTextNode('.image-tool{--bg-color: #cdd1e0;--front-color: #388ae5;--border-color: #e8e8eb}.image-tool__image{border-radius:3px;overflow:hidden;margin-bottom:10px}.image-tool__image-picture{max-width:100%;vertical-align:bottom;display:block}.image-tool__image-preloader{width:50px;height:50px;border-radius:50%;background-size:cover;margin:auto;position:relative;background-color:var(--bg-color);background-position:center center}.image-tool__image-preloader:after{content:"";position:absolute;z-index:3;width:60px;height:60px;border-radius:50%;border:2px solid var(--bg-color);border-top-color:var(--front-color);left:50%;top:50%;margin-top:-30px;margin-left:-30px;animation:image-preloader-spin 2s infinite linear;box-sizing:border-box}.image-tool__caption{display:none}.image-tool__caption[contentEditable=true][data-placeholder]:before{position:absolute!important;content:attr(data-placeholder);color:#707684;font-weight:400;display:none}.image-tool__caption[contentEditable=true][data-placeholder]:empty:before{display:block}.image-tool__caption[contentEditable=true][data-placeholder]:empty:focus:before{display:none}.image-tool--empty .image-tool__image{display:none}.image-tool--empty .image-tool__caption,.image-tool--uploading .image-tool__caption{display:none!important}.image-tool .cdx-button{display:flex;align-items:center;justify-content:center}.image-tool .cdx-button svg{height:auto;margin:0 6px 0 0}.image-tool--filled .cdx-button,.image-tool--filled .image-tool__image-preloader{display:none}.image-tool--uploading .image-tool__image{min-height:200px;display:flex;border:1px solid var(--border-color);background-color:#fff}.image-tool--uploading .image-tool__image-picture,.image-tool--uploading .cdx-button{display:none}.image-tool--withBorder .image-tool__image{border:1px solid var(--border-color)}.image-tool--withBackground .image-tool__image{padding:15px;background:var(--bg-color)}.image-tool--withBackground .image-tool__image-picture{max-width:60%;margin:0 auto}.image-tool--stretched .image-tool__image-picture{width:100%}.image-tool--caption .image-tool__caption{display:block}@keyframes image-preloader-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}')),document.head.appendChild(j)}}catch(i){console.error("vite-plugin-css-injected-by-js",i)}})();const W='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19V19C9.13623 19 8.20435 19 7.46927 18.6955C6.48915 18.2895 5.71046 17.5108 5.30448 16.5307C5 15.7956 5 14.8638 5 13V12C5 9.19108 5 7.78661 5.67412 6.77772C5.96596 6.34096 6.34096 5.96596 6.77772 5.67412C7.78661 5 9.19108 5 12 5H13.5C14.8956 5 15.5933 5 16.1611 5.17224C17.4395 5.56004 18.44 6.56046 18.8278 7.83886C19 8.40666 19 9.10444 19 10.5V10.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.5 17.5L17.5 6.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 10.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.9919 19H11.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13L13 5"/></svg>',z='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 9.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 5H14.5096"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.625 5H15C17.2091 5 19 6.79086 19 9V9.375"/><path stroke="currentColor" stroke-width="2" d="M9.375 5L9 5C6.79086 5 5 6.79086 5 9V9.375"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 5H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 9.5H5.00957"/><path stroke="currentColor" stroke-width="2" d="M9.375 19H9C6.79086 19 5 17.2091 5 15V14.625"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 19H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 14.55H5.00957"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/></svg>',I='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.13968 15.32L8.69058 11.5661C9.02934 11.2036 9.48873 11 9.96774 11C10.4467 11 10.9061 11.2036 11.2449 11.5661L15.3871 16M13.5806 14.0664L15.0132 12.533C15.3519 12.1705 15.8113 11.9668 16.2903 11.9668C16.7693 11.9668 17.2287 12.1705 17.5675 12.533L18.841 13.9634"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.7778 9.33331H13.7867"/></svg>',K='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>',Q='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';function F(j,i=null,a={}){const s=document.createElement(j);Array.isArray(i)?s.classList.add(...i):i!==null&&s.classList.add(i);for(const t in a)a.hasOwnProperty(t)&&(s[t]=a[t]);return s}var O=(j=>(j.Empty="empty",j.Uploading="uploading",j.Filled="filled",j))(O||{});class Y{constructor({api:i,config:a,onSelectFile:s,readOnly:t}){this.api=i,this.config=a,this.onSelectFile=s,this.readOnly=t,this.nodes={wrapper:F("div",[this.CSS.baseClass,this.CSS.wrapper]),imageContainer:F("div",[this.CSS.imageContainer]),fileButton:this.createFileButton(),imageEl:void 0,imagePreloader:F("div",this.CSS.imagePreloader),caption:F("div",[this.CSS.input,this.CSS.caption],{contentEditable:!this.readOnly})},this.nodes.caption.dataset.placeholder=this.config.captionPlaceholder,this.nodes.imageContainer.appendChild(this.nodes.imagePreloader),this.nodes.wrapper.appendChild(this.nodes.imageContainer),this.nodes.wrapper.appendChild(this.nodes.caption),this.nodes.wrapper.appendChild(this.nodes.fileButton)}applyTune(i,a){this.nodes.wrapper.classList.toggle(`${this.CSS.wrapper}--${i}`,a)}render(i){return i.file===void 0||Object.keys(i.file).length===0?this.toggleStatus("empty"):this.toggleStatus("uploading"),this.nodes.wrapper}showPreloader(i){this.nodes.imagePreloader.style.backgroundImage=`url(${i})`,this.toggleStatus("uploading")}hidePreloader(){this.nodes.imagePreloader.style.backgroundImage="",this.toggleStatus("empty")}fillImage(i){const a=/\.mp4$/.test(i)?"VIDEO":"IMG",s={src:i};let t="load";a==="VIDEO"&&(s.autoplay=!0,s.loop=!0,s.muted=!0,s.playsinline=!0,t="loadeddata"),this.nodes.imageEl=F(a,this.CSS.imageEl,s),this.nodes.imageEl.addEventListener(t,()=>{this.toggleStatus("filled"),this.nodes.imagePreloader!==void 0&&(this.nodes.imagePreloader.style.backgroundImage="")}),this.nodes.imageContainer.appendChild(this.nodes.imageEl)}fillCaption(i){this.nodes.caption!==void 0&&(this.nodes.caption.innerHTML=i)}get CSS(){return{baseClass:this.api.styles.block,loading:this.api.styles.loader,input:this.api.styles.input,button:this.api.styles.button,wrapper:"image-tool",imageContainer:"image-tool__image",imagePreloader:"image-tool__image-preloader",imageEl:"image-tool__image-picture",caption:"image-tool__caption"}}createFileButton(){const i=F("div",[this.CSS.button]);return i.innerHTML=this.config.buttonContent??`${I} ${this.api.i18n.t("Select an Image")}`,i.addEventListener("click",()=>{this.onSelectFile()}),i}toggleStatus(i){for(const a in O)Object.prototype.hasOwnProperty.call(O,a)&&this.nodes.wrapper.classList.toggle(`${this.CSS.wrapper}--${O[a]}`,i===O[a])}}function Z(j){return j&&j.__esModule&&Object.prototype.hasOwnProperty.call(j,"default")?j.default:j}var R={exports:{}};(function(j,i){(function(a,s){j.exports=s()})(window,function(){return function(a){var s={};function t(n){if(s[n])return s[n].exports;var r=s[n]={i:n,l:!1,exports:{}};return a[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=a,t.c=s,t.d=function(n,r,d){t.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:d})},t.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,r){if(1&r&&(n=t(n)),8&r||4&r&&typeof n=="object"&&n&&n.__esModule)return n;var d=Object.create(null);if(t.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:n}),2&r&&typeof n!="string")for(var w in n)t.d(d,w,(function(l){return n[l]}).bind(null,w));return d},t.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(r,"a",r),r},t.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},t.p="",t(t.s=3)}([function(a,s){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch{typeof window=="object"&&(t=window)}a.exports=t},function(a,s,t){(function(n){var r=t(2),d=setTimeout;function w(){}function l(o){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if(typeof o!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],e(o,this)}function f(o,c){for(;o._state===3;)o=o._value;o._state!==0?(o._handled=!0,l._immediateFn(function(){var u=o._state===1?c.onFulfilled:c.onRejected;if(u!==null){var b;try{b=u(o._value)}catch(y){return void k(c.promise,y)}p(c.promise,b)}else(o._state===1?p:k)(c.promise,o._value)})):o._deferreds.push(c)}function p(o,c){try{if(c===o)throw new TypeError("A promise cannot be resolved with itself.");if(c&&(typeof c=="object"||typeof c=="function")){var u=c.then;if(c instanceof l)return o._state=3,o._value=c,void g(o);if(typeof u=="function")return void e((b=u,y=c,function(){b.apply(y,arguments)}),o)}o._state=1,o._value=c,g(o)}catch(m){k(o,m)}var b,y}function k(o,c){o._state=2,o._value=c,g(o)}function g(o){o._state===2&&o._deferreds.length===0&&l._immediateFn(function(){o._handled||l._unhandledRejectionFn(o._value)});for(var c=0,u=o._deferreds.length;c<u;c++)f(o,o._deferreds[c]);o._deferreds=null}function x(o,c,u){this.onFulfilled=typeof o=="function"?o:null,this.onRejected=typeof c=="function"?c:null,this.promise=u}function e(o,c){var u=!1;try{o(function(b){u||(u=!0,p(c,b))},function(b){u||(u=!0,k(c,b))})}catch(b){if(u)return;u=!0,k(c,b)}}l.prototype.catch=function(o){return this.then(null,o)},l.prototype.then=function(o,c){var u=new this.constructor(w);return f(this,new x(o,c,u)),u},l.prototype.finally=r.a,l.all=function(o){return new l(function(c,u){if(!o||o.length===void 0)throw new TypeError("Promise.all accepts an array");var b=Array.prototype.slice.call(o);if(b.length===0)return c([]);var y=b.length;function m(_,C){try{if(C&&(typeof C=="object"||typeof C=="function")){var E=C.then;if(typeof E=="function")return void E.call(C,function(S){m(_,S)},u)}b[_]=C,--y==0&&c(b)}catch(S){u(S)}}for(var h=0;h<b.length;h++)m(h,b[h])})},l.resolve=function(o){return o&&typeof o=="object"&&o.constructor===l?o:new l(function(c){c(o)})},l.reject=function(o){return new l(function(c,u){u(o)})},l.race=function(o){return new l(function(c,u){for(var b=0,y=o.length;b<y;b++)o[b].then(c,u)})},l._immediateFn=typeof n=="function"&&function(o){n(o)}||function(o){d(o,0)},l._unhandledRejectionFn=function(o){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",o)},s.a=l}).call(this,t(5).setImmediate)},function(a,s,t){s.a=function(n){var r=this.constructor;return this.then(function(d){return r.resolve(n()).then(function(){return d})},function(d){return r.resolve(n()).then(function(){return r.reject(d)})})}},function(a,s,t){function n(e){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(e)}t(4);var r,d,w,l,f,p,k,g=t(8),x=(d=function(e){return new Promise(function(o,c){e=l(e),(e=f(e)).beforeSend&&e.beforeSend();var u=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");u.open(e.method,e.url),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(e.headers).forEach(function(y){var m=e.headers[y];u.setRequestHeader(y,m)});var b=e.ratio;u.upload.addEventListener("progress",function(y){var m=Math.round(y.loaded/y.total*100),h=Math.ceil(m*b/100);e.progress(Math.min(h,100))},!1),u.addEventListener("progress",function(y){var m=Math.round(y.loaded/y.total*100),h=Math.ceil(m*(100-b)/100)+b;e.progress(Math.min(h,100))},!1),u.onreadystatechange=function(){if(u.readyState===4){var y=u.response;try{y=JSON.parse(y)}catch{}var m=g.parseHeaders(u.getAllResponseHeaders()),h={body:y,code:u.status,headers:m};k(u.status)?o(h):c(h)}},u.send(e.data)})},w=function(e){return e.method="POST",d(e)},l=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(e.url&&typeof e.url!="string")throw new Error("Url must be a string");if(e.url=e.url||"",e.method&&typeof e.method!="string")throw new Error("`method` must be a string or null");if(e.method=e.method?e.method.toUpperCase():"GET",e.headers&&n(e.headers)!=="object")throw new Error("`headers` must be an object or null");if(e.headers=e.headers||{},e.type&&(typeof e.type!="string"||!Object.values(r).includes(e.type)))throw new Error("`type` must be taken from module's «contentType» library");if(e.progress&&typeof e.progress!="function")throw new Error("`progress` must be a function or null");if(e.progress=e.progress||function(o){},e.beforeSend=e.beforeSend||function(o){},e.ratio&&typeof e.ratio!="number")throw new Error("`ratio` must be a number");if(e.ratio<0||e.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(e.ratio=e.ratio||90,e.accept&&typeof e.accept!="string")throw new Error("`accept` must be a string with a list of allowed mime-types");if(e.accept=e.accept||"*/*",e.multiple&&typeof e.multiple!="boolean")throw new Error("`multiple` must be a true or false");if(e.multiple=e.multiple||!1,e.fieldName&&typeof e.fieldName!="string")throw new Error("`fieldName` must be a string");return e.fieldName=e.fieldName||"files",e},f=function(e){switch(e.method){case"GET":var o=p(e.data,r.URLENCODED);delete e.data,e.url=/\?/.test(e.url)?e.url+"&"+o:e.url+"?"+o;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var c=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).type||r.JSON}(e);(g.isFormData(e.data)||g.isFormElement(e.data))&&(c=r.FORM),e.data=p(e.data,c),c!==x.contentType.FORM&&(e.headers["content-type"]=c)}return e},p=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case r.URLENCODED:return g.urlEncode(e);case r.JSON:return g.jsonEncode(e);case r.FORM:return g.formEncode(e);default:return e}},k=function(e){return e>=200&&e<300},{contentType:r={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:d,get:function(e){return e.method="GET",d(e)},post:w,transport:function(e){return e=l(e),g.selectFiles(e).then(function(o){for(var c=new FormData,u=0;u<o.length;u++)c.append(e.fieldName,o[u],o[u].name);g.isObject(e.data)&&Object.keys(e.data).forEach(function(y){var m=e.data[y];c.append(y,m)});var b=e.beforeSend;return e.beforeSend=function(){return b(o)},e.data=c,w(e)})},selectFiles:function(e){return delete(e=l(e)).beforeSend,g.selectFiles(e)}});a.exports=x},function(a,s,t){t.r(s);var n=t(1);window.Promise=window.Promise||n.a},function(a,s,t){(function(n){var r=n!==void 0&&n||typeof self<"u"&&self||window,d=Function.prototype.apply;function w(l,f){this._id=l,this._clearFn=f}s.setTimeout=function(){return new w(d.call(setTimeout,r,arguments),clearTimeout)},s.setInterval=function(){return new w(d.call(setInterval,r,arguments),clearInterval)},s.clearTimeout=s.clearInterval=function(l){l&&l.close()},w.prototype.unref=w.prototype.ref=function(){},w.prototype.close=function(){this._clearFn.call(r,this._id)},s.enroll=function(l,f){clearTimeout(l._idleTimeoutId),l._idleTimeout=f},s.unenroll=function(l){clearTimeout(l._idleTimeoutId),l._idleTimeout=-1},s._unrefActive=s.active=function(l){clearTimeout(l._idleTimeoutId);var f=l._idleTimeout;f>=0&&(l._idleTimeoutId=setTimeout(function(){l._onTimeout&&l._onTimeout()},f))},t(6),s.setImmediate=typeof self<"u"&&self.setImmediate||n!==void 0&&n.setImmediate||this&&this.setImmediate,s.clearImmediate=typeof self<"u"&&self.clearImmediate||n!==void 0&&n.clearImmediate||this&&this.clearImmediate}).call(this,t(0))},function(a,s,t){(function(n,r){(function(d,w){if(!d.setImmediate){var l,f,p,k,g,x=1,e={},o=!1,c=d.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(d);u=u&&u.setTimeout?u:d,{}.toString.call(d.process)==="[object process]"?l=function(m){r.nextTick(function(){y(m)})}:function(){if(d.postMessage&&!d.importScripts){var m=!0,h=d.onmessage;return d.onmessage=function(){m=!1},d.postMessage("","*"),d.onmessage=h,m}}()?(k="setImmediate$"+Math.random()+"$",g=function(m){m.source===d&&typeof m.data=="string"&&m.data.indexOf(k)===0&&y(+m.data.slice(k.length))},d.addEventListener?d.addEventListener("message",g,!1):d.attachEvent("onmessage",g),l=function(m){d.postMessage(k+m,"*")}):d.MessageChannel?((p=new MessageChannel).port1.onmessage=function(m){y(m.data)},l=function(m){p.port2.postMessage(m)}):c&&"onreadystatechange"in c.createElement("script")?(f=c.documentElement,l=function(m){var h=c.createElement("script");h.onreadystatechange=function(){y(m),h.onreadystatechange=null,f.removeChild(h),h=null},f.appendChild(h)}):l=function(m){setTimeout(y,0,m)},u.setImmediate=function(m){typeof m!="function"&&(m=new Function(""+m));for(var h=new Array(arguments.length-1),_=0;_<h.length;_++)h[_]=arguments[_+1];var C={callback:m,args:h};return e[x]=C,l(x),x++},u.clearImmediate=b}function b(m){delete e[m]}function y(m){if(o)setTimeout(y,0,m);else{var h=e[m];if(h){o=!0;try{(function(_){var C=_.callback,E=_.args;switch(E.length){case 0:C();break;case 1:C(E[0]);break;case 2:C(E[0],E[1]);break;case 3:C(E[0],E[1],E[2]);break;default:C.apply(w,E)}})(h)}finally{b(m),o=!1}}}}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,t(0),t(7))},function(a,s){var t,n,r=a.exports={};function d(){throw new Error("setTimeout has not been defined")}function w(){throw new Error("clearTimeout has not been defined")}function l(u){if(t===setTimeout)return setTimeout(u,0);if((t===d||!t)&&setTimeout)return t=setTimeout,setTimeout(u,0);try{return t(u,0)}catch{try{return t.call(null,u,0)}catch{return t.call(this,u,0)}}}(function(){try{t=typeof setTimeout=="function"?setTimeout:d}catch{t=d}try{n=typeof clearTimeout=="function"?clearTimeout:w}catch{n=w}})();var f,p=[],k=!1,g=-1;function x(){k&&f&&(k=!1,f.length?p=f.concat(p):g=-1,p.length&&e())}function e(){if(!k){var u=l(x);k=!0;for(var b=p.length;b;){for(f=p,p=[];++g<b;)f&&f[g].run();g=-1,b=p.length}f=null,k=!1,function(y){if(n===clearTimeout)return clearTimeout(y);if((n===w||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(y);try{n(y)}catch{try{return n.call(null,y)}catch{return n.call(this,y)}}}(u)}}function o(u,b){this.fun=u,this.array=b}function c(){}r.nextTick=function(u){var b=new Array(arguments.length-1);if(arguments.length>1)for(var y=1;y<arguments.length;y++)b[y-1]=arguments[y];p.push(new o(u,b)),p.length!==1||k||l(e)},o.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=c,r.addListener=c,r.once=c,r.off=c,r.removeListener=c,r.removeAllListeners=c,r.emit=c,r.prependListener=c,r.prependOnceListener=c,r.listeners=function(u){return[]},r.binding=function(u){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(u){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(a,s,t){function n(d,w){for(var l=0;l<w.length;l++){var f=w[l];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(d,f.key,f)}}var r=t(9);a.exports=function(){function d(){(function(p,k){if(!(p instanceof k))throw new TypeError("Cannot call a class as a function")})(this,d)}var w,l,f;return w=d,f=[{key:"urlEncode",value:function(p){return r(p)}},{key:"jsonEncode",value:function(p){return JSON.stringify(p)}},{key:"formEncode",value:function(p){if(this.isFormData(p))return p;if(this.isFormElement(p))return new FormData(p);if(this.isObject(p)){var k=new FormData;return Object.keys(p).forEach(function(g){var x=p[g];k.append(g,x)}),k}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(p){return Object.prototype.toString.call(p)==="[object Object]"}},{key:"isFormData",value:function(p){return p instanceof FormData}},{key:"isFormElement",value:function(p){return p instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(k,g){var x=document.createElement("INPUT");x.type="file",p.multiple&&x.setAttribute("multiple","multiple"),p.accept&&x.setAttribute("accept",p.accept),x.style.display="none",document.body.appendChild(x),x.addEventListener("change",function(e){var o=e.target.files;k(o),document.body.removeChild(x)},!1),x.click()})}},{key:"parseHeaders",value:function(p){var k=p.trim().split(/[\r\n]+/),g={};return k.forEach(function(x){var e=x.split(": "),o=e.shift(),c=e.join(": ");o&&(g[o]=c)}),g}}],(l=null)&&n(w.prototype,l),f&&n(w,f),d}()},function(a,s){var t=function(r){return encodeURIComponent(r).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},n=function(r,d,w,l){return d=d||null,w=w||"&",l=l||null,r?function(f){for(var p=new Array,k=0;k<f.length;k++)f[k]&&p.push(f[k]);return p}(Object.keys(r).map(function(f){var p,k,g=f;if(l&&(g=l+"["+g+"]"),typeof r[f]=="object"&&r[f]!==null)p=n(r[f],null,w,g);else{d&&(k=g,g=!isNaN(parseFloat(k))&&isFinite(k)?d+Number(g):g);var x=r[f];x=(x=(x=(x=x===!0?"1":x)===!1?"0":x)===0?"0":x)||"",p=t(g)+"="+t(x)}return p})).join(w).replace(/[!'()*]/g,""):""};a.exports=n}])})})(R);var ee=R.exports;const M=Z(ee);function L(j){return j!==void 0&&typeof j.then=="function"}class te{constructor({config:i,onUpload:a,onError:s}){this.config=i,this.onUpload=a,this.onError=s}uploadSelectedFile({onPreview:i}){const a=function(t){const n=new FileReader;n.readAsDataURL(t),n.onload=r=>{i(r.target.result)}};let s;if(this.config.uploader&&typeof this.config.uploader.uploadByFile=="function"){const t=this.config.uploader.uploadByFile;s=M.selectFiles({accept:this.config.types??"image/*"}).then(n=>{a(n[0]);const r=t(n[0]);return L(r)||console.warn("Custom uploader method uploadByFile should return a Promise"),r})}else s=M.transport({url:this.config.endpoints.byFile,data:this.config.additionalRequestData,accept:this.config.types??"image/*",headers:this.config.additionalRequestHeaders,beforeSend:t=>{a(t[0])},fieldName:this.config.field??"image"}).then(t=>t.body);s.then(t=>{this.onUpload(t)}).catch(t=>{this.onError(t)})}uploadByUrl(i){let a;this.config.uploader&&typeof this.config.uploader.uploadByUrl=="function"?(a=this.config.uploader.uploadByUrl(i),L(a)||console.warn("Custom uploader method uploadByUrl should return a Promise")):a=M.post({url:this.config.endpoints.byUrl,data:Object.assign({url:i},this.config.additionalRequestData),type:M.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(s=>s.body),a.then(s=>{this.onUpload(s)}).catch(s=>{this.onError(s)})}uploadByFile(i,{onPreview:a}){const s=new FileReader;s.readAsDataURL(i),s.onload=n=>{a(n.target.result)};let t;if(this.config.uploader&&typeof this.config.uploader.uploadByFile=="function")t=this.config.uploader.uploadByFile(i),L(t)||console.warn("Custom uploader method uploadByFile should return a Promise");else{const n=new FormData;n.append(this.config.field??"image",i),this.config.additionalRequestData&&Object.keys(this.config.additionalRequestData).length&&Object.entries(this.config.additionalRequestData).forEach(([r,d])=>{n.append(r,d)}),t=M.post({url:this.config.endpoints.byFile,data:n,type:M.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(r=>r.body)}t.then(n=>{this.onUpload(n)}).catch(n=>{this.onError(n)})}}/**
 * Image Tool for the Editor.js
 * @author CodeX <team@codex.so>
 * @license MIT
 * @see {@link https://github.com/editor-js/image}
 *
 * To developers.
 * To simplify Tool structure, we split it to 4 parts:
 *  1) index.ts — main Tool's interface, public API and methods for working with data
 *  2) uploader.ts — module that has methods for sending files via AJAX: from device, by URL or File pasting
 *  3) ui.ts — module for UI manipulations: render, showing preloader, etc
 *
 * For debug purposes there is a testing server
 * that can save uploaded files and return a Response {@link UploadResponseFormat}
 *
 *       $ node dev/server.js
 *
 * It will expose 8008 port, so you can pass http://localhost:8008 with the Tools config:
 *
 * image: {
 *   class: ImageTool,
 *   config: {
 *     endpoints: {
 *       byFile: 'http://localhost:8008/uploadFile',
 *       byUrl: 'http://localhost:8008/fetchUrl',
 *     }
 *   },
 * },
 */class P{constructor({data:i,config:a,api:s,readOnly:t,block:n}){this.api=s,this.block=n,this.config={endpoints:a.endpoints,additionalRequestData:a.additionalRequestData,additionalRequestHeaders:a.additionalRequestHeaders,field:a.field,types:a.types,captionPlaceholder:this.api.i18n.t(a.captionPlaceholder??"Caption"),buttonContent:a.buttonContent,uploader:a.uploader,actions:a.actions,features:a.features||{}},this.uploader=new te({config:this.config,onUpload:r=>this.onUpload(r),onError:r=>this.uploadingFailed(r)}),this.ui=new Y({api:s,config:this.config,onSelectFile:()=>{this.uploader.uploadSelectedFile({onPreview:r=>{this.ui.showPreloader(r)}})},readOnly:t}),this._data={caption:"",withBorder:!1,withBackground:!1,stretched:!1,file:{url:""}},this.data=i}static get isReadOnlySupported(){return!0}static get toolbox(){return{icon:I,title:"Image"}}static get tunes(){return[{name:"withBorder",icon:z,title:"With border",toggle:!0},{name:"stretched",icon:K,title:"Stretch image",toggle:!0},{name:"withBackground",icon:W,title:"With background",toggle:!0}]}render(){var i,a,s;return(((i=this.config.features)==null?void 0:i.caption)===!0||((a=this.config.features)==null?void 0:a.caption)===void 0||((s=this.config.features)==null?void 0:s.caption)==="optional"&&this.data.caption)&&this.ui.applyTune("caption",!0),this.ui.render(this.data)}validate(i){return!!i.file.url}save(){const i=this.ui.nodes.caption;return this._data.caption=i.innerHTML,this.data}renderSettings(){var i;const a=P.tunes.concat(this.config.actions||[]),s={border:"withBorder",background:"withBackground",stretch:"stretched",caption:"caption"};return((i=this.config.features)==null?void 0:i.caption)==="optional"&&a.push({name:"caption",icon:Q,title:"With caption",toggle:!0}),a.filter(t=>{var n,r;const d=Object.keys(s).find(w=>s[w]===t.name);return d==="caption"?((n=this.config.features)==null?void 0:n.caption)!==!1:d==null||((r=this.config.features)==null?void 0:r[d])!==!1}).map(t=>({icon:t.icon,label:this.api.i18n.t(t.title),name:t.name,toggle:t.toggle,isActive:this.data[t.name],onActivate:()=>{if(typeof t.action=="function"){t.action(t.name);return}this.tuneToggled(t.name)}}))}appendCallback(){this.ui.nodes.fileButton.click()}static get pasteConfig(){return{tags:[{img:{src:!0}}],patterns:{image:/https?:\/\/\S+\.(gif|jpe?g|tiff|png|svg|webp)(\?[a-z0-9=]*)?$/i},files:{mimeTypes:["image/*"]}}}async onPaste(i){switch(i.type){case"tag":{const a=i.detail.data;if(/^blob:/.test(a.src)){const s=await(await fetch(a.src)).blob();this.uploadFile(s);break}this.uploadUrl(a.src);break}case"pattern":{const a=i.detail.data;this.uploadUrl(a);break}case"file":{const a=i.detail.file;this.uploadFile(a);break}}}set data(i){this.image=i.file,this._data.caption=i.caption||"",this.ui.fillCaption(this._data.caption),P.tunes.forEach(({name:a})=>{const s=typeof i[a]<"u"?i[a]===!0||i[a]==="true":!1;this.setTune(a,s)})}get data(){return this._data}set image(i){this._data.file=i||{url:""},i&&i.url&&this.ui.fillImage(i.url)}onUpload(i){i.success&&i.file?this.image=i.file:this.uploadingFailed("incorrect response: "+JSON.stringify(i))}uploadingFailed(i){console.log("Image Tool: uploading failed because of",i),this.api.notifier.show({message:this.api.i18n.t("Couldn’t upload image. Please try another."),style:"error"}),this.ui.hidePreloader()}tuneToggled(i){this.setTune(i,!this._data[i]),i==="caption"&&!this._data[i]&&(this._data.caption="",this.ui.fillCaption(""))}setTune(i,a){this._data[i]=a,this.ui.applyTune(i,a),i==="stretched"&&Promise.resolve().then(()=>{this.block.stretched=a}).catch(s=>{console.error(s)})}uploadFile(i){this.uploader.uploadByFile(i,{onPreview:a=>{this.ui.showPreloader(a)}})}uploadUrl(i){this.ui.showPreloader(i),this.uploader.uploadByUrl(i)}}function pe({auth:j,categories:i,tags:a,csrf_token:s}){const{data:t,setData:n,post:r,processing:d,errors:w}=B({title:"",content:"",slug:"fewfew",categories:[],tags:[],featureImage:null,status:"draft"}),[l,f]=T.useState(""),[p,k]=T.useState(""),g=T.useRef(null),x=T.useRef(null),[e,o]=T.useState(""),c=()=>{g.current=new q({holder:"editorjs",tools:{header:A,list:V,embed:$,inlineCode:J,image:{class:P,config:{endpoints:{byFile:route("admin.blogs.tempImg"),byUrl:route("admin.blogs.tempImgUrl")},additionalRequestHeaders:{"X-CSRF-TOKEN":s}}}},onChange:async()=>{const h=await g.current.save(),_=G(h,l);f(_)},placeholder:"Start writing your blog here..."})};T.useEffect(()=>{n("content",l)},[l]),T.useEffect(()=>(c(),()=>{g.current&&(g.current.destroy(),g.current=null)}),[]);const u=async h=>{h.preventDefault(),r(route("admin.blogs.store"))},b=(h,_)=>{const{value:C,checked:E}=_.target;if(E){const S=t[h];n(h,[...S,C])}else{const S=t[h].filter(H=>H!==C);n(h,S)}},y=h=>{x.current.click()},m=h=>{const _=URL.createObjectURL(h.target.files[0]);n("featureImage",h.target.files[0]),o(h.target.files[0].name),k(_)};return v.jsxs(D,{user:j==null?void 0:j.user,children:[v.jsx(U,{title:"Write a New Blog"}),v.jsx("div",{className:"py-6 px-4 bg-gray-100",children:v.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-lg",children:[v.jsx("div",{className:"border-b pb-4 mb-6",children:v.jsx("h1",{className:"text-3xl font-semibold text-gray-800",children:"Write a New Blog"})}),v.jsxs("form",{onSubmit:u,children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("input",{type:"text",className:"w-full text-2xl font-semibold border-b-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Blog Title",value:t.title,onChange:h=>n("title",h.target.value)}),w.title&&v.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.title})]}),v.jsxs("div",{className:"mb-6",children:[v.jsx("div",{id:"editorjs",className:"border rounded-lg p-4 bg-gray-50 min-h-[300px]"}),w.content&&v.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.content})]}),v.jsxs("div",{className:"mb-6",children:[v.jsx(N,{value:"Slug",className:"mb-1 font-poppins font-semibold"}),v.jsx("input",{type:"text",className:"w-full text-lg border p-2 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"Slug (URL)",value:t.slug,onChange:h=>n("slug",h.target.value)}),w.slug&&v.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.slug})]}),v.jsxs("div",{className:"mb-6",children:[v.jsx(N,{value:"Categories",className:"mb-1 font-poppins font-semibold"}),v.jsx("div",{className:"flex flex-wrap gap-4 mt-2",children:i.map(h=>v.jsxs("label",{className:"flex items-center gap-2 text-gray-600",children:[v.jsx("input",{type:"checkbox",value:h.id,onChange:_=>b("categories",_),className:"text-blue-500 focus:ring-blue-500"}),v.jsx("span",{children:h.title})]},h.id))})]}),v.jsxs("div",{className:"mb-6",children:[v.jsx(N,{value:"Tags",className:"mb-1 font-poppins font-semibold"}),v.jsx("div",{className:"flex flex-wrap gap-4 mt-2",children:a.map(h=>v.jsxs("label",{className:"flex items-center gap-2 text-gray-600",children:[v.jsx("input",{type:"checkbox",value:h.id,onChange:_=>b("tags",_),className:"text-blue-500 focus:ring-blue-500"}),v.jsx("span",{children:h.title})]},h.id))})]}),v.jsx("div",{className:"mb-6",children:v.jsx("div",{className:"form-item mb-4",children:v.jsxs("div",{className:"featured-image",children:[v.jsx(N,{value:"Featured Image",className:"mb-1 font-poppins font-semibold"}),v.jsxs("div",{className:"categories-items border p-4 rounded-md",children:[v.jsx("img",{src:p}),v.jsx("input",{type:"file",name:"featureImage",hidden:!0,onChange:m,ref:x,value:""}),v.jsx("a",{className:"bg-transparent cursor-pointer",onClick:y,children:"Set Featured Image"}),v.jsx(X,{message:w.featureImage,className:"mt-2"})]})]})})}),v.jsx("div",{className:"mb-6",children:v.jsxs("select",{className:"w-full border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:t.status,onChange:h=>n("status",h.target.value),children:[v.jsx("option",{value:"draft",children:"Draft"}),v.jsx("option",{value:"publish",children:"Publish"})]})}),v.jsx("div",{className:"text-right",children:v.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-6 py-2 rounded-md hover:bg-blue-600 focus:outline-none",disabled:d,children:d?"Saving...":"Publish"})})]})]})})]})}export{pe as default};
