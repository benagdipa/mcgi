import{X,r as i,G as q,j as e,S as J,x as E}from"./app-B3yOM3BI.js";import{A as K,i as Q}from"./AuthenticatedLayout-DQuliis-.js";import{r as t}from"./index-BobkhLFH.js";import{M}from"./Modal-8J2hICze.js";import{I as m}from"./InputLabel-DhnBxFmH.js";import{T as k}from"./TextInput-BDEOmq-T.js";import{R as I}from"./index-LMeET_3T.js";import{I as p}from"./InputError-Iq2j2Zjh.js";import"./Dropdown-BAMrzMGk.js";import"./transition-DBIgsJT1.js";import"./index-BarBPuyi.js";import"./index-Bk49KplB.js";function re({auth:x,categories:b}){const{role:_,permissions:L}=X().props.auth,W=["SN","Category Title","Slug","Description","Status","Action"],N=b,[R,d]=i.useState(!1),[z,y]=i.useState(!1),[u,v]=i.useState(""),[B,C]=i.useState(""),[h,w]=i.useState(""),{data:n,setData:a,post:S,processing:F,errors:r,reset:T,delete:P}=q({title:"",slug:"",description:"",status:""}),G=s=>{s.preventDefault(),h==="_add"?S(route("admin.blogs.categories.store"),{preserveScroll:!0,onSuccess:()=>{T(),d(!1)}}):h==="_edit"&&S(route("admin.blogs.categories.update",u),{onSuccess:()=>{T(),d(!1)}})},A=(s,o=0)=>{if(o!==0&&v(o),s==="add")C("Add New"),w("_add");else if(s==="edit"){const f=b.filter(j=>j.id===o);a({...f[0]}),C("Edit"),w("_edit")}d(!0)},D=s=>{d(!1)},H=s=>{v(s),y(!0)},c=()=>{y(!1)},O=()=>{u&&P(route("admin.blogs.categories.delete",u),{onSuccess:()=>{c()}})};return e.jsxs(K,{user:x==null?void 0:x.user,children:[e.jsx(J,{title:"Categories"}),e.jsxs("div",{className:"content py-4 font-poppins",children:[e.jsxs("div",{className:"content-header md:px-6 px-4 flex justify-between items-center",children:[e.jsxs("div",{className:"left",children:[e.jsx("h1",{className:"font-semibold text-gray-800 text-3xl",children:"Categories"}),e.jsx("div",{className:"pt-2",children:e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(E,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(E,{href:route("admin.blogs.index"),children:"Blogs"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:"Categories"})]})})]}),e.jsx("div",{className:"right",children:e.jsx("button",{className:"bg-[#f5cd06] shadow-lg text-[#0f0f0f] md:px-5 md:py-3 py-2 px-3 rounded-md font-semibold text-lg font-poppins",onClick:()=>{A("add")},children:"Add New"})})]}),e.jsx("div",{className:"page-content pt-8",children:e.jsx(t.Card,{className:"h-full md:w-full w-11/12 mx-auto overflow-scroll rounded-none",children:e.jsxs("table",{className:"w-full min-w-max table-auto text-left",children:[e.jsx("thead",{children:e.jsx("tr",{children:W.map(s=>e.jsx("th",{className:"border-b border-blue-gray-100 bg-blue-gray-50 p-4",children:e.jsx(t.Typography,{className:"font-semibold text-lg leading-none opacity-70 font-poppins",children:s})},s))})}),e.jsx("tbody",{children:N.map(({id:s,title:o,slug:f,description:j,status:U},g)=>{const l=g===N.length-1?"p-4":"p-4 border-b border-blue-gray-50";return e.jsxs("tr",{children:[e.jsx("td",{className:l,children:e.jsx(t.Typography,{className:"font-medium font-poppins",children:g+1})}),e.jsx("td",{className:l,children:e.jsx(t.Typography,{className:"font-medium font-poppins",children:o})}),e.jsx("td",{className:l,children:e.jsx(t.Typography,{className:"font-medium font-poppins",children:f})}),e.jsx("td",{className:l,children:e.jsx(t.Typography,{className:"font-medium font-poppins",children:j})}),e.jsx("td",{className:l,children:e.jsx(t.Typography,{className:"font-medium font-poppins capitalize",children:U})}),e.jsx("td",{className:l,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-0 text-sm font-medium font-poppins",onClick:()=>{A("edit",s)},children:"Edit"}),Q(L,["delete_categories"],_)&&e.jsx("button",{className:"text-red-500 px-0 text-sm font-medium font-poppins",onClick:()=>{H(s)},children:"Delete"})]})})]},g)})})]})})})]}),e.jsx(M,{show:R,onClose:D,maxWidth:"2xl",children:e.jsxs("div",{className:"add-modal px-6 py-4",children:[e.jsxs("div",{className:"modal-header relative",children:[e.jsxs("h1",{className:"font-bold text-2xl font-poppins",children:[B," Category"]}),e.jsx("div",{className:"absolute -top-14 -right-14 text-white cursor-pointer",children:e.jsx(I,{strokeWidth:1.5,size:38,onClick:D})})]}),e.jsx("div",{className:"modal-content pt-6",children:e.jsxs("form",{onSubmit:G,children:[e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(m,{value:"Title",className:"mb-1 font-poppins font-semibold"}),e.jsx(k,{id:"title",type:"text",name:"title",className:"w-full rounded-md font-poppins",placeholder:"Category Title...",onChange:s=>a("title",s.target.value),value:n.title}),e.jsx(p,{message:r.title,className:"mt-2"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(m,{value:"Slug",className:"mb-1 font-poppins font-semibold"}),e.jsx(k,{id:"slug",type:"text",name:"slug",className:"w-full rounded-md font-poppins",placeholder:"Category Slug...",onChange:s=>a("slug",s.target.value),value:n.slug}),e.jsx(p,{message:r.slug,className:"mt-2"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(m,{value:"Description",className:"mb-1 font-poppins font-semibold"}),e.jsx("textarea",{id:"description",name:"description",rows:"10",className:"w-full border-gray-300 rounded-md font-poppins focus:border-yellow-500 focus:ring-0",placeholder:"Description...",onChange:s=>a("description",s.target.value),value:n.description}),e.jsx(p,{message:r.description,className:"mt-2"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(m,{value:"Status",className:"mb-1 font-poppins font-semibold"}),e.jsxs("select",{name:"status",id:"status",className:"w-full border-gray-300 rounded-md font-poppins focus:border-yellow-500 focus:ring-0",onChange:s=>a("status",s.target.value),value:n.status,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"})]}),e.jsx(p,{message:r.status,className:"mt-2"})]}),e.jsx("input",{type:"hidden",name:"type",value:h}),e.jsx("div",{className:"font-item mb-4 text-right",children:e.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-poppins rounded-sm font-bold",disabled:F,children:"Submit"})})]})})]})}),e.jsx(M,{show:z,onClose:c,maxWidth:"xl",children:e.jsxs("div",{className:"delete-modal px-6 py-8 relative font-poppins",children:[e.jsx("h1",{className:"font-bold text-3xl text-center",children:"Are you sure ?"}),e.jsx("div",{className:"absolute -top-8 -right-8 text-white cursor-pointer",children:e.jsx(I,{strokeWidth:1.5,size:38,onClick:c})}),e.jsxs("div",{className:"flex justify-center gap-2 pt-6",children:[e.jsx("button",{className:"bg-red-500 text-white px-4 py-3 font-semibold rounded",onClick:c,children:"Cancel"}),e.jsx("button",{className:"bg-blue-500 text-white px-4 py-3 font-semibold rounded",onClick:O,children:"Confirm"})]})]})})]})}export{re as default};
