import{q as ae,W as te,r as t,j as e,a as le,d as U,y as oe,b as ne}from"./app-BhZLC25x.js";import{A as re,i as de}from"./AuthenticatedLayout-Buv8zwSy.js";import{r}from"./index-B4-GeKVY.js";import{M as P}from"./Modal-ZIMcOi8e.js";import{I as d}from"./InputLabel-D1IpANmR.js";import{I as i}from"./InputError-Cjc2oAMi.js";import{T as p}from"./TextInput-CJs1kpZr.js";import{I as R}from"./IconX-F45OlE_I.js";import"./Dropdown--TJlNfio.js";import"./transition-CcuGmUTa.js";import"./index-AikwbH8i.js";function we({auth:b,users_list:S,locale:h,roles:v}){const{role:W,permissions:$}=ae().props.auth,q=["SN","First Name","Last Name","Email","Phone","Locale","Actions"],{data:l,setData:o,post:E,processing:z,errors:n,reset:T,delete:ie}=te({first_name:"",last_name:"",email:"",phone:"",password:"",password_confirmation:"",local:"",role:""}),[B,f]=t.useState(!1),[H,A]=t.useState(""),[y,L]=t.useState(""),[w,M]=t.useState(""),[O,I]=t.useState(!1),[u,X]=t.useState(""),[j,G]=t.useState(""),[g,J]=t.useState(""),[x,_]=t.useState([]);t.useEffect(()=>{_(S)},[]);const K=s=>{if(s){const a=h.filter(c=>c.id===parseInt(s));if(a.length)return a[0].title}},k=(s,a=0)=>{if(a!==0&&M(a),s==="add")A("Add New"),L("_add");else if(s==="edit"){const c=x.filter(C=>C.id===a);o({...c[0],role:c[0].roles[0]?c[0].roles[0].name:"guest"}),A("Edit"),L("_edit")}f(!0)},D=()=>{f(!1)},Q=s=>{s.preventDefault(),y==="_add"?E(route("admin.users.store"),{preserveScroll:!0,onSuccess:()=>{T(),f(!1)}}):y==="_edit"&&E(route("admin.users.update",w),{onSuccess:()=>{T(),f(!1)}})},V=s=>{M(s),I(!0)},N=()=>{I(!1)},Y=()=>{w&&oe.delete(route("admin.users.delete",w),{onSuccess:()=>{N()}})},Z=async()=>{if(u.length>=3||j||g){const s=await ne.post(route("admin.search.user"),{search_query:u,search_locale:j,search_role:g});s!=null&&s.data&&s!=null&&s.data&&_(s.data)}else _(S)};return t.useEffect(()=>{setTimeout(()=>{Z()},500)},[u,j,g]),e.jsxs(re,{user:b==null?void 0:b.user,children:[e.jsx(le,{title:"Users"}),e.jsxs("div",{className:"content py-4 font-poppins",children:[e.jsxs("div",{className:"content-header px-6 flex justify-between items-center",children:[e.jsxs("div",{className:"left",children:[e.jsx("h1",{className:"font-semibold text-gray-800 text-3xl",children:"Users"}),e.jsx("div",{className:"pt-2",children:e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(U,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(U,{href:route("admin.users.index"),children:"Users"})})]})})]}),e.jsx("div",{className:"right",children:e.jsx("button",{className:"bg-[#f5cd06] shadow-lg text-[#0f0f0f] px-5 py-3 rounded-md font-semibold text-lg font-poppins",onClick:()=>{k("add")},children:"Add New"})})]}),e.jsxs("div",{className:"flex justify-end pr-6 pt-4 gap-2",children:[e.jsx(p,{type:"text",placeholder:"Search...",className:"rounded border-gray-400/80 w-1/4 focus:ring-0 ring-0",value:u,onChange:s=>{X(s.target.value)}}),e.jsxs("select",{className:"border-gray-300 focus:border-yellow-500 focus:ring-0 rounded-md shadow-sm",value:j,onChange:s=>G(s.target.value),children:[e.jsx("option",{value:"",children:"Select Locale"}),h.map(({id:s,title:a})=>e.jsx("option",{value:s,children:a},s))]}),e.jsxs("select",{className:"border-gray-300 focus:border-yellow-500 focus:ring-0 rounded-md shadow-sm",value:g,onChange:s=>J(s.target.value),children:[e.jsx("option",{value:"",children:"Select Role"}),v.map(({id:s,name:a})=>e.jsx("option",{value:a,children:a},s))]})]}),e.jsx("div",{className:"page-content pt-4",children:e.jsxs(r.Card,{className:"h-full w-full overflow-scroll rounded-none font-poppins",children:[e.jsxs("table",{className:"w-full min-w-max table-auto text-left font-poppins",children:[e.jsx("thead",{children:e.jsx("tr",{children:q.map(s=>e.jsx("th",{className:"border-b border-blue-gray-100 bg-blue-gray-50 p-4",children:e.jsx(r.Typography,{className:"font-semibold text-lg leading-none opacity-70 font-poppins",children:s})},s))})}),e.jsx("tbody",{children:x.map(({id:s,first_name:a,last_name:c,email:C,local:ee,phone:se,roles:ce},F)=>{const m=F===x.length-1?"p-4":"p-4 border-b border-blue-gray-50";return e.jsxs("tr",{children:[e.jsx("td",{className:m,children:e.jsx(r.Typography,{className:"font-medium font-poppins",children:`${F+1}`})}),e.jsx("td",{className:m,children:e.jsx(r.Typography,{className:"font-medium font-poppins",children:`${a}`})}),e.jsx("td",{className:m,children:e.jsx(r.Typography,{className:"font-medium font-poppins",children:`${c}`})}),e.jsx("td",{className:m,children:e.jsx(r.Typography,{className:"font-medium font-poppins",children:C})}),e.jsx("td",{className:m,children:e.jsx(r.Typography,{className:"font-medium font-poppins",children:se})}),e.jsx("td",{className:m,children:e.jsx(r.Typography,{className:"font-medium font-poppins",children:K(ee)})}),e.jsx("td",{className:m,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-0 text-sm font-medium font-poppins",onClick:()=>{k("edit",s)},children:"Edit"}),de($,["delete_users"],W)&&e.jsx("button",{className:"text-red-500 px-0 text-sm font-medium font-poppins",onClick:()=>{V(s)},children:"Delete"})]})})]},s)})})]}),(x==null?void 0:x.length)===0&&e.jsx("p",{className:"font-medium font-poppins text-center py-3 w-full",children:"No data found"})]})})]}),e.jsx(P,{show:B,onClose:D,maxWidth:"2xl",children:e.jsxs("div",{className:"delete-modal px-6 py-8 relative font-poppins",children:[e.jsxs("h1",{className:"font-bold text-2xl font-poppins",children:[H," User"]}),e.jsx("div",{className:"absolute -top-8 -right-8 text-white cursor-pointer",children:e.jsx(R,{strokeWidth:1.5,size:38,onClick:D})}),e.jsx("div",{className:"modal-content pt-6",children:e.jsxs("form",{onSubmit:Q,children:[e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{value:"First Name",className:"mb-1 font-poppins font-semibold"}),e.jsx(p,{id:"first_name",type:"text",name:"first_name",className:"w-full rounded-md font-poppins",placeholder:"First Name...",onChange:s=>o("first_name",s.target.value),value:l.first_name}),e.jsx(i,{message:n.first_name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{value:"Last Name",className:"mb-1 font-poppins font-semibold"}),e.jsx(p,{id:"last_name",type:"text",name:"last_name",className:"w-full rounded-md font-poppins",placeholder:"Last Name...",onChange:s=>o("last_name",s.target.value),value:l.last_name}),e.jsx(i,{message:n.last_name,className:"mt-2"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{value:"Email Address",className:"mb-1 font-poppins font-semibold"}),e.jsx(p,{id:"email",type:"email",name:"email",className:"w-full rounded-md font-poppins",placeholder:"Email Address...",onChange:s=>o("email",s.target.value),value:l.email}),e.jsx(i,{message:n.email,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{value:"Phone Number",className:"mb-1 font-poppins font-semibold"}),e.jsx(p,{id:"phone",type:"text",name:"phone",className:"w-full rounded-md font-poppins",placeholder:"Last Name...",onChange:s=>o("phone",s.target.value),value:l.phone}),e.jsx(i,{message:n.phone,className:"mt-2"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{value:"Password",className:"mb-1 font-poppins font-semibold"}),e.jsx(p,{id:"password",type:"password",name:"password",className:"w-full rounded-md font-poppins",placeholder:"Password...",onChange:s=>o("password",s.target.value),value:l.password?l.password:""}),e.jsx(i,{message:n.password,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{value:"Confirm Password",className:"mb-1 font-poppins font-semibold"}),e.jsx(p,{id:"password_confirmation",type:"password",name:"password_confirmation",className:"w-full rounded-md font-poppins",placeholder:"Confirm Password...",onChange:s=>o("password_confirmation",s.target.value),value:l.password_confirmation?l.password_confirmation:""}),e.jsx(i,{message:n.password_confirmation,className:"mt-2"})]})]})}),e.jsx("div",{className:"form-field mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{value:"Locale",className:"mb-1 font-poppins font-semibold"}),e.jsxs("select",{className:"w-full border-gray-300 rounded-md font-poppins focus:border-yellow-500 focus:ring-0",value:l.local,onChange:s=>o("local",s.target.value),children:[e.jsx("option",{value:"",children:"Select"}),h.length&&h.map((s,a)=>e.jsx("option",{value:s.id,children:s.title},s.id))]}),e.jsx(i,{message:n.local,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{value:"Role",className:"mb-1 font-poppins font-semibold"}),e.jsxs("select",{className:"w-full border-gray-300 rounded-md font-poppins focus:border-yellow-500 focus:ring-0",value:l.role,onChange:s=>o("role",s.target.value),children:[e.jsx("option",{value:"",children:"Select"}),v.length&&v.map((s,a)=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),e.jsx(i,{message:n.role,className:"mt-2"})]})]})}),e.jsx("input",{type:"hidden",name:"type",value:y,readOnly:!0}),e.jsx("div",{className:"font-item mb-4 text-right",children:e.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-poppins rounded-sm font-bold",disabled:z,children:"Submit"})})]})})]})}),e.jsx(P,{show:O,onClose:N,maxWidth:"xl",children:e.jsxs("div",{className:"delete-modal px-6 py-8 relative font-poppins",children:[e.jsx("h1",{className:"font-bold text-3xl text-center",children:"Are you sure ?"}),e.jsx("div",{className:"absolute -top-8 -right-8 text-white cursor-pointer",children:e.jsx(R,{strokeWidth:1.5,size:38,onClick:N})}),e.jsxs("div",{className:"flex justify-center gap-2 pt-6",children:[e.jsx("button",{className:"bg-red-500 text-white px-4 py-3 font-semibold rounded",onClick:N,children:"Cancel"}),e.jsx("button",{className:"bg-blue-500 text-white px-4 py-3 font-semibold rounded",onClick:Y,children:"Confirm"})]})]})})]})}export{we as default};
