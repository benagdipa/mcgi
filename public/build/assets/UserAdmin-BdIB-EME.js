import{X as oe,G as ne,r as l,j as e,S as re,x as P,A as de,a as R}from"./app-D5i-Ento.js";import{A as ie,i as ce}from"./AuthenticatedLayout-B6xsQrlE.js";import{r as i}from"./index-Bq4i5zaX.js";import{M as W}from"./Modal-B3HdYqhz.js";import{I as c}from"./InputLabel-DrZktnZv.js";import{I as m}from"./InputError-BGxhihvN.js";import{T as p}from"./TextInput-D3mhTOhG.js";import{I as $}from"./IconX-Bt6HRUyu.js";import"./Dropdown-DP8ZFciO.js";import"./transition-BUwCjrX6.js";import"./index-BarBPuyi.js";import"./index-D7b3aihJ.js";function _e({auth:b,users_list:_,locale:u,roles:y}){const{role:z,permissions:H}=oe().props.auth,X=["SN","First Name","Last Name","Email","Phone","Locale","Actions","Approved"],{data:o,setData:n,post:A,processing:q,errors:d,reset:E,delete:me}=ne({first_name:"",last_name:"",email:"",phone:"",password:"",password_confirmation:"",local:"",role:""}),[B,h]=l.useState(!1),[G,T]=l.useState(""),[w,L]=l.useState(""),[S,M]=l.useState(""),[O,k]=l.useState(!1),[f,J]=l.useState(""),[j,K]=l.useState(""),[g,Q]=l.useState(""),[x,N]=l.useState([]);l.useEffect(()=>{N(_)},[]);const V=s=>{if(s){const a=u.filter(t=>t.id===parseInt(s));if(a.length)return a[0].title}},I=(s,a=0)=>{if(a!==0&&M(a),s==="add")T("Add New"),L("_add");else if(s==="edit"){const t=x.filter(C=>C.id===a);n({...t[0],role:t[0].roles[0]?t[0].roles[0].name:"guest"}),T("Edit"),L("_edit")}h(!0)},D=()=>{h(!1)},Y=s=>{s.preventDefault(),w==="_add"?A(route("admin.users.store"),{preserveScroll:!0,onSuccess:()=>{E(),h(!1)}}):w==="_edit"&&A(route("admin.users.update",S),{onSuccess:()=>{E(),h(!1)}})},Z=s=>{M(s),k(!0)},v=()=>{k(!1)},ee=()=>{S&&de.delete(route("admin.users.delete",S),{onSuccess:()=>{v()}})},se=async()=>{if(f.length>=3||j||g){const s=await R.post(route("admin.search.user"),{search_query:f,search_locale:j,search_role:g});s!=null&&s.data&&s!=null&&s.data&&N(s.data)}else N(_)};l.useEffect(()=>{setTimeout(()=>{se()},500)},[f,j,g]);const ae=async s=>{var a;if(s){const t=await R.post(route("admin.users.approval"),{id:s});t.status===200&&N((a=t==null?void 0:t.data)==null?void 0:a.users)}};return e.jsxs(ie,{user:b==null?void 0:b.user,children:[e.jsx(re,{title:"Users"}),e.jsxs("div",{className:"content py-4 font-poppins",children:[e.jsxs("div",{className:"content-header px-6 flex justify-between items-center",children:[e.jsxs("div",{className:"left",children:[e.jsx("h1",{className:"font-semibold text-gray-800 text-3xl",children:"Users"}),e.jsx("div",{className:"pt-2",children:e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(P,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(P,{href:route("admin.users.index"),children:"Users"})})]})})]}),e.jsx("div",{className:"right",children:e.jsx("button",{className:"bg-[#f5cd06] shadow-lg text-[#0f0f0f] px-5 py-3 rounded-md font-semibold text-lg font-poppins",onClick:()=>{I("add")},children:"Add New"})})]}),e.jsxs("div",{className:"flex justify-end pr-6 pt-4 gap-2",children:[e.jsx(p,{type:"text",placeholder:"Search...",className:"rounded border-gray-400/80 w-1/4 focus:ring-0 ring-0",value:f,onChange:s=>{J(s.target.value)}}),e.jsxs("select",{className:"border-gray-300 focus:border-yellow-500 focus:ring-0 rounded-md shadow-sm",value:j,onChange:s=>K(s.target.value),children:[e.jsx("option",{value:"",children:"Select Locale"}),u.map(({id:s,title:a})=>e.jsx("option",{value:s,children:a},s))]}),e.jsxs("select",{className:"border-gray-300 focus:border-yellow-500 focus:ring-0 rounded-md shadow-sm",value:g,onChange:s=>Q(s.target.value),children:[e.jsx("option",{value:"",children:"Select Role"}),y.map(({id:s,name:a})=>e.jsx("option",{value:a,children:a},s))]})]}),e.jsx("div",{className:"page-content pt-4",children:e.jsxs(i.Card,{className:"h-full w-full overflow-scroll rounded-none font-poppins",children:[e.jsxs("table",{className:"w-full min-w-max table-auto text-left font-poppins",children:[e.jsx("thead",{children:e.jsx("tr",{children:X.map(s=>e.jsx("th",{className:"border-b border-blue-gray-100 bg-blue-gray-50 p-4",children:e.jsx(i.Typography,{className:"font-semibold text-lg leading-none opacity-70 font-poppins",children:s})},s))})}),e.jsx("tbody",{children:x.map(({id:s,first_name:a,last_name:t,email:C,local:te,phone:le,roles:pe,admin_approved:U},F)=>{const r=F===x.length-1?"p-4":"p-4 border-b border-blue-gray-50";return e.jsxs("tr",{children:[e.jsx("td",{className:r,children:e.jsx(i.Typography,{className:"font-medium font-poppins",children:`${F+1}`})}),e.jsx("td",{className:r,children:e.jsx(i.Typography,{className:"font-medium font-poppins",children:`${a}`})}),e.jsx("td",{className:r,children:e.jsx(i.Typography,{className:"font-medium font-poppins",children:`${t}`})}),e.jsx("td",{className:r,children:e.jsx(i.Typography,{className:"font-medium font-poppins",children:C})}),e.jsx("td",{className:r,children:e.jsx(i.Typography,{className:"font-medium font-poppins",children:le})}),e.jsx("td",{className:r,children:e.jsx(i.Typography,{className:"font-medium font-poppins",children:V(te)})}),e.jsx("td",{className:r,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-0 text-sm font-medium font-poppins",onClick:()=>{I("edit",s)},children:"Edit"}),ce(H,["delete_users"],z)&&e.jsx("button",{className:"text-red-500 px-0 text-sm font-medium font-poppins",onClick:()=>{Z(s)},children:"Delete"})]})}),U===0&&e.jsx("td",{className:r,children:e.jsx("button",{className:"rounded-lg text-sm font-medium font-poppins bg-blue-500 text-white py-2 px-2",onClick:()=>{ae(s)},children:"Approve User"})}),U===1&&e.jsx("td",{className:r,children:"Approved"})]},s)})})]}),(x==null?void 0:x.length)===0&&e.jsx("p",{className:"font-medium font-poppins text-center py-3 w-full",children:"No data found"})]})})]}),e.jsx(W,{show:B,onClose:D,maxWidth:"2xl",children:e.jsxs("div",{className:"delete-modal px-6 py-8 relative font-poppins",children:[e.jsxs("h1",{className:"font-bold text-2xl font-poppins",children:[G," User"]}),e.jsx("div",{className:"absolute -top-8 -right-8 text-white cursor-pointer",children:e.jsx($,{strokeWidth:1.5,size:38,onClick:D})}),e.jsx("div",{className:"modal-content pt-6",children:e.jsxs("form",{onSubmit:Y,children:[e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(c,{value:"First Name",className:"mb-1 font-poppins font-semibold"}),e.jsx(p,{id:"first_name",type:"text",name:"first_name",className:"w-full rounded-md font-poppins",placeholder:"First Name...",onChange:s=>n("first_name",s.target.value),value:o.first_name}),e.jsx(m,{message:d.first_name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{value:"Last Name",className:"mb-1 font-poppins font-semibold"}),e.jsx(p,{id:"last_name",type:"text",name:"last_name",className:"w-full rounded-md font-poppins",placeholder:"Last Name...",onChange:s=>n("last_name",s.target.value),value:o.last_name}),e.jsx(m,{message:d.last_name,className:"mt-2"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(c,{value:"Email Address",className:"mb-1 font-poppins font-semibold"}),e.jsx(p,{id:"email",type:"email",name:"email",className:"w-full rounded-md font-poppins",placeholder:"Email Address...",onChange:s=>n("email",s.target.value),value:o.email}),e.jsx(m,{message:d.email,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{value:"Phone Number",className:"mb-1 font-poppins font-semibold"}),e.jsx(p,{id:"phone",type:"text",name:"phone",className:"w-full rounded-md font-poppins",placeholder:"Last Name...",onChange:s=>n("phone",s.target.value),value:o.phone}),e.jsx(m,{message:d.phone,className:"mt-2"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(c,{value:"Password",className:"mb-1 font-poppins font-semibold"}),e.jsx(p,{id:"password",type:"password",name:"password",className:"w-full rounded-md font-poppins",placeholder:"Password...",onChange:s=>n("password",s.target.value),value:o.password?o.password:""}),e.jsx(m,{message:d.password,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{value:"Confirm Password",className:"mb-1 font-poppins font-semibold"}),e.jsx(p,{id:"password_confirmation",type:"password",name:"password_confirmation",className:"w-full rounded-md font-poppins",placeholder:"Confirm Password...",onChange:s=>n("password_confirmation",s.target.value),value:o.password_confirmation?o.password_confirmation:""}),e.jsx(m,{message:d.password_confirmation,className:"mt-2"})]})]})}),e.jsx("div",{className:"form-field mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(c,{value:"Locale",className:"mb-1 font-poppins font-semibold"}),e.jsxs("select",{className:"w-full border-gray-300 rounded-md font-poppins focus:border-yellow-500 focus:ring-0",value:o.local,onChange:s=>n("local",s.target.value),children:[e.jsx("option",{value:"",children:"Select"}),u.length&&u.map((s,a)=>e.jsx("option",{value:s.id,children:s.title},s.id))]}),e.jsx(m,{message:d.local,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{value:"Role",className:"mb-1 font-poppins font-semibold"}),e.jsxs("select",{className:"w-full border-gray-300 rounded-md font-poppins focus:border-yellow-500 focus:ring-0",value:o.role,onChange:s=>n("role",s.target.value),children:[e.jsx("option",{value:"",children:"Select"}),y.length&&y.map((s,a)=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),e.jsx(m,{message:d.role,className:"mt-2"})]})]})}),e.jsx("input",{type:"hidden",name:"type",value:w,readOnly:!0}),e.jsx("div",{className:"font-item mb-4 text-right",children:e.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-poppins rounded-sm font-bold",disabled:q,children:"Submit"})})]})})]})}),e.jsx(W,{show:O,onClose:v,maxWidth:"xl",children:e.jsxs("div",{className:"delete-modal px-6 py-8 relative font-poppins",children:[e.jsx("h1",{className:"font-bold text-3xl text-center",children:"Are you sure ?"}),e.jsx("div",{className:"absolute -top-8 -right-8 text-white cursor-pointer",children:e.jsx($,{strokeWidth:1.5,size:38,onClick:v})}),e.jsxs("div",{className:"flex justify-center gap-2 pt-6",children:[e.jsx("button",{className:"bg-red-500 text-white px-4 py-3 font-semibold rounded",onClick:v,children:"Cancel"}),e.jsx("button",{className:"bg-blue-500 text-white px-4 py-3 font-semibold rounded",onClick:ee,children:"Confirm"})]})]})})]})}export{_e as default};
