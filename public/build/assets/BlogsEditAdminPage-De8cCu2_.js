import{W as F,r as c,j as e,a as R}from"./app-DnwsUkCw.js";import{T as j,I as o}from"./TextInput-DZtluV7q.js";import{I as u}from"./InputLabel-DoApeuwi.js";import{A as L}from"./AuthenticatedLayout-lbGC4CRW.js";import{E as T}from"./Editor-CTHQtpef.js";import"./Dropdown-vB_pYy2n.js";import"./transition-Cwx_fogE.js";function V({auth:d,item:a,categories:h,tags:x}){const{data:t,setData:n,post:b,processing:v,errors:i,reset:_}=F({title:a.title,slug:a.slug,content:a.content,categories:a!=null&&a.categories?a.categories.split(","):[],tags:a!=null&&a.tags?a.tags.split(","):[],featureImage:null,status:a.status});console.log("errors",i);const g=c.useRef(null),[N,k]=c.useState(a.featured_image),[A,w]=c.useState(""),p=c.useRef(null);c.useEffect(()=>{const l=(t==null?void 0:t.title).replace(/\s+/g,"-").toLowerCase();n("slug",l)},[t.title]);const C=s=>{p.current.click()},I=s=>{const l=URL.createObjectURL(s.target.files[0]);n("featureImage",s.target.files[0]),w(s.target.files[0].name),k(l)},f=(s,l)=>{const{value:r,checked:S}=l.target;if(S){const m=t[s];n(s,[...m,r])}else{const m=t[s].filter(E=>E!==r);n(s,m)}},y=s=>{s.preventDefault(),b(route("admin.blogs.update",a.id))};return e.jsxs(L,{user:d==null?void 0:d.user,children:[e.jsx(R,{title:"Edit blog"}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"p-6 flex justify-between",children:e.jsx("h1",{className:"font-bold font-xl",children:"Edit Blog"})}),e.jsx("div",{className:"form-wrapper px-6",children:e.jsx("div",{className:"max-w-screen-2xl",children:e.jsx("form",{onSubmit:y,children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-9/12",children:[e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(u,{value:"Title",className:"mb-1 font-dmsans"}),e.jsx(j,{name:"title",value:t.title,onChange:s=>n("title",s.target.value),className:"w-full rounded-sm font-dmsans placeholder:font-dmsans"}),e.jsx(o,{message:i.title,className:"mt-2"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(u,{value:"Slug",className:"mb-1 font-dmsans"}),e.jsx(j,{name:"slug",value:t.slug,onChange:s=>n("slug",s.target.value),className:"w-full rounded-sm font-dmsans placeholder:font-dmsans"}),e.jsx(o,{message:i.slug,className:"mt-2"})]}),e.jsxs("div",{className:"form-item",children:[e.jsx(u,{value:"Content",className:"mb-1 font-dmsans"}),e.jsxs("div",{className:"custom-ckeditor",style:{height:"400px"},children:[e.jsx(T,{apiKey:"h9mpgdcvlxaa94b8rwqpagapahot2x6w7urfs0dtyswd2qtj",onInit:(s,l)=>{g.current=l},onChange:()=>n("content",g.current.getContent()),initialValue:t.content,init:{height:800,menubar:!1,plugins:["a11ychecker","advlist","advcode","advtable","autolink","checklist","export","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","powerpaste","fullscreen","formatpainter","insertdatetime","media","table","help","wordcount"],toolbar:"undo redo | casechange blocks | bold italic backcolor | image | alignleft aligncenter alignright alignjustify | bullist numlist checklist outdent indent | removeformat | a11ycheck code table help",images_upload_url:"upload.php",automatic_uploads:!1}}),e.jsx(o,{message:i.content,className:"mt-2"})]})]})]}),e.jsx("div",{className:"w-3/12",children:e.jsxs("div",{className:"border rounded p-4",children:[e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"status",children:[e.jsx("div",{className:"status text-xl font-bold mb-2 font-dmsans",children:"Status"}),e.jsxs("select",{name:"status",className:"w-full",value:t.status,onChange:s=>n("status",s.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"publish",children:"Publish"})]}),e.jsx(o,{message:i.status,className:"mt-2"})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"categories",children:[e.jsx("p",{className:"text-xl font-bold mb-3 font-dmsans",children:"Categories"}),e.jsx("div",{className:"categories-items border p-4 rounded",children:h.length&&h.map((s,l)=>e.jsx("div",{className:"",children:e.jsxs("label",{className:"pb-3 block",children:[e.jsx("input",{type:"checkbox",name:"categories[]",value:s.id,className:"rounded w-5 h-5",onChange:r=>f("categories",r),checked:t.categories.includes(s.id.toString())}),e.jsx("span",{className:"pl-2 font-dmsans font-medium",children:s.title})]})},l))})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"tags",children:[e.jsx("p",{className:"text-xl font-bold mb-3 font-dmsans",children:"Tags"}),e.jsx("div",{className:"categories-items border p-4 rounded",children:x.length&&x.map((s,l)=>e.jsx("div",{className:"",children:e.jsxs("label",{className:"pb-3 block",children:[e.jsx("input",{type:"checkbox",name:"tags[]",value:s.id,className:"rounded w-5 h-5",onChange:r=>f("tags",r),checked:t.tags.includes(s.id.toString())}),e.jsx("span",{className:"pl-2 font-dmsans font-medium",children:s.title})]})},l))})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"featured-image",children:[e.jsx("p",{className:"text-xl font-bold mb-3 font-dmsans",children:"Featured Image"}),e.jsxs("div",{className:"categories-items border p-4 rounded",children:[e.jsx("img",{src:N}),e.jsx("input",{type:"file",name:"featureImage",hidden:!0,onChange:I,ref:p,value:""}),e.jsx("a",{className:"bg-transparent cursor-pointer",onClick:C,children:"Set Featured Image"})]})]})}),e.jsx("div",{className:"form-item",children:e.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-bold rounded font-dmsans",disabled:v,children:"Submit"})})]})})]})})})})]})]})}export{V as default};
