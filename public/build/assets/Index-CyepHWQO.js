import{r as o,j as e,S as O,x as m,A}from"./app-CZB67pLA.js";import{A as D}from"./AdminLayout-7wWF2OMj.js";import{n as d,k as I,j as k,o as L,l as M,i as G,m as U}from"./index-Bc1sA33s.js";import{r as a}from"./index-DBc7mDRn.js";import{f as u}from"./index-Dw_W2KWe.js";import"./iconBase-x3SJZAWa.js";import"./index-BarBPuyi.js";import"./index-BykJh5iJ.js";function K({events:b,stats:s,flash:g,eventTypes:h,internalCategories:v,externalCategories:N}){const[t,f]=o.useState(""),[p,T]=o.useState("all"),[x,C]=o.useState("all"),[c,w]=o.useState("start_date"),[i,j]=o.useState("desc"),_=r=>{switch(r){case"upcoming":return"blue";case"ongoing":return"green";case"completed":return"gray";default:return"blue-gray"}},S=r=>r?{...v,...N}[r]||r.replace("_"," "):"",B=b.filter(r=>{const n=t===""||r.title.toLowerCase().includes(t.toLowerCase())||r.location.toLowerCase().includes(t.toLowerCase())||r.category.toLowerCase().includes(t.toLowerCase()),l=p==="all"||r.status===p,F=x==="all"||x===h.internal&&r.is_internal||x===h.external&&r.is_external;return n&&l&&F}).sort((r,n)=>{let l=0;switch(c){case"title":l=r.title.localeCompare(n.title);break;case"start_date":l=new Date(r.start_date)-new Date(n.start_date);break;case"attendances":l=r.attendances_count-n.attendances_count;break;default:l=0}return i==="asc"?l:-l}),y=r=>{c===r?j(i==="asc"?"desc":"asc"):(w(r),j("asc"))},E=r=>{confirm("Are you sure you want to delete this event?")&&A.delete(route("admin.events.destroy",r))};return e.jsxs(D,{children:[e.jsx(O,{title:"Events Management"}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[g.message&&e.jsx("div",{className:"mb-6 p-4 bg-green-100 text-green-700 rounded-lg",children:g.message}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:[e.jsx(a.Card,{children:e.jsxs(a.CardBody,{className:"p-4",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:"Total Events"}),e.jsx(a.Typography,{variant:"h3",children:s.total})]})}),e.jsx(a.Card,{children:e.jsxs(a.CardBody,{className:"p-4",children:[e.jsx(a.Typography,{variant:"h6",color:"blue",children:"Upcoming"}),e.jsx(a.Typography,{variant:"h3",children:s.upcoming})]})}),e.jsx(a.Card,{children:e.jsxs(a.CardBody,{className:"p-4",children:[e.jsx(a.Typography,{variant:"h6",color:"green",children:"Ongoing"}),e.jsx(a.Typography,{variant:"h3",children:s.ongoing})]})}),e.jsx(a.Card,{children:e.jsxs(a.CardBody,{className:"p-4",children:[e.jsx(a.Typography,{variant:"h6",color:"gray",children:"Completed"}),e.jsx(a.Typography,{variant:"h3",children:s.completed})]})}),e.jsx(a.Card,{children:e.jsxs(a.CardBody,{className:"p-4",children:[e.jsx(a.Typography,{variant:"h6",color:"blue",children:"Internal"}),e.jsx(a.Typography,{variant:"h3",children:s.internal})]})}),e.jsx(a.Card,{children:e.jsxs(a.CardBody,{className:"p-4",children:[e.jsx(a.Typography,{variant:"h6",color:"green",children:"External"}),e.jsx(a.Typography,{variant:"h3",children:s.external})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx(a.Card,{children:e.jsxs(a.CardBody,{className:"p-4 flex items-center",children:[e.jsx("div",{className:"rounded-full bg-blue-50 p-3 mr-4",children:e.jsx(d,{className:"h-6 w-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:"Total Attendees"}),e.jsx(a.Typography,{variant:"h3",children:s.total_attendances})]})]})}),e.jsx(a.Card,{children:e.jsxs(a.CardBody,{className:"p-4 flex items-center",children:[e.jsx("div",{className:"rounded-full bg-blue-50 p-3 mr-4",children:e.jsx(d,{className:"h-6 w-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:"Members"}),e.jsx(a.Typography,{variant:"h3",children:s.member_attendances})]})]})}),e.jsx(a.Card,{children:e.jsxs(a.CardBody,{className:"p-4 flex items-center",children:[e.jsx("div",{className:"rounded-full bg-green-50 p-3 mr-4",children:e.jsx(d,{className:"h-6 w-6 text-green-500"})}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:"Guests"}),e.jsx(a.Typography,{variant:"h3",children:s.guest_attendances})]})]})}),e.jsx(a.Card,{children:e.jsxs(a.CardBody,{className:"p-4 flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"rounded-full bg-blue-50 p-3 mr-4",children:e.jsx(d,{className:"h-6 w-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:"In-Person"}),e.jsx(a.Typography,{variant:"h4",children:s.in_person_attendances})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"rounded-full bg-blue-50 p-3 mr-4",children:e.jsx(d,{className:"h-6 w-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:"Online"}),e.jsx(a.Typography,{variant:"h4",children:s.online_attendances})]})]})]})})]}),e.jsxs(a.Card,{className:"mb-8",children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,className:"rounded-none",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 md:px-4",children:[e.jsx("div",{className:"w-full md:w-72",children:e.jsx(a.Input,{label:"Search events",icon:e.jsx(I,{}),value:t,onChange:r=>f(r.target.value)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"w-48",children:e.jsxs(a.Select,{label:"Filter by status",value:p,onChange:r=>T(r),children:[e.jsx(a.Option,{value:"all",children:"All Statuses"}),e.jsx(a.Option,{value:"upcoming",children:"Upcoming"}),e.jsx(a.Option,{value:"ongoing",children:"Ongoing"}),e.jsx(a.Option,{value:"completed",children:"Completed"})]})}),e.jsx("div",{className:"w-48",children:e.jsxs(a.Select,{label:"Filter by event type",value:x,onChange:r=>C(r),children:[e.jsx(a.Option,{value:"all",children:"All Types"}),e.jsx(a.Option,{value:h.internal,children:"Internal (Members Only)"}),e.jsx(a.Option,{value:h.external,children:"External (Open to Guests)"})]})}),e.jsx(m,{href:route("admin.events.create"),children:e.jsxs(a.Button,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),"Add Event"]})})]})]})}),e.jsx(a.CardBody,{className:"px-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-max table-auto text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"cursor-pointer border-b border-gray-100 bg-gray-50/50 p-4",onClick:()=>y("title"),children:e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal leading-none opacity-70",children:["Title ",c==="title"&&(i==="asc"?"↑":"↓")]})}),e.jsx("th",{className:"cursor-pointer border-b border-gray-100 bg-gray-50/50 p-4",onClick:()=>y("start_date"),children:e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal leading-none opacity-70",children:["Date ",c==="start_date"&&(i==="asc"?"↑":"↓")]})}),e.jsx("th",{className:"border-b border-gray-100 bg-gray-50/50 p-4",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal leading-none opacity-70",children:"Location"})}),e.jsx("th",{className:"border-b border-gray-100 bg-gray-50/50 p-4",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal leading-none opacity-70",children:"Type/Status"})}),e.jsx("th",{className:"cursor-pointer border-b border-gray-100 bg-gray-50/50 p-4",onClick:()=>y("attendances"),children:e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal leading-none opacity-70",children:["Attendees ",c==="attendances"&&(i==="asc"?"↑":"↓")]})}),e.jsx("th",{className:"border-b border-gray-100 bg-gray-50/50 p-4",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal leading-none opacity-70",children:"Actions"})})]})}),e.jsx("tbody",{children:B.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:r.title}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal opacity-70",children:S(r.category)})]})}),e.jsxs("td",{className:"p-4",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:u(new Date(r.start_date),"MMM d, yyyy")}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal opacity-70",children:u(new Date(r.start_date),"h:mm a")})]}),e.jsx("td",{className:"p-4",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:r.location})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(a.Badge,{color:_(r.status),className:"capitalize",children:r.status}),e.jsx(a.Badge,{color:r.is_internal?"blue":"green",variant:"gradient",className:"capitalize",children:r.is_internal?"Members Only":"Open to Guests"})]})}),e.jsx("td",{className:"p-4",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:r.attendances_count})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a.Tooltip,{content:"View Attendees",children:e.jsx(m,{href:route("admin.events.attendances",r.id),children:e.jsx(a.IconButton,{variant:"text",color:"blue",children:e.jsx(L,{className:"h-4 w-4"})})})}),e.jsx(a.Tooltip,{content:"Edit Event",children:e.jsx(m,{href:route("admin.events.edit",r.id),children:e.jsx(a.IconButton,{variant:"text",color:"green",children:e.jsx(M,{className:"h-4 w-4"})})})}),e.jsx(a.Tooltip,{content:"Export Attendees",children:e.jsx(m,{href:route("admin.events.export",r.id),children:e.jsx(a.IconButton,{variant:"text",color:"blue-gray",children:e.jsx(G,{className:"h-4 w-4"})})})}),e.jsx(a.Tooltip,{content:"Delete Event",children:e.jsx(a.IconButton,{variant:"text",color:"red",onClick:()=>E(r.id),children:e.jsx(U,{className:"h-4 w-4"})})})]})})]},r.id))})]})})})]})]})]})}export{K as default};
