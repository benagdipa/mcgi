import{r as j,W as V,j as l,a as U}from"./app-DX3tyDKU.js";import{I as _}from"./InputLabel-fWkH5gM2.js";import{T as D,I as w}from"./TextInput-DJNDuyyv.js";import{p as n,A as z}from"./AuthenticatedLayout-pagqnu8h.js";import"./Dropdown-DZJAkqEV.js";import"./transition-ni-FhwyO.js";var O=function(){return O=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},O.apply(this,arguments)},H={onActivate:n.func,onAddUndo:n.func,onBeforeAddUndo:n.func,onBeforeExecCommand:n.func,onBeforeGetContent:n.func,onBeforeRenderUI:n.func,onBeforeSetContent:n.func,onBeforePaste:n.func,onBlur:n.func,onChange:n.func,onClearUndos:n.func,onClick:n.func,onContextMenu:n.func,onCommentChange:n.func,onCompositionEnd:n.func,onCompositionStart:n.func,onCompositionUpdate:n.func,onCopy:n.func,onCut:n.func,onDblclick:n.func,onDeactivate:n.func,onDirty:n.func,onDrag:n.func,onDragDrop:n.func,onDragEnd:n.func,onDragGesture:n.func,onDragOver:n.func,onDrop:n.func,onExecCommand:n.func,onFocus:n.func,onFocusIn:n.func,onFocusOut:n.func,onGetContent:n.func,onHide:n.func,onInit:n.func,onInput:n.func,onKeyDown:n.func,onKeyPress:n.func,onKeyUp:n.func,onLoadContent:n.func,onMouseDown:n.func,onMouseEnter:n.func,onMouseLeave:n.func,onMouseMove:n.func,onMouseOut:n.func,onMouseOver:n.func,onMouseUp:n.func,onNodeChange:n.func,onObjectResizeStart:n.func,onObjectResized:n.func,onObjectSelected:n.func,onPaste:n.func,onPostProcess:n.func,onPostRender:n.func,onPreProcess:n.func,onProgressState:n.func,onRedo:n.func,onRemove:n.func,onReset:n.func,onSaveContent:n.func,onSelectionChange:n.func,onSetAttrib:n.func,onSetContent:n.func,onShow:n.func,onSubmit:n.func,onUndo:n.func,onVisualAid:n.func,onSkinLoadError:n.func,onThemeLoadError:n.func,onModelLoadError:n.func,onPluginLoadError:n.func,onIconsLoadError:n.func,onLanguageLoadError:n.func,onScriptsLoad:n.func,onScriptsLoadError:n.func},q=O({apiKey:n.string,licenseKey:n.string,id:n.string,inline:n.bool,init:n.object,initialValue:n.string,onEditorChange:n.func,value:n.string,tagName:n.string,cloudChannel:n.string,plugins:n.oneOfType([n.string,n.array]),toolbar:n.oneOfType([n.string,n.array]),disabled:n.bool,textareaName:n.string,tinymceScriptSrc:n.oneOfType([n.string,n.arrayOf(n.string),n.arrayOf(n.shape({src:n.string,async:n.bool,defer:n.bool}))]),rollback:n.oneOfType([n.number,n.oneOf([!1])]),scriptLoading:n.shape({async:n.bool,defer:n.bool,delay:n.number})},H),I=function(t){return typeof t=="function"},B=function(t){return t in H},P=function(t){return t.substr(2)},G=function(t,r,i,a,o,c,e){var s=Object.keys(o).filter(B),u=Object.keys(c).filter(B),f=s.filter(function(d){return c[d]===void 0}),p=u.filter(function(d){return o[d]===void 0});f.forEach(function(d){var h=P(d),g=e[h];i(h,g),delete e[h]}),p.forEach(function(d){var h=a(t,d),g=P(d);e[g]=h,r(g,h)})},W=function(t,r,i,a,o){return G(o,t.on.bind(t),t.off.bind(t),function(c,e){return function(s){var u;return(u=c(e))===null||u===void 0?void 0:u(s,t)}},r,i,a)},R=0,K=function(t){var r=Date.now(),i=Math.floor(Math.random()*1e9);return R++,t+"_"+i+R+String(r)},A=function(t){return t!==null&&(t.tagName.toLowerCase()==="textarea"||t.tagName.toLowerCase()==="input")},M=function(t){return typeof t>"u"||t===""?[]:Array.isArray(t)?t:t.split(" ")},$=function(t,r){return M(t).concat(M(r))},J=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},Q=function(t){if(!("isConnected"in Node.prototype)){for(var r=t,i=t.parentNode;i!=null;)r=i,i=r.parentNode;return r===t.ownerDocument}return t.isConnected},F=function(t,r){t!==void 0&&(t.mode!=null&&typeof t.mode=="object"&&typeof t.mode.set=="function"?t.mode.set(r):t.setMode(r))},T=function(){return T=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},T.apply(this,arguments)},X=function(t,r,i){var a,o,c=t.createElement("script");c.referrerPolicy="origin",c.type="application/javascript",c.id=r.id,c.src=r.src,c.async=(a=r.async)!==null&&a!==void 0?a:!1,c.defer=(o=r.defer)!==null&&o!==void 0?o:!1;var e=function(){c.removeEventListener("load",e),c.removeEventListener("error",s),i(r.src)},s=function(u){c.removeEventListener("load",e),c.removeEventListener("error",s),i(r.src,u)};c.addEventListener("load",e),c.addEventListener("error",s),t.head&&t.head.appendChild(c)},Y=function(t){var r={},i=function(e,s){var u=r[e];u.done=!0,u.error=s;for(var f=0,p=u.handlers;f<p.length;f++){var d=p[f];d(e,s)}u.handlers=[]},a=function(e,s,u){var f=function(N){return u!==void 0?u(N):console.error(N)};if(e.length===0){f(new Error("At least one script must be provided"));return}for(var p=0,d=!1,h=function(N,k){d||(k?(d=!0,f(k)):++p===e.length&&s())},g=0,m=e;g<m.length;g++){var y=m[g],b=r[y.src];if(b)b.done?h(y.src,b.error):b.handlers.push(h);else{var x=K("tiny-");r[y.src]={id:x,src:y.src,done:!1,error:null,handlers:[h]},X(t,T({id:x},y),i)}}},o=function(){for(var e,s=0,u=Object.values(r);s<u.length;s++){var f=u[s],p=t.getElementById(f.id);p!=null&&p.tagName==="SCRIPT"&&((e=p.parentNode)===null||e===void 0||e.removeChild(p))}r={}},c=function(){return t};return{loadScripts:a,deleteScripts:o,getDocument:c}},Z=function(){var t=[],r=function(o){var c=t.find(function(e){return e.getDocument()===o});return c===void 0&&(c=Y(o),t.push(c)),c},i=function(o,c,e,s,u){var f=function(){return r(o).loadScripts(c,s,u)};e>0?setTimeout(f,e):f()},a=function(){for(var o=t.pop();o!=null;o=t.pop())o.deleteScripts()};return{loadList:i,reinitialize:a}},ee=Z(),L=function(t){var r=t;return r&&r.tinymce?r.tinymce:null},ne=function(){var t=function(r,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(a[c]=o[c])},t(r,i)};return function(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(r,i);function a(){this.constructor=r}r.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),S=function(){return S=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},S.apply(this,arguments)},te=function(t){ne(r,t);function r(i){var a,o,c,e=t.call(this,i)||this;return e.rollbackTimer=void 0,e.valueCursor=void 0,e.rollbackChange=function(){var s=e.editor,u=e.props.value;s&&u&&u!==e.currentContent&&s.undoManager.ignore(function(){if(s.setContent(u),e.valueCursor&&(!e.inline||s.hasFocus()))try{s.selection.moveToBookmark(e.valueCursor)}catch{}}),e.rollbackTimer=void 0},e.handleBeforeInput=function(s){if(e.props.value!==void 0&&e.props.value===e.currentContent&&e.editor&&(!e.inline||e.editor.hasFocus()))try{e.valueCursor=e.editor.selection.getBookmark(3)}catch{}},e.handleBeforeInputSpecial=function(s){(s.key==="Enter"||s.key==="Backspace"||s.key==="Delete")&&e.handleBeforeInput(s)},e.handleEditorChange=function(s){var u=e.editor;if(u&&u.initialized){var f=u.getContent();e.props.value!==void 0&&e.props.value!==f&&e.props.rollback!==!1&&(e.rollbackTimer||(e.rollbackTimer=window.setTimeout(e.rollbackChange,typeof e.props.rollback=="number"?e.props.rollback:200))),f!==e.currentContent&&(e.currentContent=f,I(e.props.onEditorChange)&&e.props.onEditorChange(f,u))}},e.handleEditorChangeSpecial=function(s){(s.key==="Backspace"||s.key==="Delete")&&e.handleEditorChange(s)},e.initialise=function(s){var u,f,p;s===void 0&&(s=0);var d=e.elementRef.current;if(d){if(!Q(d)){if(s===0)setTimeout(function(){return e.initialise(1)},1);else if(s<100)setTimeout(function(){return e.initialise(s+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var h=L(e.view);if(!h)throw new Error("tinymce should have been loaded into global scope");var g=S(S(S(S({},e.props.init),{selector:void 0,target:d,readonly:e.props.disabled,inline:e.inline,plugins:$((u=e.props.init)===null||u===void 0?void 0:u.plugins,e.props.plugins),toolbar:(f=e.props.toolbar)!==null&&f!==void 0?f:(p=e.props.init)===null||p===void 0?void 0:p.toolbar}),e.props.licenseKey?{license_key:e.props.licenseKey}:{}),{setup:function(m){e.editor=m,e.bindHandlers({}),e.inline&&!A(d)&&m.once("PostRender",function(y){m.setContent(e.getInitialValue(),{no_events:!0})}),e.props.init&&I(e.props.init.setup)&&e.props.init.setup(m)},init_instance_callback:function(m){var y,b,x=e.getInitialValue();e.currentContent=(y=e.currentContent)!==null&&y!==void 0?y:m.getContent(),e.currentContent!==x&&(e.currentContent=x,m.setContent(x),m.undoManager.clear(),m.undoManager.add(),m.setDirty(!1));var N=(b=e.props.disabled)!==null&&b!==void 0?b:!1;F(e.editor,N?"readonly":"design"),e.props.init&&I(e.props.init.init_instance_callback)&&e.props.init.init_instance_callback(m)}});e.inline||(d.style.visibility=""),A(d)&&(d.value=e.getInitialValue()),h.init(g)}},e.id=e.props.id||K("tiny-react"),e.elementRef=j.createRef(),e.inline=(c=(a=e.props.inline)!==null&&a!==void 0?a:(o=e.props.init)===null||o===void 0?void 0:o.inline)!==null&&c!==void 0?c:!1,e.boundHandlers={},e}return Object.defineProperty(r.prototype,"view",{get:function(){var i,a;return(a=(i=this.elementRef.current)===null||i===void 0?void 0:i.ownerDocument.defaultView)!==null&&a!==void 0?a:window},enumerable:!1,configurable:!0}),r.prototype.componentDidUpdate=function(i){var a=this,o,c;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(i),this.editor.initialized)){if(this.currentContent=(o=this.currentContent)!==null&&o!==void 0?o:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==i.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var e=this.editor;e.undoManager.transact(function(){var u;if(!a.inline||e.hasFocus())try{u=e.selection.getBookmark(3)}catch{}var f=a.valueCursor;if(e.setContent(a.props.value),!a.inline||e.hasFocus())for(var p=0,d=[u,f];p<d.length;p++){var h=d[p];if(h)try{e.selection.moveToBookmark(h),a.valueCursor=h;break}catch{}}})}if(this.props.disabled!==i.disabled){var s=(c=this.props.disabled)!==null&&c!==void 0?c:!1;F(this.editor,s?"readonly":"design")}}},r.prototype.componentDidMount=function(){var i=this,a,o,c,e,s;if(L(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(o=(a=this.props).onScriptsLoadError)===null||o===void 0||o.call(a,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((c=this.elementRef.current)===null||c===void 0)&&c.ownerDocument){var u=function(){var p,d;(d=(p=i.props).onScriptsLoad)===null||d===void 0||d.call(p),i.initialise()},f=function(p){var d,h;(h=(d=i.props).onScriptsLoadError)===null||h===void 0||h.call(d,p)};ee.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(s=(e=this.props.scriptLoading)===null||e===void 0?void 0:e.delay)!==null&&s!==void 0?s:0,u,f)}},r.prototype.componentWillUnmount=function(){var i=this,a=this.editor;a&&(a.off(this.changeEvents(),this.handleEditorChange),a.off(this.beforeInputEvent(),this.handleBeforeInput),a.off("keypress",this.handleEditorChangeSpecial),a.off("keydown",this.handleBeforeInputSpecial),a.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(o){a.off(o,i.boundHandlers[o])}),this.boundHandlers={},a.remove(),this.editor=void 0)},r.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},r.prototype.changeEvents=function(){var i,a,o,c=(o=(a=(i=L(this.view))===null||i===void 0?void 0:i.Env)===null||a===void 0?void 0:a.browser)===null||o===void 0?void 0:o.isIE();return c?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},r.prototype.beforeInputEvent=function(){return J()?"beforeinput SelectionChange":"SelectionChange"},r.prototype.renderInline=function(){var i=this.props.tagName,a=i===void 0?"div":i;return j.createElement(a,{ref:this.elementRef,id:this.id})},r.prototype.renderIframe=function(){return j.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id})},r.prototype.getScriptSources=function(){var i,a,o=(i=this.props.scriptLoading)===null||i===void 0?void 0:i.async,c=(a=this.props.scriptLoading)===null||a===void 0?void 0:a.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:o,defer:c}]:this.props.tinymceScriptSrc.map(function(f){return typeof f=="string"?{src:f,async:o,defer:c}:f});var e=this.props.cloudChannel,s=this.props.apiKey?this.props.apiKey:"no-api-key",u="https://cdn.tiny.cloud/1/".concat(s,"/tinymce/").concat(e,"/tinymce.min.js");return[{src:u,async:o,defer:c}]},r.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},r.prototype.bindHandlers=function(i){var a=this;if(this.editor!==void 0){W(this.editor,i,this.props,this.boundHandlers,function(s){return a.props[s]});var o=function(s){return s.onEditorChange!==void 0||s.value!==void 0},c=o(i),e=o(this.props);!c&&e?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):c&&!e&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},r.propTypes=q,r.defaultProps={cloudChannel:"7"},r}(j.Component);function ce({auth:t,categories:r,tags:i}){const{data:a,setData:o,post:c,processing:e,errors:s,reset:u,delete:f}=V({title:"",slug:"",content:"",categories:[],tags:[],featureImage:null,status:""}),[p,d]=j.useState(""),[h,g]=j.useState(""),m=j.useRef(null),y=v=>{m.current.click()},b=v=>{const C=URL.createObjectURL(v.target.files[0]);o("featureImage",v.target.files[0]),g(v.target.files[0].name),d(C)},x=(v,C)=>{const E=a[v];o(v,[...E,C])},N=v=>{v.preventDefault(),c(route("admin.blogs.store"),{_method:"put",avatar:a.avatar})},k=j.useRef(null);return l.jsxs(z,{user:t==null?void 0:t.user,children:[l.jsx(U,{title:"Add New Blogs"}),l.jsxs("div",{className:"",children:[l.jsx("div",{className:"p-6 flex justify-between",children:l.jsx("h1",{className:"font-bold font-xl",children:"Add New Blog"})}),l.jsx("div",{className:"form-wrapper px-6",children:l.jsx("div",{className:"max-w-screen-2xl",children:l.jsx("form",{onSubmit:N,children:l.jsxs("div",{className:"flex gap-6",children:[l.jsxs("div",{className:"w-9/12",children:[l.jsxs("div",{className:"form-item mb-4",children:[l.jsx(_,{value:"Title",className:"mb-1 font-dmsans"}),l.jsx(D,{name:"title",value:a.title,onChange:v=>o("title",v.target.value),className:"w-full rounded-sm font-dmsans placeholder:font-dmsans"}),l.jsx(w,{message:s.title,className:"mt-2"})]}),l.jsxs("div",{className:"form-item mb-4",children:[l.jsx(_,{value:"Slug",className:"mb-1 font-dmsans"}),l.jsx(D,{name:"slug",value:a.slug,onChange:v=>o("slug",v.target.value),className:"w-full rounded-sm font-dmsans placeholder:font-dmsans"}),l.jsx(w,{message:s.slug,className:"mt-2"})]}),l.jsxs("div",{className:"form-item",children:[l.jsx(_,{value:"Content",className:"mb-1 font-dmsans"}),l.jsxs("div",{className:"custom-ckeditor",style:{height:"400px"},children:[l.jsx(te,{apiKey:"h9mpgdcvlxaa94b8rwqpagapahot2x6w7urfs0dtyswd2qtj",onInit:(v,C)=>k.current=C,initialValue:"<p>This is the initial content of the editor.</p>",init:{height:500,menubar:!1,plugins:["a11ychecker","advlist","advcode","advtable","autolink","checklist","export","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","powerpaste","fullscreen","formatpainter","insertdatetime","media","table","help","wordcount"],toolbar:"undo redo | casechange blocks | bold italic backcolor | media alignleft aligncenter alignright alignjustify | bullist numlist checklist outdent indent | removeformat | a11ycheck code table help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}}),l.jsx(w,{message:s.content,className:"mt-2"})]})]})]}),l.jsx("div",{className:"w-3/12",children:l.jsxs("div",{className:"border rounded p-4",children:[l.jsx("div",{className:"form-item mb-4",children:l.jsxs("div",{className:"status",children:[l.jsx("div",{className:"status text-xl font-bold mb-2 font-dmsans",children:"Status"}),l.jsxs("select",{name:"status",className:"w-full",value:a.status,onChange:v=>o("status",v.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{value:"draft",children:"Draft"}),l.jsx("option",{value:"publish",children:"Publish"})]}),l.jsx(w,{message:s.status,className:"mt-2"})]})}),l.jsx("div",{className:"form-item mb-4",children:l.jsxs("div",{className:"categories",children:[l.jsx("p",{className:"text-xl font-bold mb-3 font-dmsans",children:"Categories"}),l.jsx("div",{className:"categories-items border p-4 rounded",children:r.length&&r.map((v,C)=>l.jsx("div",{className:"",children:l.jsxs("label",{className:"pb-3 block",children:[l.jsx("input",{type:"checkbox",name:"categories[]",value:v.id,className:"rounded w-5 h-5",onChange:E=>x("categories",E.target.value)}),l.jsx("span",{className:"pl-2 font-dmsans font-medium",children:v.title})]})},C))})]})}),l.jsx("div",{className:"form-item mb-4",children:l.jsxs("div",{className:"tags",children:[l.jsx("p",{className:"text-xl font-bold mb-3 font-dmsans",children:"Tags"}),l.jsx("div",{className:"categories-items border p-4 rounded",children:i.length&&i.map((v,C)=>l.jsx("div",{className:"",children:l.jsxs("label",{className:"pb-3 block",children:[l.jsx("input",{type:"checkbox",name:"tags[]",value:v.id,className:"rounded w-5 h-5",onChange:E=>x("tags",E.target.value)}),l.jsx("span",{className:"pl-2 font-dmsans font-medium",children:v.title})]})},C))})]})}),l.jsx("div",{className:"form-item mb-4",children:l.jsxs("div",{className:"featured-image",children:[l.jsx("p",{className:"text-xl font-bold mb-3 font-dmsans",children:"Featured Image"}),l.jsxs("div",{className:"categories-items border p-4 rounded",children:[l.jsx("img",{src:p}),l.jsx("input",{type:"file",name:"featureImage",hidden:!0,onChange:b,ref:m,value:""}),l.jsx("a",{className:"bg-transparent cursor-pointer",onClick:y,children:"Set Featured Image"})]})]})}),l.jsx("div",{className:"form-item",children:l.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-bold rounded font-dmsans",children:"Submit"})})]})})]})})})})]})]})}export{ce as default};
