import{G as F,r,j as e,S as R}from"./app-DcU-pHgi.js";import{A as T}from"./AuthenticatedLayout-YxBYr9wt.js";import{T as D,v as L,G as B,m as G,s as P,c as U}from"./convertToHtml-BFzpexCS.js";import{I as o}from"./InputLabel-DjsQ3LyN.js";import{I as A}from"./InputError-C7fk62VO.js";import"./index-D3gu5DKJ.js";import"./index-BarBPuyi.js";import"./index-x9q-pVUo.js";import"./index-Di9WJGrQ.js";import"./iconBase-8fZdkZtg.js";import"./Dropdown-BEzsTaq8.js";import"./transition-C-BcvKEz.js";import"./index-C6XVj9fJ.js";function _({auth:c,categories:f,tags:h}){const{data:i,setData:a,post:b,processing:u,errors:l}=F({title:"",content:"",slug:"",categories:[],tags:[],featureImage:null,status:"draft"}),[d,j]=r.useState(""),[v,N]=r.useState(""),n=r.useRef(null),x=r.useRef(null),[M,y]=r.useState(""),w=()=>{n.current=new D({holder:"editorjs",tools:{header:L,list:B,embed:G,inlineCode:P},onChange:async()=>{const s=await n.current.save(),t=U(s,d);j(t)},placeholder:"Start writing your blog here..."})};r.useEffect(()=>{a("content",d)},[d]),r.useEffect(()=>(w(),()=>{n.current&&(n.current.destroy(),n.current=null)}),[]);const C=async s=>{s.preventDefault(),b(route("admin.blogs.store"))},p=(s,t)=>{const{value:g,checked:k}=t.target;if(k){const m=i[s];a(s,[...m,g])}else{const m=i[s].filter(E=>E!==g);a(s,m)}},I=s=>{x.current.click()},S=s=>{const t=URL.createObjectURL(s.target.files[0]);a("featureImage",s.target.files[0]),y(s.target.files[0].name),N(t)};return e.jsxs(T,{user:c==null?void 0:c.user,children:[e.jsx(R,{title:"Write a New Blog"}),e.jsx("div",{className:"py-6 px-4 bg-gray-100",children:e.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b pb-4 mb-6",children:e.jsx("h1",{className:"text-3xl font-semibold text-gray-800",children:"Write a New Blog"})}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("input",{type:"text",className:"w-full text-2xl font-semibold border-b-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Blog Title",value:i.title,onChange:s=>a("title",s.target.value)}),l.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.title})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{id:"editorjs",className:"border rounded-lg p-4 bg-gray-50 min-h-[300px]"}),l.content&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.content})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(o,{value:"Slug",className:"mb-1 font-poppins font-semibold"}),e.jsx("input",{type:"text",className:"w-full text-lg border p-2 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"Slug (URL)",value:i.slug,onChange:s=>a("slug",s.target.value)}),l.slug&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.slug})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(o,{value:"Categories",className:"mb-1 font-poppins font-semibold"}),e.jsx("div",{className:"flex flex-wrap gap-4 mt-2",children:f.map(s=>e.jsxs("label",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx("input",{type:"checkbox",value:s.id,onChange:t=>p("categories",t),className:"text-blue-500 focus:ring-blue-500"}),e.jsx("span",{children:s.title})]},s.id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(o,{value:"Tags",className:"mb-1 font-poppins font-semibold"}),e.jsx("div",{className:"flex flex-wrap gap-4 mt-2",children:h.map(s=>e.jsxs("label",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx("input",{type:"checkbox",value:s.id,onChange:t=>p("tags",t),className:"text-blue-500 focus:ring-blue-500"}),e.jsx("span",{children:s.title})]},s.id))})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"featured-image",children:[e.jsx(o,{value:"Featured Image",className:"mb-1 font-poppins font-semibold"}),e.jsxs("div",{className:"categories-items border p-4 rounded-md",children:[e.jsx("img",{src:v}),e.jsx("input",{type:"file",name:"featureImage",hidden:!0,onChange:S,ref:x,value:""}),e.jsx("a",{className:"bg-transparent cursor-pointer",onClick:I,children:"Set Featured Image"}),e.jsx(A,{message:l.featureImage,className:"mt-2"})]})]})})}),e.jsx("div",{className:"mb-6",children:e.jsxs("select",{className:"w-full border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:i.status,onChange:s=>a("status",s.target.value),children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"publish",children:"Publish"})]})}),e.jsx("div",{className:"text-right",children:e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-6 py-2 rounded-md hover:bg-blue-600 focus:outline-none",disabled:u,children:u?"Saving...":"Publish"})})]})]})})]})}export{_ as default};
