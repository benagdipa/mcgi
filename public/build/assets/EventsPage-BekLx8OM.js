import{r as o,W as ae,j as e,a as ne,d as L,R as P,f as te}from"./app-BvXEw8yf.js";import{I as j}from"./InputError-l8pMkOc5.js";import{I as v}from"./InputLabel-_cOqDJZu.js";import{M as le}from"./Modal-D9dycMKu.js";import{T as h}from"./TextInput-jCH1Hsn6.js";import{G as re,I as ce}from"./GuestLayout-BoCVmVNU.js";import{I as W}from"./IconX-DDrGh4AL.js";import{c as O}from"./Dropdown-B0-UuBhz.js";import"./transition-DvpPHKVH.js";/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var de=O("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oe=O("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);function Ne({auth:l,events:i}){var k,C,I,E,_,D,T,$,A;const z=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],[H,g]=o.useState(!1),[U,N]=o.useState(""),[r,b]=o.useState([]),[w,u]=o.useState(!1),[m,y]=o.useState(""),[q,S]=o.useState(""),R=function(s=6){return Math.random().toString(36).substring(2,s+2)},{data:n,setData:x,post:K,processing:ie,errors:p,reset:X}=ae({event_id:"",attendenceRows:[{id:R(),name:(k=l.user)!=null&&k.first_name?((C=l.user)==null?void 0:C.first_name)+" "+((I=l.user)==null?void 0:I.last_name):"",email:(E=l.user)!=null&&E.email?(_=l.user)==null?void 0:_.email:"",phone:(D=l.user)!=null&&D.phone?(T=l.user)==null?void 0:T.phone:""}]}),B=()=>{const s={id:R(),name:"",email:"",phone:""};x("attendenceRows",[...n.attendenceRows,s])},J=s=>{x("attendenceRows",n.attendenceRows.filter(a=>a.id!==s))},Q=s=>{x("event_id",s),S(i.filter(a=>a.id===s)[0].title),g(!0)},M=()=>{X(),S(""),g(!1),y("")},V=async s=>{if(N(s.target.value),s.target.value.length>=3){u(!0);const a=await te.post(route("api.search.user"),{query:s.target.value});a!=null&&a.data.length&&b(a.data)}else u(!1),b([])},Y=s=>{const a=n.attendenceRows.map(t=>t.id===n.attendenceRows[n.attendenceRows.length-1].id?{...t,name:s.first_name+" "+s.last_name,email:s.email,phone:s.phone}:t);x("attendenceRows",a),N(""),u(!1)},f=(s,a,t)=>{const c=n.attendenceRows.map(d=>d.id===s?{...d,[a]:t}:d);x("attendenceRows",c)},Z=s=>{s.preventDefault(),K(route("event.attendence.store"),{preserveScroll:!0,onSuccess:()=>{y("Attendance Marked Successfully")}})};function ee(s,a){const t=new Date(s),c=new Date(a),d=t.toLocaleString("default",{month:"long",day:"numeric"}),se=c.toLocaleString("default",{month:"long",day:"numeric"}),F=t.toLocaleString("default",{hour:"numeric",minute:"numeric",hour12:!0}),G=c.toLocaleString("default",{hour:"numeric",minute:"numeric",hour12:!0});return t.toDateString()===c.toDateString()?`${d} @ ${F} - ${G}`:`${d} @ ${F} - ${se} @ ${G}`}return e.jsxs(re,{user:l==null?void 0:l.user,children:[e.jsxs(ne,{children:[e.jsx("title",{children:"Members Church of God International Calendar of Events"}),e.jsx("meta",{name:"title",content:"Members Church of God International Calendar of Events"}),e.jsx("meta",{name:"keywords",content:"Events"}),e.jsx("meta",{name:"descriptions",content:"Keep updated with the schedule of Church Services and forthcoming Events of the Members Church of God International (MCGI). Add important dates to your Google calendar for reminders."})]}),e.jsxs("div",{className:"events-page",children:[e.jsx("div",{className:"page-header pt-80 pb-28 ",children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"max-w-screen-xl mx-auto",children:[e.jsx("h1",{className:"font-bold text-7xl text-white",children:"Events"}),e.jsx("div",{className:"breadcrumbs pt-5",children:e.jsxs("div",{className:"flex gap-4 font-semibold uppercase font-dmsans text-white",children:[e.jsx("div",{className:"item",children:e.jsx(L,{href:route("home"),className:"breadcrumb-link",children:"HOME"})}),e.jsx("div",{className:"divider",children:" | "}),e.jsx("div",{className:"item",children:e.jsx(L,{href:route("events.index"),className:"breadcrumb-link text-gray-200",children:"Events"})})]})})]})})}),e.jsx("div",{className:"w-full mt-16",children:e.jsx("div",{className:"max-w-screen-xl mx-auto",children:e.jsx("div",{className:"events-list-wrapper",children:e.jsxs("div",{className:"monthly-events",children:[e.jsxs("div",{className:"flex items-center relative",children:[e.jsx("span",{className:"w-32 font-bold text-xl font-dmsans",children:"April 2024"}),e.jsx("span",{className:"block border-t h w-full border-black"})]}),e.jsx("div",{className:"events my-12",children:i.length>0&&(i==null?void 0:i.map((s,a)=>{const t=new Date(s==null?void 0:s.start_date),c=t.getDay();return e.jsx(P.Fragment,{children:e.jsx("div",{className:"event-wrapper mb-8",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"date basis-1/12",children:e.jsx("div",{className:"text-center font-dmsans",children:e.jsxs("p",{className:"text-lg text-black",children:[z[c]," ",e.jsx("span",{className:"block text-4xl font-bold",children:t.getDate()})]})})}),e.jsx("div",{className:"event-content basis-11/12",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"w-full",children:[e.jsx("span",{className:"font-dmsans",children:ee(s==null?void 0:s.start_date,s==null?void 0:s.end_date)}),e.jsx("h1",{className:"font-marcellus font-semibold text-4xl uppercase mt-2 leading-snug",children:s==null?void 0:s.title}),e.jsxs("div",{className:"mt-4 text-gray-500 text-base",children:[e.jsxs("div",{className:"font-dmsans mb-3 flex items-center gap-1",children:[e.jsx("span",{children:e.jsx(ce,{strokeWidth:2,size:16})}),s==null?void 0:s.address]}),e.jsx("div",{dangerouslySetInnerHTML:{__html:s==null?void 0:s.content}})]}),e.jsx("div",{className:"text-right",children:e.jsx("button",{className:"bg-yellow-500 px-6 py-3 rounded font-dmsans font-semibold mt-6",onClick:()=>Q(s==null?void 0:s.id),children:"Mark Attendance"})})]})})})]})})},s==null?void 0:s.id)}))})]})})})})]}),e.jsx(le,{show:H,onClose:M,maxWidth:"xxl",children:e.jsxs("div",{className:"attendance-modal px-6 py-8 relative font-poppins",children:[e.jsxs("h1",{className:"font-bold text-3xl",children:[q," Attendance"]}),e.jsx("div",{className:"absolute -top-8 -right-8 text-white cursor-pointer",children:e.jsx(W,{strokeWidth:1.5,size:38,onClick:M})}),e.jsxs("div",{className:"gap-2 pt-6",children:[e.jsxs("div",{className:"search-wrapper relative",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{placeholder:"Search by User Email/Name...",className:"w-full",value:U,onChange:s=>{V(s)}}),e.jsx("div",{className:"icon absolute right-2",children:e.jsx(oe,{color:"silver"})})]}),e.jsxs("div",{className:"search-results absolute bg-gray-50 w-full rounded shadow-xl z-50",children:[w&&(r==null?void 0:r.length)>0&&(r==null?void 0:r.map((s,a)=>e.jsx(P.Fragment,{children:e.jsxs("div",{className:"py-3 px-2 border-b cursor-pointer",onClick:()=>{Y(s)},children:[e.jsxs("div",{className:"text-lg font-medium text-gray-600",children:[s==null?void 0:s.first_name," ",s==null?void 0:s.last_name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[`${s==null?void 0:s.email},`," ",s==null?void 0:s.phone]})]})},s==null?void 0:s.id))),w&&(r==null?void 0:r.length)===0&&e.jsx("div",{className:"py-4 px-2 text-center font-medium",children:e.jsx("p",{children:"No User Found"})})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("form",{onSubmit:Z,children:[e.jsxs("div",{className:"w-full",children:[(($=n==null?void 0:n.attendenceRows)==null?void 0:$.length)>0&&((A=n==null?void 0:n.attendenceRows)==null?void 0:A.map((s,a)=>e.jsxs("div",{className:"flex gap-4 mb-6 items-center",children:[e.jsxs("div",{className:"w-1/3",children:[e.jsx(v,{value:"Full Name",className:"mb-1 font-poppins font-semibold"}),e.jsx(h,{type:"text",className:"w-full",placeholder:"Name...",value:s==null?void 0:s.name,onChange:t=>f(s.id,"name",t.target.value)}),e.jsx(j,{message:p[`attendenceRows.${a}.name`],className:"absolute"})]}),e.jsxs("div",{className:"w-1/3",children:[e.jsx(v,{value:"Email Address",className:"mb-1 font-poppins font-semibold"}),e.jsx(h,{type:"email",className:"w-full",placeholder:"Email Address...",value:s==null?void 0:s.email,onChange:t=>f(s.id,"email",t.target.value)}),e.jsx(j,{message:p[`attendenceRows.${a}.email`],className:"absolute"})]}),e.jsxs("div",{className:"w-1/3",children:[e.jsx(v,{value:"Phone",className:"mb-1 font-poppins font-semibold"}),e.jsx(h,{type:"text",className:"w-full",placeholder:"Phone...",value:s==null?void 0:s.phone,onChange:t=>f(s.id,"phone",t.target.value)}),e.jsx(j,{message:p[`attendenceRows.${a}.phone`],className:"absolute"})]}),e.jsx("div",{className:"btn-wrapper px-3 pt-5 cursor-pointer",children:a===(n==null?void 0:n.attendenceRows.length)-1?e.jsx(de,{onClick:()=>B()}):e.jsx(W,{onClick:()=>J(s.id)})})]},a))),e.jsx("input",{type:"hidden",name:"event_id",value:n==null?void 0:n.event_id})]}),e.jsx("div",{className:"mt-6 text-right",children:e.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-semibold rounded font-xl",disabled:!!m,children:"Submit"})})]}),m&&e.jsx("div",{className:"border rounded border-green-300 mt-6 px-6 py-2",children:m})]})]})]})})]})}export{Ne as default};
