import{X,r,G,j as e,S as H,x as E,R as q}from"./app-D5i-Ento.js";import{C as J}from"./Checkbox-D808XZEc.js";import{I as K}from"./InputError-BGxhihvN.js";import{I as o}from"./InputLabel-DrZktnZv.js";import{M as k}from"./Modal-B3HdYqhz.js";import{T as O}from"./TextInput-D3mhTOhG.js";import{A as Q,i as Y}from"./AuthenticatedLayout-B6xsQrlE.js";import{r as f}from"./index-Bq4i5zaX.js";import{I as A}from"./IconX-Bt6HRUyu.js";import"./transition-BUwCjrX6.js";import"./Dropdown-DP8ZFciO.js";import"./index-BarBPuyi.js";import"./index-D7b3aihJ.js";function pe({auth:h,roles:c}){const{role:I,permissions:R}=X().props.auth,T=["SN","Role Name","Actions"],[_,m]=r.useState(!1),[M,g]=r.useState(!1),[D,u]=r.useState(""),[n,j]=r.useState(""),[b,v]=r.useState(""),{data:p,setData:d,post:y,processing:L,errors:P,reset:w,delete:B}=G({name:"",permissions:[]}),F=[{name:"Blog Posts",items:["create","edit","delete"]},{name:"Categories",items:["create","edit","delete"]},{name:"Tags",items:["create","edit","delete"]},{name:"Events",items:["create","edit","delete"]},{name:"Users",items:["create","edit","delete"]},{name:"Locale",items:["create","edit","delete"]},{name:"Church Locations",items:["create","edit","delete"]},{name:"Albums",items:["create","edit","delete"]},{name:"Email Templates",items:["create","edit","delete"]},{name:"Roles",items:["create","edit","delete"]},{name:"Banners",items:["create","edit","delete"]},{name:"Event Forms",items:["create","edit","delete"]}],N=(s,i=0)=>{if(i!==0&&v(i),s==="add")u("Add New"),j("_add");else if(s==="view"){const t=c.filter(l=>l.id===i);d({...t[0]}),u("View"),j("_view")}else if(s==="edit"){const t=c.filter(l=>l.id===i);d({...t[0]}),u("Edit"),j("_edit")}m(!0)},C=()=>{m(!1)},W=s=>{const{checked:i,value:t}=s.target;if(i){const l=p.permissions;d("permissions",[...l,t])}else{const l=p.permissions.filter(a=>a!==t);d("permissions",l)}},$=s=>{s.preventDefault(),n==="_add"?y(route("admin.roles.store"),{preserveScroll:!0,onSuccess:()=>{w(),m(!1)}}):n==="_edit"&&y(route("admin.roles.update",b),{onSuccess:()=>{w(),m(!1)}})},z=s=>{v(s),g(!0)},x=()=>{g(!1)},U=()=>{b&&B(route("admin.roles.delete",b),{onSuccess:()=>{x()}})};return e.jsxs(Q,{user:h==null?void 0:h.user,children:[e.jsx(H,{title:"Roles & Permissions"}),e.jsxs("div",{className:"content py-4 font-poppins",children:[e.jsxs("div",{className:"content-header px-6 flex justify-between items-center",children:[e.jsxs("div",{className:"left",children:[e.jsx("h1",{className:"font-semibold text-gray-800 text-3xl",children:"Roles & Permissions"}),e.jsx("div",{className:"pt-2",children:e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(E,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(E,{href:route("admin.roles.index"),children:"Roles"})})]})})]}),e.jsx("div",{className:"right",children:e.jsx("button",{className:"bg-[#f5cd06] shadow-lg text-[#0f0f0f] px-5 py-3 rounded-md font-semibold text-lg font-poppins",onClick:()=>{N("add")},children:"Add New"})})]}),e.jsx("div",{className:"page-content pt-8",children:e.jsx(f.Card,{className:"h-full w-full overflow-scroll rounded-none font-poppins",children:e.jsxs("table",{className:"w-full min-w-max table-auto text-left font-poppins",children:[e.jsx("thead",{children:e.jsx("tr",{children:T.map(s=>e.jsx("th",{className:"border-b border-blue-gray-100 bg-blue-gray-50 p-4",children:e.jsx(f.Typography,{className:"font-semibold text-lg leading-none opacity-70 font-poppins",children:s})},s))})}),e.jsx("tbody",{children:c.map(({id:s,name:i},t)=>{const a=t===c.length-1?"p-4":"p-4 border-b border-blue-gray-50";return e.jsxs("tr",{children:[e.jsx("td",{className:a,children:e.jsx(f.Typography,{className:"font-medium font-poppins",children:`${t+1}`})}),e.jsx("td",{className:a,children:e.jsx(f.Typography,{className:"font-medium font-poppins",children:`${i}`})}),e.jsx("td",{className:a,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-0 text-sm font-medium font-poppins",onClick:()=>{N("view",s)},children:"View"}),e.jsx("button",{className:"px-0 text-sm font-medium font-poppins",onClick:()=>{N("edit",s)},children:"Edit"}),Y(R,["delete_roles"],I)&&e.jsx("button",{className:"text-red-500 px-0 text-sm font-medium font-poppins",onClick:()=>{z(s)},children:"Delete"})]})})]},s)})})]})})})]}),e.jsx(k,{show:_,onClose:C,maxWidth:"2xl",children:e.jsxs("div",{className:"delete-modal px-6 py-8 relative font-poppins",children:[e.jsxs("h1",{className:"font-bold text-2xl font-poppins",children:[D," Role"]}),e.jsx("div",{className:"absolute -top-8 -right-8 text-white cursor-pointer",children:e.jsx(A,{strokeWidth:1.5,size:38,onClick:C})}),e.jsx("div",{className:"modal-content pt-6",children:e.jsxs("form",{onSubmit:$,children:[e.jsxs("div",{className:"form-item mb-8",children:[e.jsx(o,{value:"Role Name",className:"mb-1 font-poppins font-semibold"}),e.jsx(O,{id:"name",type:"text",name:"name",className:"w-full rounded-md font-poppins",placeholder:"Role Name...",value:p.name,onChange:s=>d("name",s.target.value),disabled:n==="_view"}),e.jsx(K,{message:P.name,className:"mt-2"})]}),e.jsxs("div",{className:"form-item mb-8",children:[e.jsxs("div",{className:"grid grid-cols-3 mb-4",children:[e.jsx(o,{value:"Permissions",className:"mb-1 text-lg font-poppins font-semibold col-span-2"}),e.jsxs("div",{className:"grid grid-cols-3 gap-1 ",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(o,{value:"Create",className:"mb-1 text-lg font-poppins font-semibold"})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(o,{value:"Edit",className:"mb-1 text-lg font-poppins font-semibold"})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(o,{value:"Delete",className:"mb-1 text-lg font-poppins font-semibold"})})]})]}),e.jsx("div",{className:"permission-wrapper",children:F.map(({name:s,items:i},t)=>e.jsx(q.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-3 mb-5",children:[e.jsx(o,{value:s,className:"mb-1 font-poppins font-medium col-span-2"}),e.jsx("div",{className:"grid grid-cols-3 gap-1 items-center justify-center",children:i.map((l,a)=>{const S=`${l}_${s.toLowerCase().replace(/ /g,"_")}`;return e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(J,{className:"w-6 h-6 focus:ring-0",value:S,onChange:V=>W(V),checked:p.permissions.includes(S),disabled:n==="_view"})},a)})})]})},t))})]}),e.jsx("input",{type:"hidden",name:"type",value:n}),n!=="_view"&&e.jsx("div",{className:"font-item mb-4 text-right",children:e.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-poppins rounded-sm font-bold",disabled:L,children:"Submit"})})]})})]})}),e.jsx(k,{show:M,onClose:x,maxWidth:"xl",children:e.jsxs("div",{className:"delete-modal px-6 py-8 relative font-poppins",children:[e.jsx("h1",{className:"font-bold text-3xl text-center",children:"Are you sure ?"}),e.jsx("div",{className:"absolute -top-8 -right-8 text-white cursor-pointer",children:e.jsx(A,{strokeWidth:1.5,size:38,onClick:x})}),e.jsxs("div",{className:"flex justify-center gap-2 pt-6",children:[e.jsx("button",{className:"bg-red-500 text-white px-4 py-3 font-semibold rounded",onClick:x,children:"Cancel"}),e.jsx("button",{className:"bg-blue-500 text-white px-4 py-3 font-semibold rounded",onClick:U,children:"Confirm"})]})]})})]})}export{pe as default};
