import{W as R,r as c,j as e,a as B,d as j}from"./app-BkdyvR56.js";import{T as b,I as d}from"./TextInput-qABIZOKA.js";import{I as n}from"./InputLabel-dwb69fpy.js";import{A as D}from"./AuthenticatedLayout-BsBiKPyI.js";import{E as L}from"./Editor-C1A_Klh9.js";import"./index-C9SLx5nD.js";import"./Dropdown-6K64pmeB.js";import"./transition-DStwG57P.js";function z({auth:m,item:a,categories:p,tags:h}){const{data:t,setData:i,post:v,processing:N,errors:o,reset:T}=R({title:a.title,slug:a.slug,content:a.content,categories:a!=null&&a.categories?a.categories.split(","):[],tags:a!=null&&a.tags?a.tags.split(","):[],featureImage:null,status:a.status});console.log("errors",o);const x=c.useRef(null),[k,w]=c.useState(a.featured_image),[_,y]=c.useState(""),g=c.useRef(null);c.useEffect(()=>{const l=(t==null?void 0:t.title).replace(/\s+/g,"-").toLowerCase();i("slug",l)},[t.title]);const C=s=>{g.current.click()},I=s=>{const l=URL.createObjectURL(s.target.files[0]);i("featureImage",s.target.files[0]),y(s.target.files[0].name),w(l)},f=(s,l)=>{const{value:r,checked:E}=l.target;if(E){const u=t[s];i(s,[...u,r])}else{const u=t[s].filter(F=>F!==r);i(s,u)}},S=s=>{s.preventDefault(),v(route("admin.blogs.update",a.id))};return e.jsxs(D,{user:m==null?void 0:m.user,children:[e.jsx(B,{title:"Edit blog"}),e.jsxs("div",{className:"content py-4 font-poppins",children:[e.jsx("div",{className:"content-header px-6 flex justify-between items-center",children:e.jsxs("div",{className:"left",children:[e.jsx("h1",{className:"font-semibold text-gray-800 text-3xl",children:"Edit Blog"}),e.jsx("div",{className:"pt-2",children:e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(j,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(j,{href:route("admin.blogs.index"),children:"Blogs"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:"Edit Blog"})]})})]})}),e.jsx("div",{className:"page-content pt-8",children:e.jsx("div",{className:"form-wrapper px-6",children:e.jsx("form",{onSubmit:S,children:e.jsxs("div",{className:"flex md:flex-row flex-col gap-6",children:[e.jsxs("div",{className:"md:w-9/12",children:[e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(n,{value:"Title",className:"mb-1 font-poppins font-semibold"}),e.jsx(b,{name:"title",value:t.title,onChange:s=>i("title",s.target.value),className:"w-full rounded-md font-poppins"}),e.jsx(d,{message:o.title,className:"mt-2"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(n,{value:"Slug",className:"mb-1 font-poppins font-semibold"}),e.jsx(b,{name:"slug",value:t.slug,onChange:s=>i("slug",s.target.value),className:"w-full rounded-md font-poppins"}),e.jsx(d,{message:o.slug,className:"mt-2"})]}),e.jsxs("div",{className:"form-item",children:[e.jsx(n,{value:"Content",className:"mb-1 font-poppins font-semibold"}),e.jsxs("div",{className:"custom-ckeditor",style:{height:"400px"},children:[e.jsx(L,{apiKey:"h9mpgdcvlxaa94b8rwqpagapahot2x6w7urfs0dtyswd2qtj",onInit:(s,l)=>{x.current=l},onChange:()=>i("content",x.current.getContent()),initialValue:t.content,init:{height:800,menubar:!1,plugins:["a11ychecker","advlist","advcode","advtable","autolink","checklist","export","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","powerpaste","fullscreen","formatpainter","insertdatetime","media","table","help","wordcount"],toolbar:"undo redo | casechange blocks | bold italic backcolor | image media| alignleft aligncenter alignright alignjustify | bullist numlist checklist outdent indent | removeformat | a11ycheck code table help",images_upload_url:"upload.php",automatic_uploads:!1}}),e.jsx(d,{message:o.content,className:"mt-2"})]})]})]}),e.jsx("div",{className:"md:w-3/12",children:e.jsxs("div",{className:"border rounded p-4",children:[e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"status",children:[e.jsx(n,{value:"Status",className:"mb-1 font-poppins font-semibold"}),e.jsxs("select",{name:"status",className:"w-full border-gray-300 rounded-md font-poppins focus:border-yellow-500 focus:ring-0",value:t.status,onChange:s=>i("status",s.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"publish",children:"Publish"})]}),e.jsx(d,{message:o.status,className:"mt-2"})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"categories",children:[e.jsx(n,{value:"Categories",className:"mb-1 font-poppins font-semibold"}),e.jsx("div",{className:"categories-items border p-4 rounded",children:p.length&&p.map((s,l)=>e.jsx("div",{className:"",children:e.jsxs("label",{className:"pb-3 block",children:[e.jsx("input",{type:"checkbox",name:"categories[]",value:s.id,className:"rounded w-5 h-5",onChange:r=>f("categories",r),checked:t.categories.includes(s.id.toString())}),e.jsx("span",{className:"pl-2 font-poppins font-medium",children:s.title})]})},l))})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"tags",children:[e.jsx(n,{value:"Tags",className:"mb-1 font-poppins font-semibold"}),e.jsx("div",{className:"categories-items border p-4 rounded",children:h.length&&h.map((s,l)=>e.jsx("div",{className:"",children:e.jsxs("label",{className:"pb-3 block",children:[e.jsx("input",{type:"checkbox",name:"tags[]",value:s.id,className:"rounded w-5 h-5",onChange:r=>f("tags",r),checked:t.tags.includes(s.id.toString())}),e.jsx("span",{className:"pl-2 font-poppins font-medium",children:s.title})]})},l))})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"featured-image",children:[e.jsx(n,{value:"Featured Image",className:"mb-1 font-poppins font-semibold"}),e.jsxs("div",{className:"categories-items border p-4 rounded",children:[e.jsx("img",{src:k}),e.jsx("input",{type:"file",name:"featureImage",hidden:!0,onChange:I,ref:g,value:""}),e.jsx("a",{className:"bg-transparent cursor-pointer",onClick:C,children:"Set Featured Image"})]})]})}),e.jsx("div",{className:"form-item",children:e.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-bold rounded font-poppins",disabled:N,children:"Submit"})})]})})]})})})})]})]})}export{z as default};
