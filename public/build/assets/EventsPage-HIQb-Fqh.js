import{r as c,W as Q,j as e,a as U,d as F,R as V,y as Z}from"./app-BhZLC25x.js";import{I as p}from"./InputError-Cjc2oAMi.js";import{I as h}from"./InputLabel-D1IpANmR.js";import{M as ee}from"./Modal-ZIMcOi8e.js";import{T as g}from"./TextInput-CJs1kpZr.js";import{G as se,I as ae}from"./GuestLayout-6FoxiNR_.js";import{r as i}from"./index-B4-GeKVY.js";import{p as ne,r as le}from"./getYear-D3p9g98d.js";import{I as L}from"./IconX-F45OlE_I.js";import{c as te}from"./Dropdown--TJlNfio.js";import"./transition-CcuGmUTa.js";import"./index-AikwbH8i.js";/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var re=te("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);function ve({auth:l,events:m,locale:f}){var R,M,S,C,_,I,$,k,D,E,T;const P=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],[W,b]=c.useState(!1);c.useState(""),c.useState([]),c.useState(!1);const[j,v]=c.useState(""),[O,N]=c.useState(""),w=function(s=6){return Math.random().toString(36).substring(2,s+2)},{data:t,setData:u,post:K,processing:oe,errors:x,reset:z}=Q({event_id:"",attendenceRows:[{id:w(),name:(R=l.user)!=null&&R.first_name?((M=l.user)==null?void 0:M.first_name)+" "+((S=l.user)==null?void 0:S.last_name):"",email:(C=l.user)!=null&&C.email?(_=l.user)==null?void 0:_.email:"",phone:(I=l.user)!=null&&I.phone?($=l.user)==null?void 0:$.phone:"",locale:(k=l.user)!=null&&k.local?(D=l.user)==null?void 0:D.local:"",type:""}]}),H=()=>{const s={id:w(),name:""};u("attendenceRows",[...t.attendenceRows,s])},X=s=>{u("attendenceRows",t.attendenceRows.filter(a=>a.id!==s))},Y=s=>{l!=null&&l.user?(u("event_id",s),N(m.filter(a=>a.id===s)[0].title),b(!0)):Z.visit(route("login",{event_message:"only registered users are able to enter attendance"}))},y=()=>{z(),N(""),b(!1),v("")},o=(s,a,n)=>{const r=t.attendenceRows.map(d=>d.id===s?{...d,[a]:n}:d);u("attendenceRows",r)},q=s=>{s.preventDefault(),K(route("event.attendence.store"),{preserveScroll:!0,onSuccess:()=>{v("Attendance Marked Successfully")}})};function B(s,a){const n=new Date(s),r=new Date(a),d=n.toLocaleString("default",{month:"long",day:"numeric"}),J=r.toLocaleString("default",{month:"long",day:"numeric"}),G=n.toLocaleString("default",{hour:"numeric",minute:"numeric",hour12:!0}),A=r.toLocaleString("default",{hour:"numeric",minute:"numeric",hour12:!0});return n.toDateString()===r.toDateString()?`${d} @ ${G} - ${A}`:`${d} @ ${G} - ${J} @ ${A}`}return e.jsxs(se,{user:l==null?void 0:l.user,children:[e.jsxs(U,{children:[e.jsx("title",{children:"Members Church of God International Calendar of Events"}),e.jsx("meta",{name:"title",content:"Members Church of God International Calendar of Events"}),e.jsx("meta",{name:"keywords",content:"Events"}),e.jsx("meta",{name:"descriptions",content:"Keep updated with the schedule of Church Services and forthcoming Events of the Members Church of God International (MCGI). Add important dates to your Google calendar for reminders."})]}),e.jsxs("div",{className:"events-page",children:[e.jsx("div",{className:"page-header pt-20 xl:pt-80 pb-28 ",children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:" lg:max-w-screen-xl w-11/12 mx-auto",children:[e.jsx("h1",{className:"font-bold text-7xl text-white",children:"Events"}),e.jsx("div",{className:"breadcrumbs pt-5",children:e.jsxs("div",{className:"flex gap-4 font-semibold uppercase font-dmsans text-white",children:[e.jsx("div",{className:"item",children:e.jsx(F,{href:route("home"),className:"breadcrumb-link",children:"HOME"})}),e.jsx("div",{className:"divider",children:" | "}),e.jsx("div",{className:"item",children:e.jsx(F,{href:route("events.index"),className:"breadcrumb-link text-gray-200",children:"Events"})})]})})]})})}),e.jsx("div",{className:"lg:w-full w-11/12 mx-auto mt-16",children:e.jsx("div",{className:"max-w-screen-xl mx-auto",children:e.jsx("div",{className:"events-list-wrapper",children:e.jsxs("div",{className:"monthly-events",children:[e.jsxs("div",{className:"flex items-center relative",children:[e.jsxs("span",{className:"w-32 font-bold text-xl font-dmsans",children:[`${ne(new Date,"MMMM")} ${le(new Date)}`," "]}),e.jsx("span",{className:"block border-t h w-full border-black"})]}),e.jsx("div",{className:"events my-12",children:m.length>0&&(m==null?void 0:m.map((s,a)=>{const n=new Date(s==null?void 0:s.start_date),r=n.getDay();return e.jsx(V.Fragment,{children:e.jsx("div",{className:"event-wrapper cursor-pointer border-b pt-6 pb-6",children:e.jsxs("div",{className:"flex  gap-4",children:[e.jsx("div",{className:"date basis-1/12",children:e.jsx("div",{className:"text-center font-dmsans",children:e.jsxs("p",{className:"text-lg text-black",children:[P[r]," ",e.jsx("span",{className:"block text-4xl font-bold",children:n.getDate()})]})})}),e.jsx("div",{className:"event-content basis-11/12",children:e.jsxs("div",{className:"flex flex-col md:flex-row flex-wrap",children:[e.jsxs("div",{className:"md:w-9/12 w-full",children:[e.jsx("span",{className:"font-dmsans",children:B(s==null?void 0:s.start_date,s==null?void 0:s.end_date)}),e.jsx("h1",{className:"font-marcellus font-semibold md:text-4xl text-2xl uppercase mt-2 leading-snug",children:s==null?void 0:s.title}),e.jsxs("div",{className:"mt-4 text-gray-500 text-base",children:[e.jsxs("div",{className:"font-dmsans mb-3 flex items-center gap-1",children:[e.jsx("span",{children:e.jsx(ae,{strokeWidth:2,size:16})}),s==null?void 0:s.address]}),e.jsx("div",{dangerouslySetInnerHTML:{__html:s==null?void 0:s.content}})]})]}),e.jsx("div",{className:"md:w-3/12 w-full",children:e.jsxs("div",{className:"flex flex-col ali md:justify-end items-end ",children:[s!=null&&s.featured_image?e.jsx("img",{src:s==null?void 0:s.featured_image,alt:s==null?void 0:s.title,className:"w-full"}):e.jsx("img",{src:"/images/logo.png",width:200,className:"w-full"}),(s==null?void 0:s.isImminent)&&e.jsx("p",{className:"mt-8 text-sm bg-yellow-500 px-4 py-3 font-semibold rounded-md",onClick:()=>Y(s==null?void 0:s.id),children:"Register Now"})]})})]})})]})})},s==null?void 0:s.id)}))})]})})})})]}),e.jsx(ee,{show:W,onClose:y,maxWidth:"xxl",children:e.jsxs("div",{className:"attendance-modal px-6 py-8 relative font-poppins",children:[e.jsxs("h1",{className:"font-bold text-3xl",children:[O," Attendance"]}),e.jsx("div",{className:"absolute md:-top-8 md:-right-8 top-0 right-0 md:text-white cursor-pointer",children:e.jsx(L,{strokeWidth:1.5,size:38,onClick:y})}),e.jsx("div",{className:"gap-2 pt-6",children:e.jsxs("div",{className:"mt-6",children:[e.jsxs("form",{onSubmit:q,children:[e.jsxs("div",{className:"w-full",children:[((E=t==null?void 0:t.attendenceRows)==null?void 0:E.length)>0&&((T=t==null?void 0:t.attendenceRows)==null?void 0:T.map((s,a)=>e.jsxs("div",{children:[a>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex -ml-3 gap-6",children:[e.jsx(i.Radio,{name:`participant_type_${a}`,color:"amber",label:e.jsx(i.Typography,{className:"font-semibold",children:"Member"}),className:"border-gray-900/10 bg-gray-900/5 p-0 transition-all hover:before:opacity-0",onChange:n=>o(s.id,"type","Member")}),e.jsx(i.Radio,{name:`participant_type_${a}`,color:"amber",label:e.jsx(i.Typography,{className:"font-semibold",children:"Guest"}),className:"border-gray-900/10 bg-gray-900/5 p-0 transition-all hover:before:opacity-0",onChange:n=>o(s.id,"type","Guest")}),e.jsx(i.Radio,{name:`participant_type_${a}`,color:"amber",label:e.jsx(i.Typography,{className:"font-semibold",children:"Kids/Teens"}),className:"border-gray-900/10 bg-gray-900/5 p-0 transition-all hover:before:opacity-0",onChange:n=>o(s.id,"type","Kids/Teens")})]}),e.jsx(p,{message:x[`attendenceRows.${a}.type`]})]}),e.jsxs("div",{className:"md:flex grid grid-rows-4 grid-flow-col gap-4 mb-6 items-center",children:[e.jsxs("div",{className:`${a!==0?"md:w-full":"md:w-1/4"}`,children:[e.jsx(h,{value:"Full Name",className:"mb-1 text-sm md:text-base font-poppins font-semibold"}),e.jsx(g,{type:"text",className:"w-full",placeholder:"Name...",value:s==null?void 0:s.name,onChange:n=>o(s.id,"name",n.target.value)}),e.jsx(p,{message:x[`attendenceRows.${a}.name`],className:"absolute"})]}),a===0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:w-1/4",children:[e.jsx(h,{value:"Email Address",className:"mb-1 text-sm md:text-base font-poppins font-semibold"}),e.jsx(g,{type:"email",className:"w-full",placeholder:"Email Address...",value:s==null?void 0:s.email,onChange:n=>o(s.id,"email",n.target.value)}),e.jsx(p,{message:x[`attendenceRows.${a}.email`],className:"absolute"})]}),e.jsxs("div",{className:"md:w-1/4",children:[e.jsx(h,{value:"Phone",className:"mb-1 text-sm md:text-base font-poppins font-semibold"}),e.jsx(g,{type:"text",className:"w-full",placeholder:"Phone...",value:s==null?void 0:s.phone,onChange:n=>o(s.id,"phone",n.target.value)}),e.jsx(p,{message:x[`attendenceRows.${a}.phone`],className:"absolute"})]}),e.jsxs("div",{className:"md:w-1/4",children:[e.jsx(h,{value:"Locale",className:"mb-1 text-sm md:text-base font-poppins font-semibold"}),e.jsxs("select",{name:"locale",className:"w-full border-gray-300 focus:border-yellow-500 focus:ring-0 rounded-md shadow-sm",value:s==null?void 0:s.locale,onChange:n=>o(s.id,"locale",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),f==null?void 0:f.map((n,r)=>e.jsx("option",{value:n.id,children:n.title},r))]}),e.jsx(p,{message:x[`attendenceRows.${a}.locale`],className:"absolute"})]})]}),e.jsx("div",{className:"btn-wrapper px-3 pt-5 cursor-pointer",children:a===(t==null?void 0:t.attendenceRows.length)-1?e.jsx(re,{onClick:()=>H()}):e.jsx(L,{onClick:()=>X(s.id)})})]})]},a))),e.jsx("input",{type:"hidden",name:"event_id",value:t==null?void 0:t.event_id})]}),e.jsx("div",{className:"mt-6 text-right",children:e.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-semibold rounded font-xl",disabled:!!j,children:"Submit"})})]}),j&&e.jsx("div",{className:"border rounded border-green-300 mt-6 px-6 py-2",children:j})]})})]})})]})}export{ve as default};
