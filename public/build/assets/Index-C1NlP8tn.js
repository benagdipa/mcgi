import{X as K,r as a,G as O,j as e,x as M}from"./app-w0IEpWMK.js";import{I as b}from"./InputError-HmndlaFC.js";import{I as g}from"./InputLabel-CT1d1wbI.js";import{M as D}from"./Modal-CR_I_o4j.js";import{T as I}from"./TextInput-DLzZAlxM.js";import{A as V}from"./AuthenticatedLayout-Cd-zlbp3.js";import{r as o}from"./index-Dmu-wpW7.js";import{R as _}from"./index-ARAgrf1D.js";import{E as X}from"./Editor-Cp2tXzia.js";import"./transition-BYFCo780.js";import"./Dropdown-D4bLCzeu.js";import"./index-BarBPuyi.js";import"./index-CwUCBAGj.js";function re({auth:m,templates:N}){const{flash:l,role:J,permissions:P}=K().props,L=["SN","Template Name","Subject","Actions"],v=N,[R,n]=a.useState(!1),[W,y]=a.useState(!1),[B,w]=a.useState(""),[p,E]=a.useState(""),[x,S]=a.useState(""),C=a.useRef(null),{data:u,setData:i,post:T,processing:F,errors:h,reset:f,delete:q}=O({name:"",subject:"",content:""}),k=(s,t=0)=>{if(t!==0&&S(t),s==="add")w("Add New"),E("_add");else if(s==="edit"){const j=N.filter(r=>r.id===t);i({...j[0]}),w("Edit"),E("_edit")}n(!0)},A=()=>{n(!1),f()},z=s=>{s.preventDefault(),p==="_add"?T(route("admin.email.store"),{preserveScroll:!0,onSuccess:()=>{f(),n(!1)}}):p==="_edit"&&T(route("admin.email.update",x),{onSuccess:()=>{f(),n(!1)}})},G=s=>{S(s),y(!0)},d=()=>{y(!1)},H=()=>{x&&q(route("admin.email.delete",x),{onSuccess:()=>{d()}})};return e.jsxs(V,{user:m==null?void 0:m.user,children:[e.jsxs("div",{className:"content py-4 font-poppins",children:[e.jsxs("div",{className:"content-header px-6 flex justify-between items-center",children:[e.jsxs("div",{className:"left",children:[e.jsx("h1",{className:"font-semibold text-gray-800 text-3xl",children:"Email Templates"}),e.jsx("div",{className:"pt-2",children:e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(M,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(M,{href:route("admin.email.index"),children:"Email Templates"})})]})})]}),e.jsx("div",{className:"right",children:e.jsx("button",{className:"bg-[#f5cd06] shadow-lg text-[#0f0f0f] px-5 py-3 rounded-md font-semibold text-lg font-poppins",onClick:()=>{k("add")},children:"Add New"})})]}),(l==null?void 0:l.message)&&e.jsx("div",{className:"font-poppins px-6 mt-4 text-red-400",children:l==null?void 0:l.message}),e.jsx("div",{className:"page-content pt-8",children:e.jsx(o.Card,{className:"h-full w-full overflow-scroll rounded-none font-poppins",children:e.jsxs("table",{className:"w-full min-w-max table-auto text-left font-poppins",children:[e.jsx("thead",{children:e.jsx("tr",{children:L.map(s=>e.jsx("th",{className:"border-b border-blue-gray-100 bg-blue-gray-50 p-4",children:e.jsx(o.Typography,{className:"font-semibold text-lg leading-none opacity-70 font-poppins",children:s})},s))})}),e.jsx("tbody",{children:v.map(({id:s,name:t,subject:j},r)=>{const c=r===v.length-1?"p-4":"p-4 border-b border-blue-gray-50";return e.jsxs("tr",{children:[e.jsx("td",{className:c,children:e.jsx(o.Typography,{className:"font-medium font-poppins",children:r+1})}),e.jsx("td",{className:c,children:e.jsx(o.Typography,{className:"font-medium font-poppins",children:t})}),e.jsx("td",{className:c,children:e.jsx(o.Typography,{className:"font-medium font-poppins",children:j})}),e.jsx("td",{className:c,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-0 text-sm font-medium font-poppins",onClick:()=>{k("edit",s)},children:"Edit"}),e.jsx("button",{className:"text-red-500 px-0 text-sm font-medium font-poppins",onClick:()=>{G(s)},children:"Delete"})]})})]},s)})})]})})})]}),e.jsx(D,{show:R,onClose:A,maxWidth:"xxl",children:e.jsxs("div",{className:"delete-modal px-6 py-8 relative font-poppins",children:[e.jsxs("h1",{className:"font-bold text-2xl font-poppins",children:[B," Email Template"]}),e.jsx("div",{className:"absolute -top-8 -right-8 text-white cursor-pointer",children:e.jsx(_,{strokeWidth:1.5,size:38,onClick:A})}),e.jsx("div",{className:"modal-content pt-6",children:e.jsxs("form",{onSubmit:z,children:[e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(g,{value:"Template Name",className:"mb-1 font-poppins font-semibold"}),e.jsx(I,{id:"title",type:"text",name:"name",className:"w-full rounded-md font-poppins",placeholder:"Name...",onChange:s=>i("name",s.target.value),value:u.name}),e.jsx(b,{message:h.name,className:"mt-2"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(g,{value:"Email Subject",className:"mb-1 font-poppins font-semibold"}),e.jsx(I,{id:"subject",type:"text",name:"subject",className:"w-full rounded-md font-poppins",placeholder:"Subject...",onChange:s=>i("subject",s.target.value),value:u.subject}),e.jsx(b,{message:h.subject,className:"mt-2"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(g,{value:"Email Body",className:"mb-1 font-poppins font-semibold"}),e.jsx(X,{apiKey:"h9mpgdcvlxaa94b8rwqpagapahot2x6w7urfs0dtyswd2qtj",onInit:(s,t)=>{C.current=t},onChange:()=>i("content",C.current.getContent()),initialValue:u.content,init:{height:450,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","fullscreen","insertdatetime","media","table","help","wordcount"],toolbar:"undo redo | casechange blocks | bold italic backcolor | image | alignleft aligncenter alignright alignjustify | bullist numlist checklist outdent indent | removeformat | a11ycheck code table help",images_upload_url:"upload.php",automatic_uploads:!1}}),e.jsx(b,{message:h.content,className:"mt-2"})]}),e.jsx("input",{type:"hidden",name:"type",value:p}),e.jsx("div",{className:"font-item mb-4 text-right",children:e.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-poppins rounded-sm font-bold",disabled:F,children:"Submit"})})]})})]})}),e.jsx(D,{show:W,onClose:d,maxWidth:"xl",children:e.jsxs("div",{className:"delete-modal px-6 py-8 relative font-poppins",children:[e.jsx("h1",{className:"font-bold text-3xl text-center",children:"Are you sure ?"}),e.jsx("div",{className:"absolute -top-8 -right-8 text-white cursor-pointer",children:e.jsx(_,{strokeWidth:1.5,size:38,onClick:d})}),e.jsxs("div",{className:"flex justify-center gap-2 pt-6",children:[e.jsx("button",{className:"bg-red-500 text-white px-4 py-3 font-semibold rounded",onClick:d,children:"Cancel"}),e.jsx("button",{className:"bg-blue-500 text-white px-4 py-3 font-semibold rounded",onClick:H,children:"Confirm"})]})]})})]})}export{re as default};
