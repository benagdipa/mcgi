import{q as U,r as a,W as X,j as e,d as M}from"./app-BbtY_rIe.js";import{I as b}from"./InputError-C3OjzIqp.js";import{I as N}from"./InputLabel-B9LP_WmE.js";import{M as _}from"./Modal-Jd0s4SbG.js";import{T as E}from"./TextInput-BN3SDsck.js";import{A as G,i as J}from"./AuthenticatedLayout-A-TCYLeL.js";import{r as l}from"./index-BlIPrx5E.js";import{I as T}from"./IconX-CXBR3vOP.js";import"./transition-AS6wcR0G.js";import"./Dropdown-CSIx-c55.js";import"./index-Cz5leWy5.js";function ae({auth:c,locations:m}){const{role:I,permissions:k}=U().props.auth,D=["SN","Location Name","Address","Actions"],[L,d]=a.useState(!1),[W,g]=a.useState(!1),[z,y]=a.useState(""),[p,v]=a.useState(""),[x,w]=a.useState(""),{data:h,setData:n,post:C,processing:F,errors:f,reset:u,delete:q}=X({name:"",address:"",map_code:""}),A=(s,t=0)=>{if(t!==0&&w(t),s==="add")y("Add New"),v("_add");else if(s==="edit"){const j=m.filter(o=>o.id===t);n({...j[0]}),y("Edit"),v("_edit")}d(!0)},S=()=>{d(!1),u()},B=s=>{s.preventDefault(),p==="_add"?C(route("admin.location.store"),{preserveScroll:!0,onSuccess:()=>{u(),d(!1)}}):p==="_edit"&&C(route("admin.location.update",x),{onSuccess:()=>{u(),d(!1)}})},H=s=>{w(s),g(!0)},i=()=>{g(!1)},R=()=>{x&&q(route("admin.location.delete",x),{onSuccess:()=>{i()}})};return e.jsxs(G,{user:c==null?void 0:c.user,children:[e.jsxs("div",{className:"content py-4 font-poppins",children:[e.jsxs("div",{className:"content-header px-6 flex justify-between items-center",children:[e.jsxs("div",{className:"left",children:[e.jsx("h1",{className:"font-semibold text-gray-800 text-3xl",children:"Church Locations"}),e.jsx("div",{className:"pt-2",children:e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(M,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(M,{href:route("admin.location.index"),children:"Church Locations"})})]})})]}),e.jsx("div",{className:"right",children:e.jsx("button",{className:"bg-[#f5cd06] shadow-lg text-[#0f0f0f] px-5 py-3 rounded-md font-semibold text-lg font-poppins",onClick:()=>{A("add")},children:"Add New"})})]}),e.jsx("div",{className:"page-content pt-8",children:e.jsx(l.Card,{className:"h-full w-full overflow-scroll rounded-none font-poppins",children:e.jsxs("table",{className:"w-full min-w-max table-auto text-left font-poppins",children:[e.jsx("thead",{children:e.jsx("tr",{children:D.map(s=>e.jsx("th",{className:"border-b border-blue-gray-100 bg-blue-gray-50 p-4",children:e.jsx(l.Typography,{className:"font-semibold text-lg leading-none opacity-70 font-poppins",children:s})},s))})}),e.jsx("tbody",{children:m.map(({id:s,name:t,address:j},o)=>{const r=o===m.length-1?"p-4":"p-4 border-b border-blue-gray-50";return e.jsxs("tr",{children:[e.jsx("td",{className:r,children:e.jsx(l.Typography,{className:"font-medium font-poppins",children:o+1})}),e.jsx("td",{className:r,children:e.jsx(l.Typography,{className:"font-medium font-poppins",children:t})}),e.jsx("td",{className:r,children:e.jsx(l.Typography,{className:"font-medium font-poppins",children:j})}),e.jsx("td",{className:r,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-0 text-sm font-medium font-poppins",onClick:()=>{A("edit",s)},children:"Edit"}),J(k,["delete_church_locations"],I)&&e.jsx("button",{className:"text-red-500 px-0 text-sm font-medium font-poppins",onClick:()=>{H(s)},children:"Delete"})]})})]},o)})})]})})})]}),e.jsx(_,{show:L,onClose:S,maxWidth:"2xl",children:e.jsxs("div",{className:"delete-modal px-6 py-8 relative font-poppins",children:[e.jsxs("h1",{className:"font-bold text-2xl font-poppins",children:[z," Church Location"]}),e.jsx("div",{className:"absolute -top-8 -right-8 text-white cursor-pointer",children:e.jsx(T,{strokeWidth:1.5,size:38,onClick:S})}),e.jsx("div",{className:"modal-content pt-6",children:e.jsxs("form",{onSubmit:B,children:[e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(N,{value:"Name",className:"mb-1 font-poppins font-semibold"}),e.jsx(E,{id:"title",type:"text",name:"name",className:"w-full rounded-md font-poppins",placeholder:"Name...",onChange:s=>n("name",s.target.value),value:h.name}),e.jsx(b,{message:f.name,className:"mt-2"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(N,{value:"Address",className:"mb-1 font-poppins font-semibold"}),e.jsx(E,{id:"address",type:"text",name:"address",className:"w-full rounded-md font-poppins",placeholder:"Address...",onChange:s=>n("address",s.target.value),value:h.address}),e.jsx(b,{message:f.address,className:"mt-2"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(N,{value:"Map",className:"mb-1 font-poppins font-semibold"}),e.jsx("textarea",{id:"map_code",rows:8,name:"map_code",className:"border-gray-300 focus:border-yellow-500 focus:ring-0 shadow-sm w-full rounded-md font-poppins",placeholder:"Map...",onChange:s=>n("map_code",s.target.value),value:h.map_code}),e.jsx(b,{message:f.map_code,className:"mt-2"})]}),e.jsx("input",{type:"hidden",name:"type",value:p}),e.jsx("div",{className:"font-item mb-4 text-right",children:e.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-poppins rounded-sm font-bold",disabled:F,children:"Submit"})})]})})]})}),e.jsx(_,{show:W,onClose:i,maxWidth:"xl",children:e.jsxs("div",{className:"delete-modal px-6 py-8 relative font-poppins",children:[e.jsx("h1",{className:"font-bold text-3xl text-center",children:"Are you sure ?"}),e.jsx("div",{className:"absolute -top-8 -right-8 text-white cursor-pointer",children:e.jsx(T,{strokeWidth:1.5,size:38,onClick:i})}),e.jsxs("div",{className:"flex justify-center gap-2 pt-6",children:[e.jsx("button",{className:"bg-red-500 text-white px-4 py-3 font-semibold rounded",onClick:i,children:"Cancel"}),e.jsx("button",{className:"bg-blue-500 text-white px-4 py-3 font-semibold rounded",onClick:R,children:"Confirm"})]})]})})]})}export{ae as default};
