import{W as R,r as o,j as e,a as B,d as j}from"./app-Dq_MSEVI.js";import{I as d}from"./InputError-CT_CLeQ4.js";import{I as n}from"./InputLabel-BNZyFggQ.js";import{T as b}from"./TextInput-CmAaxHp6.js";import{A as D}from"./AuthenticatedLayout-T2o4J1ZW.js";import{E as L}from"./Editor-DCL1sjM4.js";import"./index-D18lzN4k.js";import"./index-eCGa28Gm.js";import"./Dropdown-CHKdc9hl.js";import"./transition-Beq7YitY.js";function H({auth:m,item:a,categories:p,tags:h}){const{data:l,setData:i,post:v,processing:N,errors:c,reset:T}=R({title:a.title,slug:a.slug,content:a.content,categories:a!=null&&a.categories?a.categories.split(","):[],tags:a!=null&&a.tags?a.tags.split(","):[],featureImage:null,status:a.status}),x=o.useRef(null),[w,k]=o.useState(a.featured_image),[_,C]=o.useState(""),g=o.useRef(null);o.useEffect(()=>{const t=(l==null?void 0:l.title).replace(/\s+/g,"-").toLowerCase();i("slug",t)},[l.title]);const y=s=>{g.current.click()},I=s=>{const t=URL.createObjectURL(s.target.files[0]);i("featureImage",s.target.files[0]),C(s.target.files[0].name),k(t)},f=(s,t)=>{const{value:r,checked:E}=t.target;if(E){const u=l[s];i(s,[...u,r])}else{const u=l[s].filter(F=>F!==r);i(s,u)}},S=s=>{s.preventDefault(),v(route("admin.blogs.update",a.id))};return e.jsxs(D,{user:m==null?void 0:m.user,children:[e.jsx(B,{title:"Edit blog"}),e.jsxs("div",{className:"content py-4 font-poppins",children:[e.jsx("div",{className:"content-header px-6 flex justify-between items-center",children:e.jsxs("div",{className:"left",children:[e.jsx("h1",{className:"font-semibold text-gray-800 text-3xl",children:"Edit Blog"}),e.jsx("div",{className:"pt-2",children:e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(j,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(j,{href:route("admin.blogs.index"),children:"Blogs"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:"Edit Blog"})]})})]})}),e.jsx("div",{className:"page-content w-[95%] mx-auto lg:w-full pt-8",children:e.jsx("div",{className:"form-wrapper px-6",children:e.jsx("form",{onSubmit:S,children:e.jsxs("div",{className:"flex lg:flex-row flex-col gap-6",children:[e.jsxs("div",{className:"md:w-9/12",children:[e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(n,{value:"Title",className:"mb-1 font-poppins font-semibold"}),e.jsx(b,{name:"title",value:l.title,onChange:s=>i("title",s.target.value),className:"w-full rounded-md font-poppins"}),e.jsx(d,{message:c.title,className:"mt-2"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(n,{value:"Slug",className:"mb-1 font-poppins font-semibold"}),e.jsx(b,{name:"slug",value:l.slug,onChange:s=>i("slug",s.target.value),className:"w-full rounded-md font-poppins"}),e.jsx(d,{message:c.slug,className:"mt-2"})]}),e.jsxs("div",{className:"form-item",children:[e.jsx(n,{value:"Content",className:"mb-1 font-poppins font-semibold"}),e.jsxs("div",{className:"custom-ckeditor",style:{height:"400px"},children:[e.jsx(L,{apiKey:"h9mpgdcvlxaa94b8rwqpagapahot2x6w7urfs0dtyswd2qtj",onInit:(s,t)=>{x.current=t},onChange:()=>i("content",x.current.getContent()),initialValue:l.content,init:{height:800,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","fullscreen","insertdatetime","media","table","help","wordcount"],toolbar:"undo redo | casechange blocks | bold italic backcolor | image media| alignleft aligncenter alignright alignjustify | bullist numlist checklist outdent indent | removeformat | a11ycheck code table help",images_upload_url:"upload.php",automatic_uploads:!1}}),e.jsx(d,{message:c.content,className:"mt-2"})]})]})]}),e.jsx("div",{className:"md:w-3/12",children:e.jsxs("div",{className:"border rounded p-4",children:[e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"status",children:[e.jsx(n,{value:"Status",className:"mb-1 font-poppins font-semibold"}),e.jsxs("select",{name:"status",className:"w-full border-gray-300 rounded-md font-poppins focus:border-yellow-500 focus:ring-0",value:l.status,onChange:s=>i("status",s.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"publish",children:"Publish"})]}),e.jsx(d,{message:c.status,className:"mt-2"})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"categories",children:[e.jsx(n,{value:"Categories",className:"mb-1 font-poppins font-semibold"}),e.jsx("div",{className:"categories-items border p-4 rounded",children:p.length>0&&p.map((s,t)=>e.jsx("div",{className:"",children:e.jsxs("label",{className:"pb-3 block",children:[e.jsx("input",{type:"checkbox",name:"categories[]",value:s.id,className:"rounded w-5 h-5",onChange:r=>f("categories",r),checked:l.categories.includes(s.id.toString())}),e.jsx("span",{className:"pl-2 font-poppins font-medium",children:s.title})]})},t))})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"tags",children:[e.jsx(n,{value:"Tags",className:"mb-1 font-poppins font-semibold"}),e.jsx("div",{className:"categories-items border p-4 rounded",children:h.length>0&&h.map((s,t)=>e.jsx("div",{className:"",children:e.jsxs("label",{className:"pb-3 block",children:[e.jsx("input",{type:"checkbox",name:"tags[]",value:s.id,className:"rounded w-5 h-5",onChange:r=>f("tags",r),checked:l.tags.includes(s.id.toString())}),e.jsx("span",{className:"pl-2 font-poppins font-medium",children:s.title})]})},t))})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"featured-image",children:[e.jsx(n,{value:"Featured Image",className:"mb-1 font-poppins font-semibold"}),e.jsxs("div",{className:"categories-items border p-4 rounded",children:[e.jsx("img",{src:w}),e.jsx("input",{type:"file",name:"featureImage",hidden:!0,onChange:I,ref:g,value:""}),e.jsx("a",{className:"bg-transparent cursor-pointer",onClick:y,children:"Set Featured Image"})]})]})}),e.jsx("div",{className:"form-item",children:e.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-bold rounded font-poppins",disabled:N,children:"Submit"})})]})})]})})})})]})]})}export{H as default};
