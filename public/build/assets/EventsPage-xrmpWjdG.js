import{r as c,W as le,j as s,a as te,d as O,R as z,y as re,b as de}from"./app-Bk4iUF0l.js";import{I as h}from"./InputError-CJiPofhv.js";import{I as p}from"./InputLabel-D4QjYBlo.js";import{M as oe}from"./Modal-BmRwM0V7.js";import{T as f}from"./TextInput-CzfWL2qh.js";import{G as ce,I as ie}from"./GuestLayout-qBzT54y6.js";import{I as H}from"./IconX-D2393Vfg.js";import{I as xe}from"./IconSearch-9ri8COiP.js";import{c as me}from"./Dropdown-DykxKrtT.js";import"./transition-BFVtOU8h.js";/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ue=me("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);function Re({auth:t,events:i,locale:j}){var M,k,_,E,D,$,T,A,F,L,G;const U=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],[q,N]=c.useState(!1),[K,b]=c.useState(""),[r,w]=c.useState([]),[y,v]=c.useState(!1),[g,S]=c.useState(""),[X,R]=c.useState(""),C=function(e=6){return Math.random().toString(36).substring(2,e+2)},{data:l,setData:x,post:B,processing:he,errors:m,reset:J}=le({event_id:"",attendenceRows:[{id:C(),name:(M=t.user)!=null&&M.first_name?((k=t.user)==null?void 0:k.first_name)+" "+((_=t.user)==null?void 0:_.last_name):"",email:(E=t.user)!=null&&E.email?(D=t.user)==null?void 0:D.email:"",phone:($=t.user)!=null&&$.phone?(T=t.user)==null?void 0:T.phone:"",locale:(A=t.user)!=null&&A.local?(F=t.user)==null?void 0:F.local:""}]}),Q=()=>{const e={id:C(),name:"",email:"",phone:"",locale:""};x("attendenceRows",[...l.attendenceRows,e])},V=e=>{x("attendenceRows",l.attendenceRows.filter(a=>a.id!==e))},Y=e=>{t!=null&&t.user?(x("event_id",e),R(i.filter(a=>a.id===e)[0].title),N(!0)):re.visit(route("login",{event_message:"only registered users are able to enter attendance"}))},I=()=>{J(),R(""),N(!1),S("")},Z=async e=>{if(b(e.target.value),e.target.value.length>=3){v(!0);const a=await de.post(route("api.search.user"),{query:e.target.value});a!=null&&a.data.length&&w(a.data)}else v(!1),w([])},ee=e=>{const a=l.attendenceRows.map(n=>n.id===l.attendenceRows[l.attendenceRows.length-1].id?{...n,name:e.first_name+" "+e.last_name,email:e.email,phone:e.phone,locale:e.local}:n);x("attendenceRows",a),b(""),v(!1)},u=(e,a,n)=>{const d=l.attendenceRows.map(o=>o.id===e?{...o,[a]:n}:o);x("attendenceRows",d)},se=e=>{e.preventDefault(),B(route("event.attendence.store"),{preserveScroll:!0,onSuccess:()=>{S("Attendance Marked Successfully")}})};function ae(e,a){const n=new Date(e),d=new Date(a),o=n.toLocaleString("default",{month:"long",day:"numeric"}),ne=d.toLocaleString("default",{month:"long",day:"numeric"}),P=n.toLocaleString("default",{hour:"numeric",minute:"numeric",hour12:!0}),W=d.toLocaleString("default",{hour:"numeric",minute:"numeric",hour12:!0});return n.toDateString()===d.toDateString()?`${o} @ ${P} - ${W}`:`${o} @ ${P} - ${ne} @ ${W}`}return s.jsxs(ce,{user:t==null?void 0:t.user,children:[s.jsxs(te,{children:[s.jsx("title",{children:"Members Church of God International Calendar of Events"}),s.jsx("meta",{name:"title",content:"Members Church of God International Calendar of Events"}),s.jsx("meta",{name:"keywords",content:"Events"}),s.jsx("meta",{name:"descriptions",content:"Keep updated with the schedule of Church Services and forthcoming Events of the Members Church of God International (MCGI). Add important dates to your Google calendar for reminders."})]}),s.jsxs("div",{className:"events-page",children:[s.jsx("div",{className:"page-header pt-20 xl:pt-80 pb-28 ",children:s.jsx("div",{className:"w-full",children:s.jsxs("div",{className:" lg:max-w-screen-xl w-11/12 mx-auto",children:[s.jsx("h1",{className:"font-bold text-7xl text-white",children:"Events"}),s.jsx("div",{className:"breadcrumbs pt-5",children:s.jsxs("div",{className:"flex gap-4 font-semibold uppercase font-dmsans text-white",children:[s.jsx("div",{className:"item",children:s.jsx(O,{href:route("home"),className:"breadcrumb-link",children:"HOME"})}),s.jsx("div",{className:"divider",children:" | "}),s.jsx("div",{className:"item",children:s.jsx(O,{href:route("events.index"),className:"breadcrumb-link text-gray-200",children:"Events"})})]})})]})})}),s.jsx("div",{className:"lg:w-full w-11/12 mx-auto mt-16",children:s.jsx("div",{className:"max-w-screen-xl mx-auto",children:s.jsx("div",{className:"events-list-wrapper",children:s.jsxs("div",{className:"monthly-events",children:[s.jsxs("div",{className:"flex items-center relative",children:[s.jsx("span",{className:"w-32 font-bold text-xl font-dmsans",children:"April 2024"}),s.jsx("span",{className:"block border-t h w-full border-black"})]}),s.jsx("div",{className:"events my-12",children:i.length>0&&(i==null?void 0:i.map((e,a)=>{const n=new Date(e==null?void 0:e.start_date),d=n.getDay();return s.jsx(z.Fragment,{children:s.jsx("div",{className:"event-wrapper cursor-pointer border-b pt-6 pb-6",onClick:()=>Y(e==null?void 0:e.id),children:s.jsxs("div",{className:"flex  gap-4",children:[s.jsx("div",{className:"date basis-1/12",children:s.jsx("div",{className:"text-center font-dmsans",children:s.jsxs("p",{className:"text-lg text-black",children:[U[d]," ",s.jsx("span",{className:"block text-4xl font-bold",children:n.getDate()})]})})}),s.jsx("div",{className:"event-content basis-11/12",children:s.jsxs("div",{className:"flex flex-col md:flex-row flex-wrap",children:[s.jsxs("div",{className:"md:w-9/12 w-full",children:[s.jsx("span",{className:"font-dmsans",children:ae(e==null?void 0:e.start_date,e==null?void 0:e.end_date)}),s.jsx("h1",{className:"font-marcellus font-semibold md:text-4xl text-2xl uppercase mt-2 leading-snug",children:e==null?void 0:e.title}),s.jsxs("div",{className:"mt-4 text-gray-500 text-base",children:[s.jsxs("div",{className:"font-dmsans mb-3 flex items-center gap-1",children:[s.jsx("span",{children:s.jsx(ie,{strokeWidth:2,size:16})}),e==null?void 0:e.address]}),s.jsx("div",{dangerouslySetInnerHTML:{__html:e==null?void 0:e.content}})]})]}),s.jsx("div",{className:"md:w-3/12 w-full",children:s.jsxs("div",{className:"flex flex-col ali md:justify-end items-end ",children:[e!=null&&e.featured_image?s.jsx("img",{src:e==null?void 0:e.featured_image,alt:e==null?void 0:e.title,className:"w-full"}):s.jsx("img",{src:"/images/logo.png",width:200,className:"w-full"}),s.jsx("p",{className:"mt-8 text-sm bg-yellow-500 px-4 py-3 font-semibold rounded-md",children:"Attend Now"})]})})]})})]})})},e==null?void 0:e.id)}))})]})})})})]}),s.jsx(oe,{show:q,onClose:I,maxWidth:"xxl",children:s.jsxs("div",{className:"attendance-modal px-6 py-8 relative font-poppins",children:[s.jsxs("h1",{className:"font-bold text-3xl",children:[X," Attendance"]}),s.jsx("div",{className:"absolute md:-top-8 md:-right-8 top-0 right-0 md:text-white cursor-pointer",children:s.jsx(H,{strokeWidth:1.5,size:38,onClick:I})}),s.jsxs("div",{className:"gap-2 pt-6",children:[s.jsxs("div",{className:"search-wrapper relative",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(f,{placeholder:"Search by User Email/Name...",className:"w-full",value:K,onChange:e=>{Z(e)}}),s.jsx("div",{className:"icon absolute right-2",children:s.jsx(xe,{color:"silver"})})]}),s.jsxs("div",{className:"search-results absolute bg-gray-50 w-full rounded shadow-xl z-50",children:[y&&(r==null?void 0:r.length)>0&&(r==null?void 0:r.map((e,a)=>s.jsx(z.Fragment,{children:s.jsxs("div",{className:"py-3 px-2 border-b cursor-pointer",onClick:()=>{ee(e)},children:[s.jsxs("div",{className:"text-lg font-medium text-gray-600",children:[e==null?void 0:e.first_name," ",e==null?void 0:e.last_name]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[`${e==null?void 0:e.email},`," ",e==null?void 0:e.phone]})]})},e==null?void 0:e.id))),y&&(r==null?void 0:r.length)===0&&s.jsx("div",{className:"py-4 px-2 text-center font-medium",children:s.jsx("p",{children:"No User Found"})})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("form",{onSubmit:se,children:[s.jsxs("div",{className:"w-full",children:[((L=l==null?void 0:l.attendenceRows)==null?void 0:L.length)>0&&((G=l==null?void 0:l.attendenceRows)==null?void 0:G.map((e,a)=>s.jsxs("div",{className:"md:flex grid grid-rows-4 grid-flow-col gap-4 mb-6 items-center",children:[s.jsxs("div",{className:"md:w-1/4",children:[s.jsx(p,{value:"Full Name",className:"mb-1 text-sm md:text-base font-poppins font-semibold"}),s.jsx(f,{type:"text",className:"w-full",placeholder:"Name...",value:e==null?void 0:e.name,onChange:n=>u(e.id,"name",n.target.value)}),s.jsx(h,{message:m[`attendenceRows.${a}.name`],className:"absolute"})]}),s.jsxs("div",{className:"md:w-1/4",children:[s.jsx(p,{value:"Email Address",className:"mb-1 text-sm md:text-base font-poppins font-semibold"}),s.jsx(f,{type:"email",className:"w-full",placeholder:"Email Address...",value:e==null?void 0:e.email,onChange:n=>u(e.id,"email",n.target.value)}),s.jsx(h,{message:m[`attendenceRows.${a}.email`],className:"absolute"})]}),s.jsxs("div",{className:"md:w-1/4",children:[s.jsx(p,{value:"Phone",className:"mb-1 text-sm md:text-base font-poppins font-semibold"}),s.jsx(f,{type:"text",className:"w-full",placeholder:"Phone...",value:e==null?void 0:e.phone,onChange:n=>u(e.id,"phone",n.target.value)}),s.jsx(h,{message:m[`attendenceRows.${a}.phone`],className:"absolute"})]}),s.jsxs("div",{className:"md:w-1/4",children:[s.jsx(p,{value:"Locale",className:"mb-1 text-sm md:text-base font-poppins font-semibold"}),s.jsxs("select",{name:"locale",className:"w-full border-gray-300 focus:border-yellow-500 focus:ring-0 rounded-md shadow-sm",value:e==null?void 0:e.locale,onChange:n=>u(e.id,"locale",n.target.value),children:[s.jsx("option",{value:"",children:"Select"}),j==null?void 0:j.map((n,d)=>s.jsx("option",{value:n.id,children:n.title},d))]}),s.jsx(h,{message:m[`attendenceRows.${a}.locale`],className:"absolute"})]}),s.jsx("div",{className:"btn-wrapper px-3 pt-5 cursor-pointer",children:a===(l==null?void 0:l.attendenceRows.length)-1?s.jsx(ue,{onClick:()=>Q()}):s.jsx(H,{onClick:()=>V(e.id)})})]},a))),s.jsx("input",{type:"hidden",name:"event_id",value:l==null?void 0:l.event_id})]}),s.jsx("div",{className:"mt-6 text-right",children:s.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-semibold rounded font-xl",disabled:!!g,children:"Submit"})})]}),g&&s.jsx("div",{className:"border rounded border-green-300 mt-6 px-6 py-2",children:g})]})]})]})})]})}export{Re as default};
