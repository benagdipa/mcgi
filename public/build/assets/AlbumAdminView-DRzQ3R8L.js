import{W as O,r as l,j as e,d as c}from"./app-BR1WDgcU.js";import{I as U}from"./InputError-BWI_2sIN.js";import{M as E}from"./Modal-DIJvXHah.js";import{A as W}from"./AuthenticatedLayout-DaGfoAmj.js";import{r as d}from"./index-CxXkp5cG.js";import{u as L}from"./index-DLuMiztm.js";import{I as a}from"./IconX-CONMNGww.js";import"./transition-C0M-zO5M.js";import"./Dropdown-DMC6UzMJ.js";import"./index-CufN4QPS.js";function K({auth:m,album:t}){const{data:r,setData:p,post:f,processing:j,errors:i,reset:u,delete:g}=O({album_id:t==null?void 0:t.id,attachments:[]}),[v,h]=l.useState(!1),[N,x]=l.useState(!1),[w,y]=l.useState(""),b=()=>h(s=>!s),C=s=>{y(s),x(!0)},n=()=>{x(!1)},D=s=>{g(route("admin.album.image.delete",s),{onSuccess:()=>{n()}})},{getRootProps:S,getInputProps:I,isDragActive:k}=L({accept:{"image/*":[]},onDrop:s=>{p("attachments",[...r==null?void 0:r.attachments,...s.map(o=>Object.assign(o,{preview:URL.createObjectURL(o)}))])}}),A=r==null?void 0:r.attachments.map((s,o)=>e.jsxs("div",{className:"border border-gray-300 rounded relative w-36 h-36 p-1",children:[e.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 rounded-full text-white p-1 cursor-pointer",children:e.jsx(a,{size:16,onClick:()=>{M(s)}})}),e.jsx("img",{src:s.preview,className:"w-full h-full object-cover rounded"})]},o)),M=s=>{const o=r==null?void 0:r.attachments.filter((z,P)=>z.preview!==s.preview);p("attachments",o)},R=s=>{s.preventDefault(),f(route("admin.album.image.store"),{preserveScroll:!0,onSuccess:()=>{u(),h(!1)}})};return e.jsxs(W,{user:m.user,children:[e.jsxs("div",{className:"content py-4 font-poppins",children:[e.jsxs("div",{className:"content-header px-6 flex justify-between items-center",children:[e.jsxs("div",{className:"left",children:[e.jsx("h1",{className:"font-semibold text-gray-800 text-3xl",children:t==null?void 0:t.name}),e.jsx("div",{className:"pt-2",children:e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(c,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(c,{href:route("admin.album.index"),children:"Albums"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(c,{href:route("admin.album.view",t==null?void 0:t.id),children:t==null?void 0:t.name})})]})})]}),e.jsx("div",{className:"right",children:e.jsx("button",{className:"bg-[#f5cd06] shadow-lg text-[#0f0f0f] px-5 py-3 rounded-md font-semibold text-lg font-poppins",onClick:b,children:"Add New"})})]}),e.jsxs("div",{className:"page-content pt-8",children:[e.jsx(d.Collapse,{open:v,children:e.jsx(d.Card,{className:"px-6",children:e.jsxs("form",{onSubmit:R,children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{...S(),className:"flex items-center justify-center border-dotted border-2 py-32 rounded-md cursor-pointer",children:[e.jsx("input",{...I()}),k?e.jsx("p",{children:"Drop the files here ..."}):e.jsx("p",{className:"text-gray-500 text-sm font-poppins",children:"Drag 'n' drop some files here, or click to select files"})]}),e.jsx(U,{message:i==null?void 0:i.attachments,className:"mt-2"}),e.jsx("aside",{className:"flex flex-wrap mt-6 gap-3",children:A})]}),e.jsx("div",{className:"font-item mb-4 text-right",children:e.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 font-poppins rounded-sm font-bold",disabled:j,children:"Upload"})})]})})}),e.jsx(d.Card,{className:"h-full w-full overflow-scroll rounded-none font-poppins shadow-none",children:e.jsx("div",{className:"flex flex-wrap gap-3 py-16 px-8",children:(t==null?void 0:t.attachments.length)>0&&(t==null?void 0:t.attachments.map((s,o)=>e.jsxs("div",{className:"group border rounded relative cursor-pointer w-56 h-56 p-1",children:[e.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 rounded-full text-white p-1 cursor-pointer opacity-0 group-hover:opacity-100 transition-all",children:e.jsx(a,{size:16,onClick:()=>{C(s==null?void 0:s.id)}})}),e.jsx("img",{src:s==null?void 0:s.path,className:"w-full h-full object-cover rounded"})]},o)))})})]})]}),e.jsx(E,{show:N,onClose:n,maxWidth:"xl",children:e.jsxs("div",{className:"delete-modal px-6 py-8 relative",children:[e.jsx("h1",{className:"font-bold text-3xl text-center font-poppins",children:"Are you sure ?"}),e.jsx("div",{className:"absolute -top-8 -right-8 text-white cursor-pointer",children:e.jsx(a,{strokeWidth:1.5,size:38,onClick:n})}),e.jsxs("div",{className:"flex justify-center gap-2 pt-6",children:[e.jsx("button",{className:"bg-red-500 text-white px-4 py-3 font-semibold rounded",onClick:n,children:"Cancel"}),e.jsx("button",{className:"bg-blue-500 text-white px-4 py-3 font-semibold rounded",onClick:()=>{D(w)},children:"Confirm"})]})]})})]})}export{K as default};
