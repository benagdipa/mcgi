import{r as m,j as e,A as _}from"./app-CCsYImbS.js";import{r as a}from"./index-BWzXBwXz.js";import"./index-BarBPuyi.js";import"./index-9ALxRgoG.js";function C({eventId:x,open:j,handleOpen:p,onSuccess:g}){const[n,h]=m.useState({name:"",email:"",phone:"",locale:"",attendee_type:"guest",attendance_mode:"in-person",notes:""}),[t,o]=m.useState({}),[d,i]=m.useState(!1),r=s=>{const{name:l,value:c}=s.target;h({...n,[l]:c}),t[l]&&o({...t,[l]:null})},u=(s,l)=>{h({...n,[s]:l}),t[s]&&o({...t,[s]:null})},v=()=>{const s={};return n.name.trim()||(s.name="Name is required"),n.email&&!/\S+@\S+\.\S+/.test(n.email)&&(s.email="Email format is invalid"),n.phone&&!/^\+?[0-9\s-()]+$/.test(n.phone)&&(s.phone="Phone format is invalid"),o(s),Object.keys(s).length===0},f=s=>{s.preventDefault(),v()&&(i(!0),_.post(route("admin.events.attendance.store",x),n,{onSuccess:l=>{i(!1);const c={id:Math.floor(Math.random()*1e6),event_id:x,name:n.name,email:n.email,phone:n.phone,locale:n.locale,attendee_type:n.attendee_type,attendance_mode:n.attendance_mode,notes:n.notes,check_in_time:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};g(c)},onError:l=>{i(!1),o(l)}}))};return e.jsx(a.Dialog,{size:"md",open:j,handler:p,className:"bg-transparent shadow-none",children:e.jsx("form",{onSubmit:f,children:e.jsxs(a.Card,{className:"mx-auto w-full",children:[e.jsxs(a.CardBody,{className:"flex flex-col gap-4",children:[e.jsx(a.Typography,{variant:"h5",color:"blue-gray",className:"mb-2",children:"Add Attendance Record"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(a.Input,{type:"text",name:"name",label:"Full Name *",value:n.name,onChange:r,error:!!t.name}),t.name&&e.jsx("span",{className:"text-red-500 text-xs",children:t.name})]}),e.jsxs("div",{children:[e.jsx(a.Input,{type:"email",name:"email",label:"Email Address",value:n.email,onChange:r,error:!!t.email}),t.email&&e.jsx("span",{className:"text-red-500 text-xs",children:t.email})]}),e.jsxs("div",{children:[e.jsx(a.Input,{type:"tel",name:"phone",label:"Phone Number",value:n.phone,onChange:r,error:!!t.phone}),t.phone&&e.jsx("span",{className:"text-red-500 text-xs",children:t.phone})]}),e.jsxs("div",{children:[e.jsx(a.Input,{type:"text",name:"locale",label:"Locale/Region",value:n.locale,onChange:r,error:!!t.locale}),t.locale&&e.jsx("span",{className:"text-red-500 text-xs",children:t.locale})]}),e.jsxs("div",{children:[e.jsxs(a.Select,{label:"Attendee Type",name:"attendee_type",value:n.attendee_type,onChange:s=>u("attendee_type",s),error:!!t.attendee_type,children:[e.jsx(a.Option,{value:"member",children:"Member"}),e.jsx(a.Option,{value:"guest",children:"Guest"})]}),t.attendee_type&&e.jsx("span",{className:"text-red-500 text-xs",children:t.attendee_type})]}),e.jsxs("div",{children:[e.jsxs(a.Select,{label:"Attendance Mode",name:"attendance_mode",value:n.attendance_mode,onChange:s=>u("attendance_mode",s),error:!!t.attendance_mode,children:[e.jsx(a.Option,{value:"in-person",children:"In-Person"}),e.jsx(a.Option,{value:"online",children:"Online"})]}),t.attendance_mode&&e.jsx("span",{className:"text-red-500 text-xs",children:t.attendance_mode})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(a.Textarea,{name:"notes",label:"Notes",value:n.notes,onChange:r,error:!!t.notes}),t.notes&&e.jsx("span",{className:"text-red-500 text-xs",children:t.notes})]})]})]}),e.jsxs(a.CardFooter,{className:"pt-0 flex justify-end gap-2",children:[e.jsx(a.Button,{variant:"text",color:"red",onClick:p,disabled:d,children:"Cancel"}),e.jsx(a.Button,{type:"submit",disabled:d,children:d?"Saving...":"Add Attendance"})]})]})})})}export{C as default};
